(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var pp={exports:{}},Zl={};var xv;function gw(){if(xv)return Zl;xv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:i,type:s,key:h,ref:o!==void 0?o:null,props:u}}return Zl.Fragment=e,Zl.jsx=n,Zl.jsxs=n,Zl}var kv;function yw(){return kv||(kv=1,pp.exports=gw()),pp.exports}var K=yw(),mp={exports:{}},Oe={};var Pv;function _w(){if(Pv)return Oe;Pv=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),b=Symbol.iterator;function M(V){return V===null||typeof V!="object"?null:(V=b&&V[b]||V["@@iterator"],typeof V=="function"?V:null)}var Y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L=Object.assign,H={};function Q(V,te,he){this.props=V,this.context=te,this.refs=H,this.updater=he||Y}Q.prototype.isReactComponent={},Q.prototype.setState=function(V,te){if(typeof V!="object"&&typeof V!="function"&&V!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,V,te,"setState")},Q.prototype.forceUpdate=function(V){this.updater.enqueueForceUpdate(this,V,"forceUpdate")};function Z(){}Z.prototype=Q.prototype;function se(V,te,he){this.props=V,this.context=te,this.refs=H,this.updater=he||Y}var _e=se.prototype=new Z;_e.constructor=se,L(_e,Q.prototype),_e.isPureReactComponent=!0;var ce=Array.isArray;function ae(){}var I={H:null,A:null,T:null,S:null},w=Object.prototype.hasOwnProperty;function C(V,te,he){var fe=he.ref;return{$$typeof:i,type:V,key:te,ref:fe!==void 0?fe:null,props:he}}function x(V,te){return C(V.type,te,V.props)}function O(V){return typeof V=="object"&&V!==null&&V.$$typeof===i}function P(V){var te={"=":"=0",":":"=2"};return"$"+V.replace(/[=:]/g,function(he){return te[he]})}var R=/\/+/g;function Le(V,te){return typeof V=="object"&&V!==null&&V.key!=null?P(""+V.key):te.toString(36)}function De(V){switch(V.status){case"fulfilled":return V.value;case"rejected":throw V.reason;default:switch(typeof V.status=="string"?V.then(ae,ae):(V.status="pending",V.then(function(te){V.status==="pending"&&(V.status="fulfilled",V.value=te)},function(te){V.status==="pending"&&(V.status="rejected",V.reason=te)})),V.status){case"fulfilled":return V.value;case"rejected":throw V.reason}}throw V}function X(V,te,he,fe,Se){var Re=typeof V;(Re==="undefined"||Re==="boolean")&&(V=null);var ze=!1;if(V===null)ze=!0;else switch(Re){case"bigint":case"string":case"number":ze=!0;break;case"object":switch(V.$$typeof){case i:case e:ze=!0;break;case _:return ze=V._init,X(ze(V._payload),te,he,fe,Se)}}if(ze)return Se=Se(V),ze=fe===""?"."+Le(V,0):fe,ce(Se)?(he="",ze!=null&&(he=ze.replace(R,"$&/")+"/"),X(Se,te,he,"",function(li){return li})):Se!=null&&(O(Se)&&(Se=x(Se,he+(Se.key==null||V&&V.key===Se.key?"":(""+Se.key).replace(R,"$&/")+"/")+ze)),te.push(Se)),1;ze=0;var Et=fe===""?".":fe+":";if(ce(V))for(var it=0;it<V.length;it++)fe=V[it],Re=Et+Le(fe,it),ze+=X(fe,te,he,Re,Se);else if(it=M(V),typeof it=="function")for(V=it.call(V),it=0;!(fe=V.next()).done;)fe=fe.value,Re=Et+Le(fe,it++),ze+=X(fe,te,he,Re,Se);else if(Re==="object"){if(typeof V.then=="function")return X(De(V),te,he,fe,Se);throw te=String(V),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(V).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return ze}function oe(V,te,he){if(V==null)return V;var fe=[],Se=0;return X(V,fe,"","",function(Re){return te.call(he,Re,Se++)}),fe}function ve(V){if(V._status===-1){var te=V._result;te=te(),te.then(function(he){(V._status===0||V._status===-1)&&(V._status=1,V._result=he)},function(he){(V._status===0||V._status===-1)&&(V._status=2,V._result=he)}),V._status===-1&&(V._status=0,V._result=te)}if(V._status===1)return V._result.default;throw V._result}var Ue=typeof reportError=="function"?reportError:function(V){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof V=="object"&&V!==null&&typeof V.message=="string"?String(V.message):String(V),error:V});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",V);return}console.error(V)},Ne={map:oe,forEach:function(V,te,he){oe(V,function(){te.apply(this,arguments)},he)},count:function(V){var te=0;return oe(V,function(){te++}),te},toArray:function(V){return oe(V,function(te){return te})||[]},only:function(V){if(!O(V))throw Error("React.Children.only expected to receive a single React element child.");return V}};return Oe.Activity=T,Oe.Children=Ne,Oe.Component=Q,Oe.Fragment=n,Oe.Profiler=o,Oe.PureComponent=se,Oe.StrictMode=s,Oe.Suspense=m,Oe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=I,Oe.__COMPILER_RUNTIME={__proto__:null,c:function(V){return I.H.useMemoCache(V)}},Oe.cache=function(V){return function(){return V.apply(null,arguments)}},Oe.cacheSignal=function(){return null},Oe.cloneElement=function(V,te,he){if(V==null)throw Error("The argument must be a React element, but you passed "+V+".");var fe=L({},V.props),Se=V.key;if(te!=null)for(Re in te.key!==void 0&&(Se=""+te.key),te)!w.call(te,Re)||Re==="key"||Re==="__self"||Re==="__source"||Re==="ref"&&te.ref===void 0||(fe[Re]=te[Re]);var Re=arguments.length-2;if(Re===1)fe.children=he;else if(1<Re){for(var ze=Array(Re),Et=0;Et<Re;Et++)ze[Et]=arguments[Et+2];fe.children=ze}return C(V.type,Se,fe)},Oe.createContext=function(V){return V={$$typeof:h,_currentValue:V,_currentValue2:V,_threadCount:0,Provider:null,Consumer:null},V.Provider=V,V.Consumer={$$typeof:u,_context:V},V},Oe.createElement=function(V,te,he){var fe,Se={},Re=null;if(te!=null)for(fe in te.key!==void 0&&(Re=""+te.key),te)w.call(te,fe)&&fe!=="key"&&fe!=="__self"&&fe!=="__source"&&(Se[fe]=te[fe]);var ze=arguments.length-2;if(ze===1)Se.children=he;else if(1<ze){for(var Et=Array(ze),it=0;it<ze;it++)Et[it]=arguments[it+2];Se.children=Et}if(V&&V.defaultProps)for(fe in ze=V.defaultProps,ze)Se[fe]===void 0&&(Se[fe]=ze[fe]);return C(V,Re,Se)},Oe.createRef=function(){return{current:null}},Oe.forwardRef=function(V){return{$$typeof:p,render:V}},Oe.isValidElement=O,Oe.lazy=function(V){return{$$typeof:_,_payload:{_status:-1,_result:V},_init:ve}},Oe.memo=function(V,te){return{$$typeof:g,type:V,compare:te===void 0?null:te}},Oe.startTransition=function(V){var te=I.T,he={};I.T=he;try{var fe=V(),Se=I.S;Se!==null&&Se(he,fe),typeof fe=="object"&&fe!==null&&typeof fe.then=="function"&&fe.then(ae,Ue)}catch(Re){Ue(Re)}finally{te!==null&&he.types!==null&&(te.types=he.types),I.T=te}},Oe.unstable_useCacheRefresh=function(){return I.H.useCacheRefresh()},Oe.use=function(V){return I.H.use(V)},Oe.useActionState=function(V,te,he){return I.H.useActionState(V,te,he)},Oe.useCallback=function(V,te){return I.H.useCallback(V,te)},Oe.useContext=function(V){return I.H.useContext(V)},Oe.useDebugValue=function(){},Oe.useDeferredValue=function(V,te){return I.H.useDeferredValue(V,te)},Oe.useEffect=function(V,te){return I.H.useEffect(V,te)},Oe.useEffectEvent=function(V){return I.H.useEffectEvent(V)},Oe.useId=function(){return I.H.useId()},Oe.useImperativeHandle=function(V,te,he){return I.H.useImperativeHandle(V,te,he)},Oe.useInsertionEffect=function(V,te){return I.H.useInsertionEffect(V,te)},Oe.useLayoutEffect=function(V,te){return I.H.useLayoutEffect(V,te)},Oe.useMemo=function(V,te){return I.H.useMemo(V,te)},Oe.useOptimistic=function(V,te){return I.H.useOptimistic(V,te)},Oe.useReducer=function(V,te,he){return I.H.useReducer(V,te,he)},Oe.useRef=function(V){return I.H.useRef(V)},Oe.useState=function(V){return I.H.useState(V)},Oe.useSyncExternalStore=function(V,te,he){return I.H.useSyncExternalStore(V,te,he)},Oe.useTransition=function(){return I.H.useTransition()},Oe.version="19.2.4",Oe}var Lv;function dm(){return Lv||(Lv=1,mp.exports=_w()),mp.exports}var N=dm(),gp={exports:{}},eu={},yp={exports:{}},_p={};var Uv;function vw(){return Uv||(Uv=1,(function(i){function e(X,oe){var ve=X.length;X.push(oe);e:for(;0<ve;){var Ue=ve-1>>>1,Ne=X[Ue];if(0<o(Ne,oe))X[Ue]=oe,X[ve]=Ne,ve=Ue;else break e}}function n(X){return X.length===0?null:X[0]}function s(X){if(X.length===0)return null;var oe=X[0],ve=X.pop();if(ve!==oe){X[0]=ve;e:for(var Ue=0,Ne=X.length,V=Ne>>>1;Ue<V;){var te=2*(Ue+1)-1,he=X[te],fe=te+1,Se=X[fe];if(0>o(he,ve))fe<Ne&&0>o(Se,he)?(X[Ue]=Se,X[fe]=ve,Ue=fe):(X[Ue]=he,X[te]=ve,Ue=te);else if(fe<Ne&&0>o(Se,ve))X[Ue]=Se,X[fe]=ve,Ue=fe;else break e}}return oe}function o(X,oe){var ve=X.sortIndex-oe.sortIndex;return ve!==0?ve:X.id-oe.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;i.unstable_now=function(){return u.now()}}else{var h=Date,p=h.now();i.unstable_now=function(){return h.now()-p}}var m=[],g=[],_=1,T=null,b=3,M=!1,Y=!1,L=!1,H=!1,Q=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function _e(X){for(var oe=n(g);oe!==null;){if(oe.callback===null)s(g);else if(oe.startTime<=X)s(g),oe.sortIndex=oe.expirationTime,e(m,oe);else break;oe=n(g)}}function ce(X){if(L=!1,_e(X),!Y)if(n(m)!==null)Y=!0,ae||(ae=!0,P());else{var oe=n(g);oe!==null&&De(ce,oe.startTime-X)}}var ae=!1,I=-1,w=5,C=-1;function x(){return H?!0:!(i.unstable_now()-C<w)}function O(){if(H=!1,ae){var X=i.unstable_now();C=X;var oe=!0;try{e:{Y=!1,L&&(L=!1,Z(I),I=-1),M=!0;var ve=b;try{t:{for(_e(X),T=n(m);T!==null&&!(T.expirationTime>X&&x());){var Ue=T.callback;if(typeof Ue=="function"){T.callback=null,b=T.priorityLevel;var Ne=Ue(T.expirationTime<=X);if(X=i.unstable_now(),typeof Ne=="function"){T.callback=Ne,_e(X),oe=!0;break t}T===n(m)&&s(m),_e(X)}else s(m);T=n(m)}if(T!==null)oe=!0;else{var V=n(g);V!==null&&De(ce,V.startTime-X),oe=!1}}break e}finally{T=null,b=ve,M=!1}oe=void 0}}finally{oe?P():ae=!1}}}var P;if(typeof se=="function")P=function(){se(O)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,Le=R.port2;R.port1.onmessage=O,P=function(){Le.postMessage(null)}}else P=function(){Q(O,0)};function De(X,oe){I=Q(function(){X(i.unstable_now())},oe)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(X){X.callback=null},i.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<X?Math.floor(1e3/X):5},i.unstable_getCurrentPriorityLevel=function(){return b},i.unstable_next=function(X){switch(b){case 1:case 2:case 3:var oe=3;break;default:oe=b}var ve=b;b=oe;try{return X()}finally{b=ve}},i.unstable_requestPaint=function(){H=!0},i.unstable_runWithPriority=function(X,oe){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ve=b;b=X;try{return oe()}finally{b=ve}},i.unstable_scheduleCallback=function(X,oe,ve){var Ue=i.unstable_now();switch(typeof ve=="object"&&ve!==null?(ve=ve.delay,ve=typeof ve=="number"&&0<ve?Ue+ve:Ue):ve=Ue,X){case 1:var Ne=-1;break;case 2:Ne=250;break;case 5:Ne=1073741823;break;case 4:Ne=1e4;break;default:Ne=5e3}return Ne=ve+Ne,X={id:_++,callback:oe,priorityLevel:X,startTime:ve,expirationTime:Ne,sortIndex:-1},ve>Ue?(X.sortIndex=ve,e(g,X),n(m)===null&&X===n(g)&&(L?(Z(I),I=-1):L=!0,De(ce,ve-Ue))):(X.sortIndex=Ne,e(m,X),Y||M||(Y=!0,ae||(ae=!0,P()))),X},i.unstable_shouldYield=x,i.unstable_wrapCallback=function(X){var oe=b;return function(){var ve=b;b=oe;try{return X.apply(this,arguments)}finally{b=ve}}}})(_p)),_p}var zv;function Ew(){return zv||(zv=1,yp.exports=vw()),yp.exports}var vp={exports:{}},_n={};var Bv;function Tw(){if(Bv)return _n;Bv=1;var i=dm();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(m,g,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:T==null?null:""+T,children:m,containerInfo:g,implementation:_}}var h=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return _n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,_n.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return u(m,g,null,_)},_n.flushSync=function(m){var g=h.T,_=s.p;try{if(h.T=null,s.p=2,m)return m()}finally{h.T=g,s.p=_,s.d.f()}},_n.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(m,g))},_n.prefetchDNS=function(m){typeof m=="string"&&s.d.D(m)},_n.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,T=p(_,g.crossOrigin),b=typeof g.integrity=="string"?g.integrity:void 0,M=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:T,integrity:b,fetchPriority:M}):_==="script"&&s.d.X(m,{crossOrigin:T,integrity:b,fetchPriority:M,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},_n.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=p(g.as,g.crossOrigin);s.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(m)},_n.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,T=p(_,g.crossOrigin);s.d.L(m,_,{crossOrigin:T,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},_n.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=p(g.as,g.crossOrigin);s.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(m)},_n.requestFormReset=function(m){s.d.r(m)},_n.unstable_batchedUpdates=function(m,g){return m(g)},_n.useFormState=function(m,g,_){return h.H.useFormState(m,g,_)},_n.useFormStatus=function(){return h.H.useHostTransitionStatus()},_n.version="19.2.4",_n}var jv;function Sw(){if(jv)return vp.exports;jv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),vp.exports=Tw(),vp.exports}var qv;function Aw(){if(qv)return eu;qv=1;var i=Ew(),e=dm(),n=Sw();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function h(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function p(t){if(t.tag===31){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function m(t){if(u(t)!==t)throw Error(s(188))}function g(t){var r=t.alternate;if(!r){if(r=u(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return m(f),t;if(d===l)return m(f),r;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=f,l=d;else{for(var v=!1,S=f.child;S;){if(S===a){v=!0,a=f,l=d;break}if(S===l){v=!0,l=f,a=d;break}S=S.sibling}if(!v){for(S=d.child;S;){if(S===a){v=!0,a=d,l=f;break}if(S===l){v=!0,l=d,a=f;break}S=S.sibling}if(!v)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function _(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=_(t),r!==null)return r;t=t.sibling}return null}var T=Object.assign,b=Symbol.for("react.element"),M=Symbol.for("react.transitional.element"),Y=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),Q=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),se=Symbol.for("react.context"),_e=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),x=Symbol.for("react.memo_cache_sentinel"),O=Symbol.iterator;function P(t){return t===null||typeof t!="object"?null:(t=O&&t[O]||t["@@iterator"],typeof t=="function"?t:null)}var R=Symbol.for("react.client.reference");function Le(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===R?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case L:return"Fragment";case Q:return"Profiler";case H:return"StrictMode";case ce:return"Suspense";case ae:return"SuspenseList";case C:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case Y:return"Portal";case se:return t.displayName||"Context";case Z:return(t._context.displayName||"Context")+".Consumer";case _e:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:Le(t.type)||"Memo";case w:r=t._payload,t=t._init;try{return Le(t(r))}catch{}}return null}var De=Array.isArray,X=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ve={pending:!1,data:null,method:null,action:null},Ue=[],Ne=-1;function V(t){return{current:t}}function te(t){0>Ne||(t.current=Ue[Ne],Ue[Ne]=null,Ne--)}function he(t,r){Ne++,Ue[Ne]=t.current,t.current=r}var fe=V(null),Se=V(null),Re=V(null),ze=V(null);function Et(t,r){switch(he(Re,r),he(Se,t),he(fe,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?rv(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=rv(r),t=iv(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}te(fe),he(fe,t)}function it(){te(fe),te(Se),te(Re)}function li(t){t.memoizedState!==null&&he(ze,t);var r=fe.current,a=iv(r,t.type);r!==a&&(he(Se,t),he(fe,a))}function Hi(t){Se.current===t&&(te(fe),te(Se)),ze.current===t&&(te(ze),Ql._currentValue=ve)}var Fi,Zn;function Ln(t){if(Fi===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);Fi=r&&r[1]||"",Zn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Fi+t+Zn}var pn=!1;function Pr(t,r){if(!t||pn)return"";pn=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch($){var F=$}Reflect.construct(t,[],re)}else{try{re.call()}catch($){F=$}t.call(re.prototype)}}else{try{throw Error()}catch($){F=$}(re=t())&&typeof re.catch=="function"&&re.catch(function(){})}}catch($){if($&&F&&typeof $.stack=="string")return[$.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),v=d[0],S=d[1];if(v&&S){var D=v.split(`
`),q=S.split(`
`);for(f=l=0;l<D.length&&!D[l].includes("DetermineComponentFrameRoot");)l++;for(;f<q.length&&!q[f].includes("DetermineComponentFrameRoot");)f++;if(l===D.length||f===q.length)for(l=D.length-1,f=q.length-1;1<=l&&0<=f&&D[l]!==q[f];)f--;for(;1<=l&&0<=f;l--,f--)if(D[l]!==q[f]){if(l!==1||f!==1)do if(l--,f--,0>f||D[l]!==q[f]){var J=`
`+D[l].replace(" at new "," at ");return t.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",t.displayName)),J}while(1<=l&&0<=f);break}}}finally{pn=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Ln(a):""}function mn(t,r){switch(t.tag){case 26:case 27:case 5:return Ln(t.type);case 16:return Ln("Lazy");case 13:return t.child!==r&&r!==null?Ln("Suspense Fallback"):Ln("Suspense");case 19:return Ln("SuspenseList");case 0:case 15:return Pr(t.type,!1);case 11:return Pr(t.type.render,!1);case 1:return Pr(t.type,!0);case 31:return Ln("Activity");default:return""}}function Lr(t){try{var r="",a=null;do r+=mn(t,a),a=t,t=t.return;while(t);return r}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var Tt=Object.prototype.hasOwnProperty,wt=i.unstable_scheduleCallback,Tr=i.unstable_cancelCallback,tl=i.unstable_shouldYield,Ys=i.unstable_requestPaint,Rt=i.unstable_now,Ur=i.unstable_getCurrentPriorityLevel,Gi=i.unstable_ImmediatePriority,zr=i.unstable_UserBlockingPriority,er=i.unstable_NormalPriority,Qs=i.unstable_LowPriority,Br=i.unstable_IdlePriority,Xs=i.log,ui=i.unstable_setDisableYieldValue,Xt=null,Wt=null;function In(t){if(typeof Xs=="function"&&ui(t),Wt&&typeof Wt.setStrictMode=="function")try{Wt.setStrictMode(Xt,t)}catch{}}var St=Math.clz32?Math.clz32:$i,Ws=Math.log,ci=Math.LN2;function $i(t){return t>>>=0,t===0?32:31-(Ws(t)/ci|0)|0}var Un=256,jr=262144,yt=4194304;function tr(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function nr(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var f=0,d=t.suspendedLanes,v=t.pingedLanes;t=t.warmLanes;var S=l&134217727;return S!==0?(l=S&~d,l!==0?f=tr(l):(v&=S,v!==0?f=tr(v):a||(a=S&~t,a!==0&&(f=tr(a))))):(S=l&~d,S!==0?f=tr(S):v!==0?f=tr(v):a||(a=l&~t,a!==0&&(f=tr(a)))),f===0?0:r!==0&&r!==f&&(r&d)===0&&(d=f&-f,a=r&-r,d>=a||d===32&&(a&4194048)!==0)?r:f}function zn(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function La(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Js(){var t=yt;return yt<<=1,(yt&62914560)===0&&(yt=4194304),t}function j(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function W(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function le(t,r,a,l,f,d){var v=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var S=t.entanglements,D=t.expirationTimes,q=t.hiddenUpdates;for(a=v&~a;0<a;){var J=31-St(a),re=1<<J;S[J]=0,D[J]=-1;var F=q[J];if(F!==null)for(q[J]=null,J=0;J<F.length;J++){var $=F[J];$!==null&&($.lane&=-536870913)}a&=~re}l!==0&&Ie(t,l,0),d!==0&&f===0&&t.tag!==0&&(t.suspendedLanes|=d&~(v&~r))}function Ie(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-St(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function ke(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-St(a),f=1<<l;f&r|t[l]&r&&(t[l]|=r),a&=~f}}function et(t,r){var a=r&-r;return a=(a&42)!==0?1:Nt(a),(a&(t.suspendedLanes|r))!==0?0:a}function Nt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function gn(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Ot(){var t=oe.p;return t!==0?t:(t=window.event,t===void 0?32:Iv(t.type))}function ht(t,r){var a=oe.p;try{return oe.p=t,r()}finally{oe.p=a}}var Jt=Math.random().toString(36).slice(2),ft="__reactFiber$"+Jt,It="__reactProps$"+Jt,yn="__reactContainer$"+Jt,hi="__reactEvents$"+Jt,nl="__reactListeners$"+Jt,Ua="__reactHandles$"+Jt,za="__reactResources$"+Jt,Bn="__reactMarker$"+Jt;function fi(t){delete t[ft],delete t[It],delete t[hi],delete t[nl],delete t[Ua]}function pe(t){var r=t[ft];if(r)return r;for(var a=t.parentNode;a;){if(r=a[yn]||a[ft]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=hv(t);t!==null;){if(a=t[ft])return a;t=hv(t)}return r}t=a,a=t.parentNode}return null}function Mt(t){if(t=t[ft]||t[yn]){var r=t.tag;if(r===5||r===6||r===13||r===31||r===26||r===27||r===3)return t}return null}function Vt(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function rr(t){var r=t[za];return r||(r=t[za]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function xt(t){t[Bn]=!0}var ir=new Set,rl={};function qr(t,r){Hr(t,r),Hr(t+"Capture",r)}function Hr(t,r){for(rl[t]=r,t=0;t<r.length;t++)ir.add(r[t])}var il=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),sl={},al={};function Hu(t){return Tt.call(al,t)?!0:Tt.call(sl,t)?!1:il.test(t)?al[t]=!0:(sl[t]=!0,!1)}function Ba(t,r,a){if(Hu(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function jn(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function jt(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}function tn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ki(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function ol(t,r,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,r);if(!t.hasOwnProperty(r)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return f.call(this)},set:function(v){a=""+v,d.call(this,v)}}),Object.defineProperty(t,r,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(v){a=""+v},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function tt(t){if(!t._valueTracker){var r=Ki(t)?"checked":"value";t._valueTracker=ol(t,r,""+t[r])}}function Zs(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=Ki(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Fr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ea=/[\n"\\]/g;function Cn(t){return t.replace(ea,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ja(t,r,a,l,f,d,v,S){t.name="",v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"?t.type=v:t.removeAttribute("type"),r!=null?v==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+tn(r)):t.value!==""+tn(r)&&(t.value=""+tn(r)):v!=="submit"&&v!=="reset"||t.removeAttribute("value"),r!=null?ll(t,v,tn(r)):a!=null?ll(t,v,tn(a)):l!=null&&t.removeAttribute("value"),f==null&&d!=null&&(t.defaultChecked=!!d),f!=null&&(t.checked=f&&typeof f!="function"&&typeof f!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?t.name=""+tn(S):t.removeAttribute("name")}function Fu(t,r,a,l,f,d,v,S){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),r!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||r!=null)){tt(t);return}a=a!=null?""+tn(a):"",r=r!=null?""+tn(r):a,S||r===t.value||(t.value=r),t.defaultValue=r}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=S?t.checked:!!l,t.defaultChecked=!!l,v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(t.name=v),tt(t)}function ll(t,r,a){r==="number"&&Fr(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Yi(t,r,a,l){if(t=t.options,r){r={};for(var f=0;f<a.length;f++)r["$"+a[f]]=!0;for(a=0;a<t.length;a++)f=r.hasOwnProperty("$"+t[a].value),t[a].selected!==f&&(t[a].selected=f),f&&l&&(t[a].defaultSelected=!0)}else{for(a=""+tn(a),r=null,f=0;f<t.length;f++){if(t[f].value===a){t[f].selected=!0,l&&(t[f].defaultSelected=!0);return}r!==null||t[f].disabled||(r=t[f])}r!==null&&(r.selected=!0)}}function Gu(t,r,a){if(r!=null&&(r=""+tn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+tn(a):""}function Qi(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(De(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=tn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),tt(t)}function Dn(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var $u=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ul(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||$u.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function cl(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var f in r)l=r[f],r.hasOwnProperty(f)&&a[f]!==l&&ul(t,f,l)}else for(var d in r)r.hasOwnProperty(d)&&ul(t,d,r[d])}function qa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ku=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Xi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ha(t){return Xi.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Sr(){}var hl=null;function sr(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wi=null,Gr=null;function ta(t){var r=Mt(t);if(r&&(t=r.stateNode)){var a=t[It]||null;e:switch(t=r.stateNode,r.type){case"input":if(ja(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+Cn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var f=l[It]||null;if(!f)throw Error(s(90));ja(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&Zs(l)}break e;case"textarea":Gu(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Yi(t,!!a.multiple,r,!1)}}}var Fa=!1;function Ji(t,r,a){if(Fa)return t(r,a);Fa=!0;try{var l=t(r);return l}finally{if(Fa=!1,(Wi!==null||Gr!==null)&&(Bc(),Wi&&(r=Wi,t=Gr,Gr=Wi=null,ta(r),t)))for(r=0;r<t.length;r++)ta(t[r])}}function Ar(t,r){var a=t.stateNode;if(a===null)return null;var l=a[It]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),na=!1;if(ar)try{var st={};Object.defineProperty(st,"passive",{get:function(){na=!0}}),window.addEventListener("test",st,st),window.removeEventListener("test",st,st)}catch{na=!1}var $r=null,fl=null,ra=null;function dl(){if(ra)return ra;var t,r=fl,a=r.length,l,f="value"in $r?$r.value:$r.textContent,d=f.length;for(t=0;t<a&&r[t]===f[t];t++);var v=a-t;for(l=1;l<=v&&r[a-l]===f[d-l];l++);return ra=f.slice(t,1<l?1-l:void 0)}function ia(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function di(){return!0}function br(){return!1}function sn(t){function r(a,l,f,d,v){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=v,this.currentTarget=null;for(var S in t)t.hasOwnProperty(S)&&(a=t[S],this[S]=a?a(d):d[S]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?di:br,this.isPropagationStopped=br,this}return T(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=di)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=di)},persist:function(){},isPersistent:di}),r}var pi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kr=sn(pi),Zi=T({},pi,{view:0,detail:0}),pl=sn(Zi),es,Ga,Yr,$a=T({},Zi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ts,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yr&&(Yr&&t.type==="mousemove"?(es=t.screenX-Yr.screenX,Ga=t.screenY-Yr.screenY):Ga=es=0,Yr=t),es)},movementY:function(t){return"movementY"in t?t.movementY:Ga}}),ml=sn($a),sa=T({},$a,{dataTransfer:0}),Yu=sn(sa),Qu=T({},Zi,{relatedTarget:0}),aa=sn(Qu),gl=T({},pi,{animationName:0,elapsedTime:0,pseudoElement:0}),Xu=sn(gl),Ka=T({},pi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Wu=sn(Ka),Ju=T({},pi,{data:0}),Qr=sn(Ju),Zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ec={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tc={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nc(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=tc[t])?!!r[t]:!1}function ts(){return nc}var wn=T({},Zi,{key:function(t){if(t.key){var r=Zu[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=ia(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?ec[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ts,charCode:function(t){return t.type==="keypress"?ia(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ia(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rc=sn(wn),ic=T({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mi=sn(ic),c=T({},Zi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ts}),y=sn(c),E=T({},pi,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=sn(E),z=T({},$a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),G=sn(z),ue=T({},pi,{newState:0,oldState:0}),Ve=sn(ue),kt=[9,13,27,32],We=ar&&"CompositionEvent"in window,_t=null;ar&&"documentMode"in document&&(_t=document.documentMode);var or=ar&&"TextEvent"in window&&!_t,Xr=ar&&(!We||_t&&8<_t&&11>=_t),wr=" ",Rr=!1;function oa(t,r){switch(t){case"keyup":return kt.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ya(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qa=!1;function BA(t,r){switch(t){case"compositionend":return Ya(r);case"keypress":return r.which!==32?null:(Rr=!0,wr);case"textInput":return t=r.data,t===wr&&Rr?null:t;default:return null}}function jA(t,r){if(Qa)return t==="compositionend"||!We&&oa(t,r)?(t=dl(),ra=fl=$r=null,Qa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Xr&&r.locale!=="ko"?null:r.data;default:return null}}var qA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!qA[t.type]:r==="textarea"}function mg(t,r,a,l){Wi?Gr?Gr.push(l):Gr=[l]:Wi=l,r=Kc(r,"onChange"),0<r.length&&(a=new Kr("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var yl=null,_l=null;function HA(t){W_(t,0)}function sc(t){var r=Vt(t);if(Zs(r))return t}function gg(t,r){if(t==="change")return r}var yg=!1;if(ar){var Tf;if(ar){var Sf="oninput"in document;if(!Sf){var _g=document.createElement("div");_g.setAttribute("oninput","return;"),Sf=typeof _g.oninput=="function"}Tf=Sf}else Tf=!1;yg=Tf&&(!document.documentMode||9<document.documentMode)}function vg(){yl&&(yl.detachEvent("onpropertychange",Eg),_l=yl=null)}function Eg(t){if(t.propertyName==="value"&&sc(_l)){var r=[];mg(r,_l,t,sr(t)),Ji(HA,r)}}function FA(t,r,a){t==="focusin"?(vg(),yl=r,_l=a,yl.attachEvent("onpropertychange",Eg)):t==="focusout"&&vg()}function GA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return sc(_l)}function $A(t,r){if(t==="click")return sc(r)}function KA(t,r){if(t==="input"||t==="change")return sc(r)}function YA(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var qn=typeof Object.is=="function"?Object.is:YA;function vl(t,r){if(qn(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!Tt.call(r,f)||!qn(t[f],r[f]))return!1}return!0}function Tg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sg(t,r){var a=Tg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tg(a)}}function Ag(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Ag(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Fr(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Fr(t.document)}return r}function Af(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var QA=ar&&"documentMode"in document&&11>=document.documentMode,Xa=null,bf=null,El=null,wf=!1;function wg(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;wf||Xa==null||Xa!==Fr(l)||(l=Xa,"selectionStart"in l&&Af(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),El&&vl(El,l)||(El=l,l=Kc(bf,"onSelect"),0<l.length&&(r=new Kr("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=Xa)))}function la(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var Wa={animationend:la("Animation","AnimationEnd"),animationiteration:la("Animation","AnimationIteration"),animationstart:la("Animation","AnimationStart"),transitionrun:la("Transition","TransitionRun"),transitionstart:la("Transition","TransitionStart"),transitioncancel:la("Transition","TransitionCancel"),transitionend:la("Transition","TransitionEnd")},Rf={},Rg={};ar&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function ua(t){if(Rf[t])return Rf[t];if(!Wa[t])return t;var r=Wa[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in Rg)return Rf[t]=r[a];return t}var Ig=ua("animationend"),Cg=ua("animationiteration"),Dg=ua("animationstart"),XA=ua("transitionrun"),WA=ua("transitionstart"),JA=ua("transitioncancel"),Ng=ua("transitionend"),Og=new Map,If="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");If.push("scrollEnd");function Ir(t,r){Og.set(t,r),qr(r,[t])}var ac=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},lr=[],Ja=0,Cf=0;function oc(){for(var t=Ja,r=Cf=Ja=0;r<t;){var a=lr[r];lr[r++]=null;var l=lr[r];lr[r++]=null;var f=lr[r];lr[r++]=null;var d=lr[r];if(lr[r++]=null,l!==null&&f!==null){var v=l.pending;v===null?f.next=f:(f.next=v.next,v.next=f),l.pending=f}d!==0&&Mg(a,f,d)}}function lc(t,r,a,l){lr[Ja++]=t,lr[Ja++]=r,lr[Ja++]=a,lr[Ja++]=l,Cf|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function Df(t,r,a,l){return lc(t,r,a,l),uc(t)}function ca(t,r){return lc(t,null,null,r),uc(t)}function Mg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(f=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,f&&r!==null&&(f=31-St(a),t=d.hiddenUpdates,l=t[f],l===null?t[f]=[r]:l.push(r),r.lane=a|536870912),d):null}function uc(t){if(50<ql)throw ql=0,Ud=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var Za={};function ZA(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,r,a,l){return new ZA(t,r,a,l)}function Nf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gi(t,r){var a=t.alternate;return a===null?(a=Hn(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Vg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function cc(t,r,a,l,f,d){var v=0;if(l=t,typeof t=="function")Nf(t)&&(v=1);else if(typeof t=="string")v=iw(t,a,fe.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case C:return t=Hn(31,a,r,f),t.elementType=C,t.lanes=d,t;case L:return ha(a.children,f,d,r);case H:v=8,f|=24;break;case Q:return t=Hn(12,a,r,f|2),t.elementType=Q,t.lanes=d,t;case ce:return t=Hn(13,a,r,f),t.elementType=ce,t.lanes=d,t;case ae:return t=Hn(19,a,r,f),t.elementType=ae,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case se:v=10;break e;case Z:v=9;break e;case _e:v=11;break e;case I:v=14;break e;case w:v=16,l=null;break e}v=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=Hn(v,a,r,f),r.elementType=t,r.type=l,r.lanes=d,r}function ha(t,r,a,l){return t=Hn(7,t,l,r),t.lanes=a,t}function Of(t,r,a){return t=Hn(6,t,null,r),t.lanes=a,t}function xg(t){var r=Hn(18,null,null,0);return r.stateNode=t,r}function Mf(t,r,a){return r=Hn(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var kg=new WeakMap;function ur(t,r){if(typeof t=="object"&&t!==null){var a=kg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:Lr(r)},kg.set(t,r),r)}return{value:t,source:r,stack:Lr(r)}}var eo=[],to=0,hc=null,Tl=0,cr=[],hr=0,ns=null,Wr=1,Jr="";function yi(t,r){eo[to++]=Tl,eo[to++]=hc,hc=t,Tl=r}function Pg(t,r,a){cr[hr++]=Wr,cr[hr++]=Jr,cr[hr++]=ns,ns=t;var l=Wr;t=Jr;var f=32-St(l)-1;l&=~(1<<f),a+=1;var d=32-St(r)+f;if(30<d){var v=f-f%5;d=(l&(1<<v)-1).toString(32),l>>=v,f-=v,Wr=1<<32-St(r)+f|a<<f|l,Jr=d+t}else Wr=1<<d|a<<f|l,Jr=t}function Vf(t){t.return!==null&&(yi(t,1),Pg(t,1,0))}function xf(t){for(;t===hc;)hc=eo[--to],eo[to]=null,Tl=eo[--to],eo[to]=null;for(;t===ns;)ns=cr[--hr],cr[hr]=null,Jr=cr[--hr],cr[hr]=null,Wr=cr[--hr],cr[hr]=null}function Lg(t,r){cr[hr++]=Wr,cr[hr++]=Jr,cr[hr++]=ns,Wr=r.id,Jr=r.overflow,ns=t}var an=null,pt=null,Ke=!1,rs=null,fr=!1,kf=Error(s(519));function is(t){var r=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Sl(ur(r,t)),kf}function Ug(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[ft]=t,r[It]=l,a){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(a=0;a<Fl.length;a++)je(Fl[a],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":je("invalid",r),Fu(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":je("invalid",r);break;case"textarea":je("invalid",r),Qi(r,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||tv(r.textContent,a)?(l.popover!=null&&(je("beforetoggle",r),je("toggle",r)),l.onScroll!=null&&je("scroll",r),l.onScrollEnd!=null&&je("scrollend",r),l.onClick!=null&&(r.onclick=Sr),r=!0):r=!1,r||is(t,!0)}function zg(t){for(an=t.return;an;)switch(an.tag){case 5:case 31:case 13:fr=!1;return;case 27:case 3:fr=!0;return;default:an=an.return}}function no(t){if(t!==an)return!1;if(!Ke)return zg(t),Ke=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Zd(t.type,t.memoizedProps)),a=!a),a&&pt&&is(t),zg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));pt=cv(t)}else if(r===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));pt=cv(t)}else r===27?(r=pt,_s(t.type)?(t=ip,ip=null,pt=t):pt=r):pt=an?pr(t.stateNode.nextSibling):null;return!0}function fa(){pt=an=null,Ke=!1}function Pf(){var t=rs;return t!==null&&(Vn===null?Vn=t:Vn.push.apply(Vn,t),rs=null),t}function Sl(t){rs===null?rs=[t]:rs.push(t)}var Lf=V(null),da=null,_i=null;function ss(t,r,a){he(Lf,r._currentValue),r._currentValue=a}function vi(t){t._currentValue=Lf.current,te(Lf)}function Uf(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function zf(t,r,a,l){var f=t.child;for(f!==null&&(f.return=t);f!==null;){var d=f.dependencies;if(d!==null){var v=f.child;d=d.firstContext;e:for(;d!==null;){var S=d;d=f;for(var D=0;D<r.length;D++)if(S.context===r[D]){d.lanes|=a,S=d.alternate,S!==null&&(S.lanes|=a),Uf(d.return,a,t),l||(v=null);break e}d=S.next}}else if(f.tag===18){if(v=f.return,v===null)throw Error(s(341));v.lanes|=a,d=v.alternate,d!==null&&(d.lanes|=a),Uf(v,a,t),v=null}else v=f.child;if(v!==null)v.return=f;else for(v=f;v!==null;){if(v===t){v=null;break}if(f=v.sibling,f!==null){f.return=v.return,v=f;break}v=v.return}f=v}}function ro(t,r,a,l){t=null;for(var f=r,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var v=f.alternate;if(v===null)throw Error(s(387));if(v=v.memoizedProps,v!==null){var S=f.type;qn(f.pendingProps.value,v.value)||(t!==null?t.push(S):t=[S])}}else if(f===ze.current){if(v=f.alternate,v===null)throw Error(s(387));v.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(t!==null?t.push(Ql):t=[Ql])}f=f.return}t!==null&&zf(r,t,a,l),r.flags|=262144}function fc(t){for(t=t.firstContext;t!==null;){if(!qn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function pa(t){da=t,_i=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function on(t){return Bg(da,t)}function dc(t,r){return da===null&&pa(t),Bg(t,r)}function Bg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},_i===null){if(t===null)throw Error(s(308));_i=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else _i=_i.next=r;return a}var eb=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},tb=i.unstable_scheduleCallback,nb=i.unstable_NormalPriority,qt={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Bf(){return{controller:new eb,data:new Map,refCount:0}}function Al(t){t.refCount--,t.refCount===0&&tb(nb,function(){t.controller.abort()})}var bl=null,jf=0,io=0,so=null;function rb(t,r){if(bl===null){var a=bl=[];jf=0,io=Fd(),so={status:"pending",value:void 0,then:function(l){a.push(l)}}}return jf++,r.then(jg,jg),r}function jg(){if(--jf===0&&bl!==null){so!==null&&(so.status="fulfilled");var t=bl;bl=null,io=0,so=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function ib(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var f=0;f<a.length;f++)(0,a[f])(r)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var qg=X.S;X.S=function(t,r){w_=Rt(),typeof r=="object"&&r!==null&&typeof r.then=="function"&&rb(t,r),qg!==null&&qg(t,r)};var ma=V(null);function qf(){var t=ma.current;return t!==null?t:ut.pooledCache}function pc(t,r){r===null?he(ma,ma.current):he(ma,r.pool)}function Hg(){var t=qf();return t===null?null:{parent:qt._currentValue,pool:t}}var ao=Error(s(460)),Hf=Error(s(474)),mc=Error(s(542)),gc={then:function(){}};function Fg(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Gg(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(Sr,Sr),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kg(t),t;default:if(typeof r.status=="string")r.then(Sr,Sr);else{if(t=ut,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var f=r;f.status="fulfilled",f.value=l}},function(l){if(r.status==="pending"){var f=r;f.status="rejected",f.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,Kg(t),t}throw ya=r,ao}}function ga(t){try{var r=t._init;return r(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(ya=a,ao):a}}var ya=null;function $g(){if(ya===null)throw Error(s(459));var t=ya;return ya=null,t}function Kg(t){if(t===ao||t===mc)throw Error(s(483))}var oo=null,wl=0;function yc(t){var r=wl;return wl+=1,oo===null&&(oo=[]),Gg(oo,t,r)}function Rl(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function _c(t,r){throw r.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Yg(t){function r(U,k){if(t){var B=U.deletions;B===null?(U.deletions=[k],U.flags|=16):B.push(k)}}function a(U,k){if(!t)return null;for(;k!==null;)r(U,k),k=k.sibling;return null}function l(U){for(var k=new Map;U!==null;)U.key!==null?k.set(U.key,U):k.set(U.index,U),U=U.sibling;return k}function f(U,k){return U=gi(U,k),U.index=0,U.sibling=null,U}function d(U,k,B){return U.index=B,t?(B=U.alternate,B!==null?(B=B.index,B<k?(U.flags|=67108866,k):B):(U.flags|=67108866,k)):(U.flags|=1048576,k)}function v(U){return t&&U.alternate===null&&(U.flags|=67108866),U}function S(U,k,B,ee){return k===null||k.tag!==6?(k=Of(B,U.mode,ee),k.return=U,k):(k=f(k,B),k.return=U,k)}function D(U,k,B,ee){var Ee=B.type;return Ee===L?J(U,k,B.props.children,ee,B.key):k!==null&&(k.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===w&&ga(Ee)===k.type)?(k=f(k,B.props),Rl(k,B),k.return=U,k):(k=cc(B.type,B.key,B.props,null,U.mode,ee),Rl(k,B),k.return=U,k)}function q(U,k,B,ee){return k===null||k.tag!==4||k.stateNode.containerInfo!==B.containerInfo||k.stateNode.implementation!==B.implementation?(k=Mf(B,U.mode,ee),k.return=U,k):(k=f(k,B.children||[]),k.return=U,k)}function J(U,k,B,ee,Ee){return k===null||k.tag!==7?(k=ha(B,U.mode,ee,Ee),k.return=U,k):(k=f(k,B),k.return=U,k)}function re(U,k,B){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return k=Of(""+k,U.mode,B),k.return=U,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case M:return B=cc(k.type,k.key,k.props,null,U.mode,B),Rl(B,k),B.return=U,B;case Y:return k=Mf(k,U.mode,B),k.return=U,k;case w:return k=ga(k),re(U,k,B)}if(De(k)||P(k))return k=ha(k,U.mode,B,null),k.return=U,k;if(typeof k.then=="function")return re(U,yc(k),B);if(k.$$typeof===se)return re(U,dc(U,k),B);_c(U,k)}return null}function F(U,k,B,ee){var Ee=k!==null?k.key:null;if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return Ee!==null?null:S(U,k,""+B,ee);if(typeof B=="object"&&B!==null){switch(B.$$typeof){case M:return B.key===Ee?D(U,k,B,ee):null;case Y:return B.key===Ee?q(U,k,B,ee):null;case w:return B=ga(B),F(U,k,B,ee)}if(De(B)||P(B))return Ee!==null?null:J(U,k,B,ee,null);if(typeof B.then=="function")return F(U,k,yc(B),ee);if(B.$$typeof===se)return F(U,k,dc(U,B),ee);_c(U,B)}return null}function $(U,k,B,ee,Ee){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return U=U.get(B)||null,S(k,U,""+ee,Ee);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case M:return U=U.get(ee.key===null?B:ee.key)||null,D(k,U,ee,Ee);case Y:return U=U.get(ee.key===null?B:ee.key)||null,q(k,U,ee,Ee);case w:return ee=ga(ee),$(U,k,B,ee,Ee)}if(De(ee)||P(ee))return U=U.get(B)||null,J(k,U,ee,Ee,null);if(typeof ee.then=="function")return $(U,k,B,yc(ee),Ee);if(ee.$$typeof===se)return $(U,k,B,dc(k,ee),Ee);_c(k,ee)}return null}function ge(U,k,B,ee){for(var Ee=null,Qe=null,ye=k,Pe=k=0,He=null;ye!==null&&Pe<B.length;Pe++){ye.index>Pe?(He=ye,ye=null):He=ye.sibling;var Xe=F(U,ye,B[Pe],ee);if(Xe===null){ye===null&&(ye=He);break}t&&ye&&Xe.alternate===null&&r(U,ye),k=d(Xe,k,Pe),Qe===null?Ee=Xe:Qe.sibling=Xe,Qe=Xe,ye=He}if(Pe===B.length)return a(U,ye),Ke&&yi(U,Pe),Ee;if(ye===null){for(;Pe<B.length;Pe++)ye=re(U,B[Pe],ee),ye!==null&&(k=d(ye,k,Pe),Qe===null?Ee=ye:Qe.sibling=ye,Qe=ye);return Ke&&yi(U,Pe),Ee}for(ye=l(ye);Pe<B.length;Pe++)He=$(ye,U,Pe,B[Pe],ee),He!==null&&(t&&He.alternate!==null&&ye.delete(He.key===null?Pe:He.key),k=d(He,k,Pe),Qe===null?Ee=He:Qe.sibling=He,Qe=He);return t&&ye.forEach(function(As){return r(U,As)}),Ke&&yi(U,Pe),Ee}function Ae(U,k,B,ee){if(B==null)throw Error(s(151));for(var Ee=null,Qe=null,ye=k,Pe=k=0,He=null,Xe=B.next();ye!==null&&!Xe.done;Pe++,Xe=B.next()){ye.index>Pe?(He=ye,ye=null):He=ye.sibling;var As=F(U,ye,Xe.value,ee);if(As===null){ye===null&&(ye=He);break}t&&ye&&As.alternate===null&&r(U,ye),k=d(As,k,Pe),Qe===null?Ee=As:Qe.sibling=As,Qe=As,ye=He}if(Xe.done)return a(U,ye),Ke&&yi(U,Pe),Ee;if(ye===null){for(;!Xe.done;Pe++,Xe=B.next())Xe=re(U,Xe.value,ee),Xe!==null&&(k=d(Xe,k,Pe),Qe===null?Ee=Xe:Qe.sibling=Xe,Qe=Xe);return Ke&&yi(U,Pe),Ee}for(ye=l(ye);!Xe.done;Pe++,Xe=B.next())Xe=$(ye,U,Pe,Xe.value,ee),Xe!==null&&(t&&Xe.alternate!==null&&ye.delete(Xe.key===null?Pe:Xe.key),k=d(Xe,k,Pe),Qe===null?Ee=Xe:Qe.sibling=Xe,Qe=Xe);return t&&ye.forEach(function(mw){return r(U,mw)}),Ke&&yi(U,Pe),Ee}function lt(U,k,B,ee){if(typeof B=="object"&&B!==null&&B.type===L&&B.key===null&&(B=B.props.children),typeof B=="object"&&B!==null){switch(B.$$typeof){case M:e:{for(var Ee=B.key;k!==null;){if(k.key===Ee){if(Ee=B.type,Ee===L){if(k.tag===7){a(U,k.sibling),ee=f(k,B.props.children),ee.return=U,U=ee;break e}}else if(k.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===w&&ga(Ee)===k.type){a(U,k.sibling),ee=f(k,B.props),Rl(ee,B),ee.return=U,U=ee;break e}a(U,k);break}else r(U,k);k=k.sibling}B.type===L?(ee=ha(B.props.children,U.mode,ee,B.key),ee.return=U,U=ee):(ee=cc(B.type,B.key,B.props,null,U.mode,ee),Rl(ee,B),ee.return=U,U=ee)}return v(U);case Y:e:{for(Ee=B.key;k!==null;){if(k.key===Ee)if(k.tag===4&&k.stateNode.containerInfo===B.containerInfo&&k.stateNode.implementation===B.implementation){a(U,k.sibling),ee=f(k,B.children||[]),ee.return=U,U=ee;break e}else{a(U,k);break}else r(U,k);k=k.sibling}ee=Mf(B,U.mode,ee),ee.return=U,U=ee}return v(U);case w:return B=ga(B),lt(U,k,B,ee)}if(De(B))return ge(U,k,B,ee);if(P(B)){if(Ee=P(B),typeof Ee!="function")throw Error(s(150));return B=Ee.call(B),Ae(U,k,B,ee)}if(typeof B.then=="function")return lt(U,k,yc(B),ee);if(B.$$typeof===se)return lt(U,k,dc(U,B),ee);_c(U,B)}return typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint"?(B=""+B,k!==null&&k.tag===6?(a(U,k.sibling),ee=f(k,B),ee.return=U,U=ee):(a(U,k),ee=Of(B,U.mode,ee),ee.return=U,U=ee),v(U)):a(U,k)}return function(U,k,B,ee){try{wl=0;var Ee=lt(U,k,B,ee);return oo=null,Ee}catch(ye){if(ye===ao||ye===mc)throw ye;var Qe=Hn(29,ye,null,U.mode);return Qe.lanes=ee,Qe.return=U,Qe}}}var _a=Yg(!0),Qg=Yg(!1),as=!1;function Ff(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gf(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function os(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function ls(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Je&2)!==0){var f=l.pending;return f===null?r.next=r:(r.next=f.next,f.next=r),l.pending=r,r=uc(t),Mg(t,null,a),r}return lc(t,l,r,a),uc(t)}function Il(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ke(t,a)}}function $f(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var v={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=v:d=d.next=v,a=a.next}while(a!==null);d===null?f=d=r:d=d.next=r}else f=d=r;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Kf=!1;function Cl(){if(Kf){var t=so;if(t!==null)throw t}}function Dl(t,r,a,l){Kf=!1;var f=t.updateQueue;as=!1;var d=f.firstBaseUpdate,v=f.lastBaseUpdate,S=f.shared.pending;if(S!==null){f.shared.pending=null;var D=S,q=D.next;D.next=null,v===null?d=q:v.next=q,v=D;var J=t.alternate;J!==null&&(J=J.updateQueue,S=J.lastBaseUpdate,S!==v&&(S===null?J.firstBaseUpdate=q:S.next=q,J.lastBaseUpdate=D))}if(d!==null){var re=f.baseState;v=0,J=q=D=null,S=d;do{var F=S.lane&-536870913,$=F!==S.lane;if($?(qe&F)===F:(l&F)===F){F!==0&&F===io&&(Kf=!0),J!==null&&(J=J.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var ge=t,Ae=S;F=r;var lt=a;switch(Ae.tag){case 1:if(ge=Ae.payload,typeof ge=="function"){re=ge.call(lt,re,F);break e}re=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=Ae.payload,F=typeof ge=="function"?ge.call(lt,re,F):ge,F==null)break e;re=T({},re,F);break e;case 2:as=!0}}F=S.callback,F!==null&&(t.flags|=64,$&&(t.flags|=8192),$=f.callbacks,$===null?f.callbacks=[F]:$.push(F))}else $={lane:F,tag:S.tag,payload:S.payload,callback:S.callback,next:null},J===null?(q=J=$,D=re):J=J.next=$,v|=F;if(S=S.next,S===null){if(S=f.shared.pending,S===null)break;$=S,S=$.next,$.next=null,f.lastBaseUpdate=$,f.shared.pending=null}}while(!0);J===null&&(D=re),f.baseState=D,f.firstBaseUpdate=q,f.lastBaseUpdate=J,d===null&&(f.shared.lanes=0),ds|=v,t.lanes=v,t.memoizedState=re}}function Xg(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function Wg(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)Xg(a[t],r)}var lo=V(null),vc=V(0);function Jg(t,r){t=Ci,he(vc,t),he(lo,r),Ci=t|r.baseLanes}function Yf(){he(vc,Ci),he(lo,lo.current)}function Qf(){Ci=vc.current,te(lo),te(vc)}var Fn=V(null),dr=null;function us(t){var r=t.alternate;he(Pt,Pt.current&1),he(Fn,t),dr===null&&(r===null||lo.current!==null||r.memoizedState!==null)&&(dr=t)}function Xf(t){he(Pt,Pt.current),he(Fn,t),dr===null&&(dr=t)}function Zg(t){t.tag===22?(he(Pt,Pt.current),he(Fn,t),dr===null&&(dr=t)):cs()}function cs(){he(Pt,Pt.current),he(Fn,Fn.current)}function Gn(t){te(Fn),dr===t&&(dr=null),te(Pt)}var Pt=V(0);function Ec(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||np(a)||rp(a)))return r}else if(r.tag===19&&(r.memoizedProps.revealOrder==="forwards"||r.memoizedProps.revealOrder==="backwards"||r.memoizedProps.revealOrder==="unstable_legacy-backwards"||r.memoizedProps.revealOrder==="together")){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Ei=0,xe=null,at=null,Ht=null,Tc=!1,uo=!1,va=!1,Sc=0,Nl=0,co=null,sb=0;function Ct(){throw Error(s(321))}function Wf(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!qn(t[a],r[a]))return!1;return!0}function Jf(t,r,a,l,f,d){return Ei=d,xe=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,X.H=t===null||t.memoizedState===null?Py:dd,va=!1,d=a(l,f),va=!1,uo&&(d=ty(r,a,l,f)),ey(t),d}function ey(t){X.H=Vl;var r=at!==null&&at.next!==null;if(Ei=0,Ht=at=xe=null,Tc=!1,Nl=0,co=null,r)throw Error(s(300));t===null||Ft||(t=t.dependencies,t!==null&&fc(t)&&(Ft=!0))}function ty(t,r,a,l){xe=t;var f=0;do{if(uo&&(co=null),Nl=0,uo=!1,25<=f)throw Error(s(301));if(f+=1,Ht=at=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}X.H=Ly,d=r(a,l)}while(uo);return d}function ab(){var t=X.H,r=t.useState()[0];return r=typeof r.then=="function"?Ol(r):r,t=t.useState()[0],(at!==null?at.memoizedState:null)!==t&&(xe.flags|=1024),r}function Zf(){var t=Sc!==0;return Sc=0,t}function ed(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function td(t){if(Tc){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}Tc=!1}Ei=0,Ht=at=xe=null,uo=!1,Nl=Sc=0,co=null}function Rn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ht===null?xe.memoizedState=Ht=t:Ht=Ht.next=t,Ht}function Lt(){if(at===null){var t=xe.alternate;t=t!==null?t.memoizedState:null}else t=at.next;var r=Ht===null?xe.memoizedState:Ht.next;if(r!==null)Ht=r,at=t;else{if(t===null)throw xe.alternate===null?Error(s(467)):Error(s(310));at=t,t={memoizedState:at.memoizedState,baseState:at.baseState,baseQueue:at.baseQueue,queue:at.queue,next:null},Ht===null?xe.memoizedState=Ht=t:Ht=Ht.next=t}return Ht}function Ac(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(t){var r=Nl;return Nl+=1,co===null&&(co=[]),t=Gg(co,t,r),r=xe,(Ht===null?r.memoizedState:Ht.next)===null&&(r=r.alternate,X.H=r===null||r.memoizedState===null?Py:dd),t}function bc(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return Ol(t);if(t.$$typeof===se)return on(t)}throw Error(s(438,String(t)))}function nd(t){var r=null,a=xe.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=xe.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(f){return f.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ac(),xe.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=x;return r.index++,a}function Ti(t,r){return typeof r=="function"?r(t):r}function wc(t){var r=Lt();return rd(r,at,t)}function rd(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var f=t.baseQueue,d=l.pending;if(d!==null){if(f!==null){var v=f.next;f.next=d.next,d.next=v}r.baseQueue=f=d,l.pending=null}if(d=t.baseState,f===null)t.memoizedState=d;else{r=f.next;var S=v=null,D=null,q=r,J=!1;do{var re=q.lane&-536870913;if(re!==q.lane?(qe&re)===re:(Ei&re)===re){var F=q.revertLane;if(F===0)D!==null&&(D=D.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),re===io&&(J=!0);else if((Ei&F)===F){q=q.next,F===io&&(J=!0);continue}else re={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=re,v=d):D=D.next=re,xe.lanes|=F,ds|=F;re=q.action,va&&a(d,re),d=q.hasEagerState?q.eagerState:a(d,re)}else F={lane:re,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},D===null?(S=D=F,v=d):D=D.next=F,xe.lanes|=re,ds|=re;q=q.next}while(q!==null&&q!==r);if(D===null?v=d:D.next=S,!qn(d,t.memoizedState)&&(Ft=!0,J&&(a=so,a!==null)))throw a;t.memoizedState=d,t.baseState=v,t.baseQueue=D,l.lastRenderedState=d}return f===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function id(t){var r=Lt(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,f=a.pending,d=r.memoizedState;if(f!==null){a.pending=null;var v=f=f.next;do d=t(d,v.action),v=v.next;while(v!==f);qn(d,r.memoizedState)||(Ft=!0),r.memoizedState=d,r.baseQueue===null&&(r.baseState=d),a.lastRenderedState=d}return[d,l]}function ny(t,r,a){var l=xe,f=Lt(),d=Ke;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=r();var v=!qn((at||f).memoizedState,a);if(v&&(f.memoizedState=a,Ft=!0),f=f.queue,od(sy.bind(null,l,f,t),[t]),f.getSnapshot!==r||v||Ht!==null&&Ht.memoizedState.tag&1){if(l.flags|=2048,ho(9,{destroy:void 0},iy.bind(null,l,f,a,r),null),ut===null)throw Error(s(349));d||(Ei&127)!==0||ry(l,r,a)}return a}function ry(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=xe.updateQueue,r===null?(r=Ac(),xe.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function iy(t,r,a,l){r.value=a,r.getSnapshot=l,ay(r)&&oy(t)}function sy(t,r,a){return a(function(){ay(r)&&oy(t)})}function ay(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!qn(t,a)}catch{return!0}}function oy(t){var r=ca(t,2);r!==null&&xn(r,t,2)}function sd(t){var r=Rn();if(typeof t=="function"){var a=t;if(t=a(),va){In(!0);try{a()}finally{In(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},r}function ly(t,r,a,l){return t.baseState=a,rd(t,at,typeof l=="function"?l:Ti)}function ob(t,r,a,l,f){if(Cc(t))throw Error(s(485));if(t=r.action,t!==null){var d={payload:f,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(v){d.listeners.push(v)}};X.T!==null?a(!0):d.isTransition=!1,l(d),a=r.pending,a===null?(d.next=r.pending=d,uy(r,d)):(d.next=a.next,r.pending=a.next=d)}}function uy(t,r){var a=r.action,l=r.payload,f=t.state;if(r.isTransition){var d=X.T,v={};X.T=v;try{var S=a(f,l),D=X.S;D!==null&&D(v,S),cy(t,r,S)}catch(q){ad(t,r,q)}finally{d!==null&&v.types!==null&&(d.types=v.types),X.T=d}}else try{d=a(f,l),cy(t,r,d)}catch(q){ad(t,r,q)}}function cy(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){hy(t,r,l)},function(l){return ad(t,r,l)}):hy(t,r,a)}function hy(t,r,a){r.status="fulfilled",r.value=a,fy(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,uy(t,a)))}function ad(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,fy(r),r=r.next;while(r!==l)}t.action=null}function fy(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function dy(t,r){return r}function py(t,r){if(Ke){var a=ut.formState;if(a!==null){e:{var l=xe;if(Ke){if(pt){t:{for(var f=pt,d=fr;f.nodeType!==8;){if(!d){f=null;break t}if(f=pr(f.nextSibling),f===null){f=null;break t}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){pt=pr(f.nextSibling),l=f.data==="F!";break e}}is(l)}l=!1}l&&(r=a[0])}}return a=Rn(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:dy,lastRenderedState:r},a.queue=l,a=Vy.bind(null,xe,l),l.dispatch=a,l=sd(!1),d=fd.bind(null,xe,!1,l.queue),l=Rn(),f={state:r,dispatch:null,action:t,pending:null},l.queue=f,a=ob.bind(null,xe,f,d,a),f.dispatch=a,l.memoizedState=t,[r,a,!1]}function my(t){var r=Lt();return gy(r,at,t)}function gy(t,r,a){if(r=rd(t,r,dy)[0],t=wc(Ti)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=Ol(r)}catch(v){throw v===ao?mc:v}else l=r;r=Lt();var f=r.queue,d=f.dispatch;return a!==r.memoizedState&&(xe.flags|=2048,ho(9,{destroy:void 0},lb.bind(null,f,a),null)),[l,d,t]}function lb(t,r){t.action=r}function yy(t){var r=Lt(),a=at;if(a!==null)return gy(r,a,t);Lt(),r=r.memoizedState,a=Lt();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function ho(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=xe.updateQueue,r===null&&(r=Ac(),xe.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function _y(){return Lt().memoizedState}function Rc(t,r,a,l){var f=Rn();xe.flags|=t,f.memoizedState=ho(1|r,{destroy:void 0},a,l===void 0?null:l)}function Ic(t,r,a,l){var f=Lt();l=l===void 0?null:l;var d=f.memoizedState.inst;at!==null&&l!==null&&Wf(l,at.memoizedState.deps)?f.memoizedState=ho(r,d,a,l):(xe.flags|=t,f.memoizedState=ho(1|r,d,a,l))}function vy(t,r){Rc(8390656,8,t,r)}function od(t,r){Ic(2048,8,t,r)}function ub(t){xe.flags|=4;var r=xe.updateQueue;if(r===null)r=Ac(),xe.updateQueue=r,r.events=[t];else{var a=r.events;a===null?r.events=[t]:a.push(t)}}function Ey(t){var r=Lt().memoizedState;return ub({ref:r,nextImpl:t}),function(){if((Je&2)!==0)throw Error(s(440));return r.impl.apply(void 0,arguments)}}function Ty(t,r){return Ic(4,2,t,r)}function Sy(t,r){return Ic(4,4,t,r)}function Ay(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function by(t,r,a){a=a!=null?a.concat([t]):null,Ic(4,4,Ay.bind(null,r,t),a)}function ld(){}function wy(t,r){var a=Lt();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&Wf(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Ry(t,r){var a=Lt();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&Wf(r,l[1]))return l[0];if(l=t(),va){In(!0);try{t()}finally{In(!1)}}return a.memoizedState=[l,r],l}function ud(t,r,a){return a===void 0||(Ei&1073741824)!==0&&(qe&261930)===0?t.memoizedState=r:(t.memoizedState=a,t=I_(),xe.lanes|=t,ds|=t,a)}function Iy(t,r,a,l){return qn(a,r)?a:lo.current!==null?(t=ud(t,a,l),qn(t,r)||(Ft=!0),t):(Ei&42)===0||(Ei&1073741824)!==0&&(qe&261930)===0?(Ft=!0,t.memoizedState=a):(t=I_(),xe.lanes|=t,ds|=t,r)}function Cy(t,r,a,l,f){var d=oe.p;oe.p=d!==0&&8>d?d:8;var v=X.T,S={};X.T=S,fd(t,!1,r,a);try{var D=f(),q=X.S;if(q!==null&&q(S,D),D!==null&&typeof D=="object"&&typeof D.then=="function"){var J=ib(D,l);Ml(t,r,J,Yn(t))}else Ml(t,r,l,Yn(t))}catch(re){Ml(t,r,{then:function(){},status:"rejected",reason:re},Yn())}finally{oe.p=d,v!==null&&S.types!==null&&(v.types=S.types),X.T=v}}function cb(){}function cd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var f=Dy(t).queue;Cy(t,f,r,ve,a===null?cb:function(){return Ny(t),a(l)})}function Dy(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:ve,baseState:ve,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:ve},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Ny(t){var r=Dy(t);r.next===null&&(r=t.alternate.memoizedState),Ml(t,r.next.queue,{},Yn())}function hd(){return on(Ql)}function Oy(){return Lt().memoizedState}function My(){return Lt().memoizedState}function hb(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=Yn();t=os(a);var l=ls(r,t,a);l!==null&&(xn(l,r,a),Il(l,r,a)),r={cache:Bf()},t.payload=r;return}r=r.return}}function fb(t,r,a){var l=Yn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Cc(t)?xy(r,a):(a=Df(t,r,a,l),a!==null&&(xn(a,t,l),ky(a,r,l)))}function Vy(t,r,a){var l=Yn();Ml(t,r,a,l)}function Ml(t,r,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Cc(t))xy(r,f);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=r.lastRenderedReducer,d!==null))try{var v=r.lastRenderedState,S=d(v,a);if(f.hasEagerState=!0,f.eagerState=S,qn(S,v))return lc(t,r,f,0),ut===null&&oc(),!1}catch{}if(a=Df(t,r,f,l),a!==null)return xn(a,t,l),ky(a,r,l),!0}return!1}function fd(t,r,a,l){if(l={lane:2,revertLane:Fd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Cc(t)){if(r)throw Error(s(479))}else r=Df(t,a,l,2),r!==null&&xn(r,t,2)}function Cc(t){var r=t.alternate;return t===xe||r!==null&&r===xe}function xy(t,r){uo=Tc=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function ky(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,ke(t,a)}}var Vl={readContext:on,use:bc,useCallback:Ct,useContext:Ct,useEffect:Ct,useImperativeHandle:Ct,useLayoutEffect:Ct,useInsertionEffect:Ct,useMemo:Ct,useReducer:Ct,useRef:Ct,useState:Ct,useDebugValue:Ct,useDeferredValue:Ct,useTransition:Ct,useSyncExternalStore:Ct,useId:Ct,useHostTransitionStatus:Ct,useFormState:Ct,useActionState:Ct,useOptimistic:Ct,useMemoCache:Ct,useCacheRefresh:Ct};Vl.useEffectEvent=Ct;var Py={readContext:on,use:bc,useCallback:function(t,r){return Rn().memoizedState=[t,r===void 0?null:r],t},useContext:on,useEffect:vy,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,Rc(4194308,4,Ay.bind(null,r,t),a)},useLayoutEffect:function(t,r){return Rc(4194308,4,t,r)},useInsertionEffect:function(t,r){Rc(4,2,t,r)},useMemo:function(t,r){var a=Rn();r=r===void 0?null:r;var l=t();if(va){In(!0);try{t()}finally{In(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Rn();if(a!==void 0){var f=a(r);if(va){In(!0);try{a(r)}finally{In(!1)}}}else f=r;return l.memoizedState=l.baseState=f,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:f},l.queue=t,t=t.dispatch=fb.bind(null,xe,t),[l.memoizedState,t]},useRef:function(t){var r=Rn();return t={current:t},r.memoizedState=t},useState:function(t){t=sd(t);var r=t.queue,a=Vy.bind(null,xe,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:ld,useDeferredValue:function(t,r){var a=Rn();return ud(a,t,r)},useTransition:function(){var t=sd(!1);return t=Cy.bind(null,xe,t.queue,!0,!1),Rn().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=xe,f=Rn();if(Ke){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),ut===null)throw Error(s(349));(qe&127)!==0||ry(l,r,a)}f.memoizedState=a;var d={value:a,getSnapshot:r};return f.queue=d,vy(sy.bind(null,l,d,t),[t]),l.flags|=2048,ho(9,{destroy:void 0},iy.bind(null,l,d,a,r),null),a},useId:function(){var t=Rn(),r=ut.identifierPrefix;if(Ke){var a=Jr,l=Wr;a=(l&~(1<<32-St(l)-1)).toString(32)+a,r="_"+r+"R_"+a,a=Sc++,0<a&&(r+="H"+a.toString(32)),r+="_"}else a=sb++,r="_"+r+"r_"+a.toString(32)+"_";return t.memoizedState=r},useHostTransitionStatus:hd,useFormState:py,useActionState:py,useOptimistic:function(t){var r=Rn();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=fd.bind(null,xe,!0,a),a.dispatch=r,[t,r]},useMemoCache:nd,useCacheRefresh:function(){return Rn().memoizedState=hb.bind(null,xe)},useEffectEvent:function(t){var r=Rn(),a={impl:t};return r.memoizedState=a,function(){if((Je&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},dd={readContext:on,use:bc,useCallback:wy,useContext:on,useEffect:od,useImperativeHandle:by,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Ry,useReducer:wc,useRef:_y,useState:function(){return wc(Ti)},useDebugValue:ld,useDeferredValue:function(t,r){var a=Lt();return Iy(a,at.memoizedState,t,r)},useTransition:function(){var t=wc(Ti)[0],r=Lt().memoizedState;return[typeof t=="boolean"?t:Ol(t),r]},useSyncExternalStore:ny,useId:Oy,useHostTransitionStatus:hd,useFormState:my,useActionState:my,useOptimistic:function(t,r){var a=Lt();return ly(a,at,t,r)},useMemoCache:nd,useCacheRefresh:My};dd.useEffectEvent=Ey;var Ly={readContext:on,use:bc,useCallback:wy,useContext:on,useEffect:od,useImperativeHandle:by,useInsertionEffect:Ty,useLayoutEffect:Sy,useMemo:Ry,useReducer:id,useRef:_y,useState:function(){return id(Ti)},useDebugValue:ld,useDeferredValue:function(t,r){var a=Lt();return at===null?ud(a,t,r):Iy(a,at.memoizedState,t,r)},useTransition:function(){var t=id(Ti)[0],r=Lt().memoizedState;return[typeof t=="boolean"?t:Ol(t),r]},useSyncExternalStore:ny,useId:Oy,useHostTransitionStatus:hd,useFormState:yy,useActionState:yy,useOptimistic:function(t,r){var a=Lt();return at!==null?ly(a,at,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:nd,useCacheRefresh:My};Ly.useEffectEvent=Ey;function pd(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:T({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var md={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=Yn(),f=os(l);f.payload=r,a!=null&&(f.callback=a),r=ls(t,f,l),r!==null&&(xn(r,t,l),Il(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=Yn(),f=os(l);f.tag=1,f.payload=r,a!=null&&(f.callback=a),r=ls(t,f,l),r!==null&&(xn(r,t,l),Il(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=Yn(),l=os(a);l.tag=2,r!=null&&(l.callback=r),r=ls(t,l,a),r!==null&&(xn(r,t,a),Il(r,t,a))}};function Uy(t,r,a,l,f,d,v){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,v):r.prototype&&r.prototype.isPureReactComponent?!vl(a,l)||!vl(f,d):!0}function zy(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&md.enqueueReplaceState(r,r.state,null)}function Ea(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=T({},a));for(var f in t)a[f]===void 0&&(a[f]=t[f])}return a}function By(t){ac(t)}function jy(t){console.error(t)}function qy(t){ac(t)}function Dc(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function Hy(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function gd(t,r,a){return a=os(a),a.tag=3,a.payload={element:null},a.callback=function(){Dc(t,r)},a}function Fy(t){return t=os(t),t.tag=3,t}function Gy(t,r,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;t.payload=function(){return f(d)},t.callback=function(){Hy(r,a,l)}}var v=a.stateNode;v!==null&&typeof v.componentDidCatch=="function"&&(t.callback=function(){Hy(r,a,l),typeof f!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var S=l.stack;this.componentDidCatch(l.value,{componentStack:S!==null?S:""})})}function db(t,r,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ro(r,a,f,!0),a=Fn.current,a!==null){switch(a.tag){case 31:case 13:return dr===null?jc():a.alternate===null&&Dt===0&&(Dt=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===gc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),jd(t,l,f)),!1;case 22:return a.flags|=65536,l===gc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),jd(t,l,f)),!1}throw Error(s(435,a.tag))}return jd(t,l,f),jc(),!1}if(Ke)return r=Fn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=f,l!==kf&&(t=Error(s(422),{cause:l}),Sl(ur(t,a)))):(l!==kf&&(r=Error(s(423),{cause:l}),Sl(ur(r,a))),t=t.current.alternate,t.flags|=65536,f&=-f,t.lanes|=f,l=ur(l,a),f=gd(t.stateNode,l,f),$f(t,f),Dt!==4&&(Dt=2)),!1;var d=Error(s(520),{cause:l});if(d=ur(d,a),jl===null?jl=[d]:jl.push(d),Dt!==4&&(Dt=2),r===null)return!0;l=ur(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=f&-f,a.lanes|=t,t=gd(a.stateNode,l,t),$f(a,t),!1;case 1:if(r=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(ps===null||!ps.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Fy(f),Gy(f,t,a,l),$f(a,f),!1}a=a.return}while(a!==null);return!1}var yd=Error(s(461)),Ft=!1;function ln(t,r,a,l){r.child=t===null?Qg(r,null,a,l):_a(r,t.child,a,l)}function $y(t,r,a,l,f){a=a.render;var d=r.ref;if("ref"in l){var v={};for(var S in l)S!=="ref"&&(v[S]=l[S])}else v=l;return pa(r),l=Jf(t,r,a,v,d,f),S=Zf(),t!==null&&!Ft?(ed(t,r,f),Si(t,r,f)):(Ke&&S&&Vf(r),r.flags|=1,ln(t,r,l,f),r.child)}function Ky(t,r,a,l,f){if(t===null){var d=a.type;return typeof d=="function"&&!Nf(d)&&d.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=d,Yy(t,r,d,l,f)):(t=cc(a.type,null,l,r,r.mode,f),t.ref=r.ref,t.return=r,r.child=t)}if(d=t.child,!wd(t,f)){var v=d.memoizedProps;if(a=a.compare,a=a!==null?a:vl,a(v,l)&&t.ref===r.ref)return Si(t,r,f)}return r.flags|=1,t=gi(d,l),t.ref=r.ref,t.return=r,r.child=t}function Yy(t,r,a,l,f){if(t!==null){var d=t.memoizedProps;if(vl(d,l)&&t.ref===r.ref)if(Ft=!1,r.pendingProps=l=d,wd(t,f))(t.flags&131072)!==0&&(Ft=!0);else return r.lanes=t.lanes,Si(t,r,f)}return _d(t,r,a,l,f)}function Qy(t,r,a,l){var f=l.children,d=t!==null?t.memoizedState:null;if(t===null&&r.stateNode===null&&(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((r.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=r.child=t.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,r.child=null;return Xy(t,r,d,a,l)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&pc(r,d!==null?d.cachePool:null),d!==null?Jg(r,d):Yf(),Zg(r);else return l=r.lanes=536870912,Xy(t,r,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(pc(r,d.cachePool),Jg(r,d),cs(),r.memoizedState=null):(t!==null&&pc(r,null),Yf(),cs());return ln(t,r,f,a),r.child}function xl(t,r){return t!==null&&t.tag===22||r.stateNode!==null||(r.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),r.sibling}function Xy(t,r,a,l,f){var d=qf();return d=d===null?null:{parent:qt._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},t!==null&&pc(r,null),Yf(),Zg(r),t!==null&&ro(t,r,l,!0),r.childLanes=f,null}function Nc(t,r){return r=Mc({mode:r.mode,children:r.children},t.mode),r.ref=t.ref,t.child=r,r.return=t,r}function Wy(t,r,a){return _a(r,t.child,null,a),t=Nc(r,r.pendingProps),t.flags|=2,Gn(r),r.memoizedState=null,t}function pb(t,r,a){var l=r.pendingProps,f=(r.flags&128)!==0;if(r.flags&=-129,t===null){if(Ke){if(l.mode==="hidden")return t=Nc(r,l),r.lanes=536870912,xl(null,t);if(Xf(r),(t=pt)?(t=uv(t,fr),t=t!==null&&t.data==="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ns!==null?{id:Wr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},a=xg(t),a.return=r,r.child=a,an=r,pt=null)):t=null,t===null)throw is(r);return r.lanes=536870912,null}return Nc(r,l)}var d=t.memoizedState;if(d!==null){var v=d.dehydrated;if(Xf(r),f)if(r.flags&256)r.flags&=-257,r=Wy(t,r,a);else if(r.memoizedState!==null)r.child=t.child,r.flags|=128,r=null;else throw Error(s(558));else if(Ft||ro(t,r,a,!1),f=(a&t.childLanes)!==0,Ft||f){if(l=ut,l!==null&&(v=et(l,a),v!==0&&v!==d.retryLane))throw d.retryLane=v,ca(t,v),xn(l,t,v),yd;jc(),r=Wy(t,r,a)}else t=d.treeContext,pt=pr(v.nextSibling),an=r,Ke=!0,rs=null,fr=!1,t!==null&&Lg(r,t),r=Nc(r,l),r.flags|=4096;return r}return t=gi(t.child,{mode:l.mode,children:l.children}),t.ref=r.ref,r.child=t,t.return=r,t}function Oc(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function _d(t,r,a,l,f){return pa(r),a=Jf(t,r,a,l,void 0,f),l=Zf(),t!==null&&!Ft?(ed(t,r,f),Si(t,r,f)):(Ke&&l&&Vf(r),r.flags|=1,ln(t,r,a,f),r.child)}function Jy(t,r,a,l,f,d){return pa(r),r.updateQueue=null,a=ty(r,l,a,f),ey(t),l=Zf(),t!==null&&!Ft?(ed(t,r,d),Si(t,r,d)):(Ke&&l&&Vf(r),r.flags|=1,ln(t,r,a,d),r.child)}function Zy(t,r,a,l,f){if(pa(r),r.stateNode===null){var d=Za,v=a.contextType;typeof v=="object"&&v!==null&&(d=on(v)),d=new a(l,d),r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=md,r.stateNode=d,d._reactInternals=r,d=r.stateNode,d.props=l,d.state=r.memoizedState,d.refs={},Ff(r),v=a.contextType,d.context=typeof v=="object"&&v!==null?on(v):Za,d.state=r.memoizedState,v=a.getDerivedStateFromProps,typeof v=="function"&&(pd(r,a,v,l),d.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(v=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),v!==d.state&&md.enqueueReplaceState(d,d.state,null),Dl(r,l,d,f),Cl(),d.state=r.memoizedState),typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){d=r.stateNode;var S=r.memoizedProps,D=Ea(a,S);d.props=D;var q=d.context,J=a.contextType;v=Za,typeof J=="object"&&J!==null&&(v=on(J));var re=a.getDerivedStateFromProps;J=typeof re=="function"||typeof d.getSnapshotBeforeUpdate=="function",S=r.pendingProps!==S,J||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(S||q!==v)&&zy(r,d,l,v),as=!1;var F=r.memoizedState;d.state=F,Dl(r,l,d,f),Cl(),q=r.memoizedState,S||F!==q||as?(typeof re=="function"&&(pd(r,a,re,l),q=r.memoizedState),(D=as||Uy(r,a,D,l,F,q,v))?(J||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(r.flags|=4194308)):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=q),d.props=l,d.state=q,d.context=v,l=D):(typeof d.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{d=r.stateNode,Gf(t,r),v=r.memoizedProps,J=Ea(a,v),d.props=J,re=r.pendingProps,F=d.context,q=a.contextType,D=Za,typeof q=="object"&&q!==null&&(D=on(q)),S=a.getDerivedStateFromProps,(q=typeof S=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(v!==re||F!==D)&&zy(r,d,l,D),as=!1,F=r.memoizedState,d.state=F,Dl(r,l,d,f),Cl();var $=r.memoizedState;v!==re||F!==$||as||t!==null&&t.dependencies!==null&&fc(t.dependencies)?(typeof S=="function"&&(pd(r,a,S,l),$=r.memoizedState),(J=as||Uy(r,a,J,l,F,$,D)||t!==null&&t.dependencies!==null&&fc(t.dependencies))?(q||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,$,D),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,$,D)),typeof d.componentDidUpdate=="function"&&(r.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=$),d.props=l,d.state=$,d.context=D,l=J):(typeof d.componentDidUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(r.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||v===t.memoizedProps&&F===t.memoizedState||(r.flags|=1024),l=!1)}return d=l,Oc(t,r),l=(r.flags&128)!==0,d||l?(d=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),r.flags|=1,t!==null&&l?(r.child=_a(r,t.child,null,f),r.child=_a(r,null,a,f)):ln(t,r,a,f),r.memoizedState=d.state,t=r.child):t=Si(t,r,f),t}function e_(t,r,a,l){return fa(),r.flags|=256,ln(t,r,a,l),r.child}var vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ed(t){return{baseLanes:t,cachePool:Hg()}}function Td(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Kn),t}function t_(t,r,a){var l=r.pendingProps,f=!1,d=(r.flags&128)!==0,v;if((v=d)||(v=t!==null&&t.memoizedState===null?!1:(Pt.current&2)!==0),v&&(f=!0,r.flags&=-129),v=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ke){if(f?us(r):cs(),(t=pt)?(t=uv(t,fr),t=t!==null&&t.data!=="&"?t:null,t!==null&&(r.memoizedState={dehydrated:t,treeContext:ns!==null?{id:Wr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},a=xg(t),a.return=r,r.child=a,an=r,pt=null)):t=null,t===null)throw is(r);return rp(t)?r.lanes=32:r.lanes=536870912,null}var S=l.children;return l=l.fallback,f?(cs(),f=r.mode,S=Mc({mode:"hidden",children:S},f),l=ha(l,f,a,null),S.return=r,l.return=r,S.sibling=l,r.child=S,l=r.child,l.memoizedState=Ed(a),l.childLanes=Td(t,v,a),r.memoizedState=vd,xl(null,l)):(us(r),Sd(r,S))}var D=t.memoizedState;if(D!==null&&(S=D.dehydrated,S!==null)){if(d)r.flags&256?(us(r),r.flags&=-257,r=Ad(t,r,a)):r.memoizedState!==null?(cs(),r.child=t.child,r.flags|=128,r=null):(cs(),S=l.fallback,f=r.mode,l=Mc({mode:"visible",children:l.children},f),S=ha(S,f,a,null),S.flags|=2,l.return=r,S.return=r,l.sibling=S,r.child=l,_a(r,t.child,null,a),l=r.child,l.memoizedState=Ed(a),l.childLanes=Td(t,v,a),r.memoizedState=vd,r=xl(null,l));else if(us(r),rp(S)){if(v=S.nextSibling&&S.nextSibling.dataset,v)var q=v.dgst;v=q,l=Error(s(419)),l.stack="",l.digest=v,Sl({value:l,source:null,stack:null}),r=Ad(t,r,a)}else if(Ft||ro(t,r,a,!1),v=(a&t.childLanes)!==0,Ft||v){if(v=ut,v!==null&&(l=et(v,a),l!==0&&l!==D.retryLane))throw D.retryLane=l,ca(t,l),xn(v,t,l),yd;np(S)||jc(),r=Ad(t,r,a)}else np(S)?(r.flags|=192,r.child=t.child,r=null):(t=D.treeContext,pt=pr(S.nextSibling),an=r,Ke=!0,rs=null,fr=!1,t!==null&&Lg(r,t),r=Sd(r,l.children),r.flags|=4096);return r}return f?(cs(),S=l.fallback,f=r.mode,D=t.child,q=D.sibling,l=gi(D,{mode:"hidden",children:l.children}),l.subtreeFlags=D.subtreeFlags&65011712,q!==null?S=gi(q,S):(S=ha(S,f,a,null),S.flags|=2),S.return=r,l.return=r,l.sibling=S,r.child=l,xl(null,l),l=r.child,S=t.child.memoizedState,S===null?S=Ed(a):(f=S.cachePool,f!==null?(D=qt._currentValue,f=f.parent!==D?{parent:D,pool:D}:f):f=Hg(),S={baseLanes:S.baseLanes|a,cachePool:f}),l.memoizedState=S,l.childLanes=Td(t,v,a),r.memoizedState=vd,xl(t.child,l)):(us(r),a=t.child,t=a.sibling,a=gi(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(v=r.deletions,v===null?(r.deletions=[t],r.flags|=16):v.push(t)),r.child=a,r.memoizedState=null,a)}function Sd(t,r){return r=Mc({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function Mc(t,r){return t=Hn(22,t,null,r),t.lanes=0,t}function Ad(t,r,a){return _a(r,t.child,null,a),t=Sd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function n_(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),Uf(t.return,r,a)}function bd(t,r,a,l,f,d){var v=t.memoizedState;v===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(v.isBackwards=r,v.rendering=null,v.renderingStartTime=0,v.last=l,v.tail=a,v.tailMode=f,v.treeForkCount=d)}function r_(t,r,a){var l=r.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var v=Pt.current,S=(v&2)!==0;if(S?(v=v&1|2,r.flags|=128):v&=1,he(Pt,v),ln(t,r,l,a),l=Ke?Tl:0,!S&&t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&n_(t,a,r);else if(t.tag===19)n_(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(f){case"forwards":for(a=r.child,f=null;a!==null;)t=a.alternate,t!==null&&Ec(t)===null&&(f=a),a=a.sibling;a=f,a===null?(f=r.child,r.child=null):(f=a.sibling,a.sibling=null),bd(r,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=r.child,r.child=null;f!==null;){if(t=f.alternate,t!==null&&Ec(t)===null){r.child=f;break}t=f.sibling,f.sibling=a,a=f,f=t}bd(r,!0,a,null,d,l);break;case"together":bd(r,!1,null,null,void 0,l);break;default:r.memoizedState=null}return r.child}function Si(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ds|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ro(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=gi(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=gi(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function wd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&fc(t)))}function mb(t,r,a){switch(r.tag){case 3:Et(r,r.stateNode.containerInfo),ss(r,qt,t.memoizedState.cache),fa();break;case 27:case 5:li(r);break;case 4:Et(r,r.stateNode.containerInfo);break;case 10:ss(r,r.type,r.memoizedProps.value);break;case 31:if(r.memoizedState!==null)return r.flags|=128,Xf(r),null;break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(us(r),r.flags|=128,null):(a&r.child.childLanes)!==0?t_(t,r,a):(us(r),t=Si(t,r,a),t!==null?t.sibling:null);us(r);break;case 19:var f=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ro(t,r,a,!1),l=(a&r.childLanes)!==0),f){if(l)return r_(t,r,a);r.flags|=128}if(f=r.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),he(Pt,Pt.current),l)break;return null;case 22:return r.lanes=0,Qy(t,r,a,r.pendingProps);case 24:ss(r,qt,t.memoizedState.cache)}return Si(t,r,a)}function i_(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Ft=!0;else{if(!wd(t,a)&&(r.flags&128)===0)return Ft=!1,mb(t,r,a);Ft=(t.flags&131072)!==0}else Ft=!1,Ke&&(r.flags&1048576)!==0&&Pg(r,Tl,r.index);switch(r.lanes=0,r.tag){case 16:e:{var l=r.pendingProps;if(t=ga(r.elementType),r.type=t,typeof t=="function")Nf(t)?(l=Ea(t,l),r.tag=1,r=Zy(null,r,t,l,a)):(r.tag=0,r=_d(null,r,t,l,a));else{if(t!=null){var f=t.$$typeof;if(f===_e){r.tag=11,r=$y(null,r,t,l,a);break e}else if(f===I){r.tag=14,r=Ky(null,r,t,l,a);break e}}throw r=Le(t)||t,Error(s(306,r,""))}}return r;case 0:return _d(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,f=Ea(l,r.pendingProps),Zy(t,r,l,f,a);case 3:e:{if(Et(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var d=r.memoizedState;f=d.element,Gf(t,r),Dl(r,l,null,a);var v=r.memoizedState;if(l=v.cache,ss(r,qt,l),l!==d.cache&&zf(r,[qt],a,!0),Cl(),l=v.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:v.cache},r.updateQueue.baseState=d,r.memoizedState=d,r.flags&256){r=e_(t,r,l,a);break e}else if(l!==f){f=ur(Error(s(424)),r),Sl(f),r=e_(t,r,l,a);break e}else for(t=r.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,pt=pr(t.firstChild),an=r,Ke=!0,rs=null,fr=!0,a=Qg(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(fa(),l===f){r=Si(t,r,a);break e}ln(t,r,l,a)}r=r.child}return r;case 26:return Oc(t,r),t===null?(a=mv(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ke||(a=r.type,t=r.pendingProps,l=Yc(Re.current).createElement(a),l[ft]=r,l[It]=t,un(l,a,t),xt(l),r.stateNode=l):r.memoizedState=mv(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return li(r),t===null&&Ke&&(l=r.stateNode=fv(r.type,r.pendingProps,Re.current),an=r,fr=!0,f=pt,_s(r.type)?(ip=f,pt=pr(l.firstChild)):pt=f),ln(t,r,r.pendingProps.children,a),Oc(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ke&&((f=l=pt)&&(l=Gb(l,r.type,r.pendingProps,fr),l!==null?(r.stateNode=l,an=r,pt=pr(l.firstChild),fr=!1,f=!0):f=!1),f||is(r)),li(r),f=r.type,d=r.pendingProps,v=t!==null?t.memoizedProps:null,l=d.children,Zd(f,d)?l=null:v!==null&&Zd(f,v)&&(r.flags|=32),r.memoizedState!==null&&(f=Jf(t,r,ab,null,null,a),Ql._currentValue=f),Oc(t,r),ln(t,r,l,a),r.child;case 6:return t===null&&Ke&&((t=a=pt)&&(a=$b(a,r.pendingProps,fr),a!==null?(r.stateNode=a,an=r,pt=null,t=!0):t=!1),t||is(r)),null;case 13:return t_(t,r,a);case 4:return Et(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=_a(r,null,l,a):ln(t,r,l,a),r.child;case 11:return $y(t,r,r.type,r.pendingProps,a);case 7:return ln(t,r,r.pendingProps,a),r.child;case 8:return ln(t,r,r.pendingProps.children,a),r.child;case 12:return ln(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,ss(r,r.type,l.value),ln(t,r,l.children,a),r.child;case 9:return f=r.type._context,l=r.pendingProps.children,pa(r),f=on(f),l=l(f),r.flags|=1,ln(t,r,l,a),r.child;case 14:return Ky(t,r,r.type,r.pendingProps,a);case 15:return Yy(t,r,r.type,r.pendingProps,a);case 19:return r_(t,r,a);case 31:return pb(t,r,a);case 22:return Qy(t,r,a,r.pendingProps);case 24:return pa(r),l=on(qt),t===null?(f=qf(),f===null&&(f=ut,d=Bf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),r.memoizedState={parent:l,cache:f},Ff(r),ss(r,qt,f)):((t.lanes&a)!==0&&(Gf(t,r),Dl(r,null,null,a),Cl()),f=t.memoizedState,d=r.memoizedState,f.parent!==l?(f={parent:l,cache:l},r.memoizedState=f,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=f),ss(r,qt,l)):(l=d.cache,ss(r,qt,l),l!==f.cache&&zf(r,[qt],a,!0))),ln(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function Ai(t){t.flags|=4}function Rd(t,r,a,l,f){if((r=(t.mode&32)!==0)&&(r=!1),r){if(t.flags|=16777216,(f&335544128)===f)if(t.stateNode.complete)t.flags|=8192;else if(O_())t.flags|=8192;else throw ya=gc,Hf}else t.flags&=-16777217}function s_(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ev(r))if(O_())t.flags|=8192;else throw ya=gc,Hf}function Vc(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Js():536870912,t.lanes|=r,go|=r)}function kl(t,r){if(!Ke)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function mt(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=t,f=f.sibling;else for(f=t.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=t,f=f.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function gb(t,r,a){var l=r.pendingProps;switch(xf(r),r.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return mt(r),null;case 1:return mt(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),vi(qt),it(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(no(r)?Ai(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Pf())),mt(r),null;case 26:var f=r.type,d=r.memoizedState;return t===null?(Ai(r),d!==null?(mt(r),s_(r,d)):(mt(r),Rd(r,f,null,l,a))):d?d!==t.memoizedState?(Ai(r),mt(r),s_(r,d)):(mt(r),r.flags&=-16777217):(t=t.memoizedProps,t!==l&&Ai(r),mt(r),Rd(r,f,t,l,a)),null;case 27:if(Hi(r),a=Re.current,f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ai(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return mt(r),null}t=fe.current,no(r)?Ug(r):(t=fv(f,l,a),r.stateNode=t,Ai(r))}return mt(r),null;case 5:if(Hi(r),f=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&Ai(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return mt(r),null}if(d=fe.current,no(r))Ug(r);else{var v=Yc(Re.current);switch(d){case 1:d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=v.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?v.createElement("select",{is:l.is}):v.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?v.createElement(f,{is:l.is}):v.createElement(f)}}d[ft]=r,d[It]=l;e:for(v=r.child;v!==null;){if(v.tag===5||v.tag===6)d.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===r)break e;for(;v.sibling===null;){if(v.return===null||v.return===r)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}r.stateNode=d;e:switch(un(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&Ai(r)}}return mt(r),Rd(r,r.type,t===null?null:t.memoizedProps,r.pendingProps,a),null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&Ai(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=Re.current,no(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,f=an,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}t[ft]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||tv(t.nodeValue,a)),t||is(r,!0)}else t=Yc(t).createTextNode(l),t[ft]=r,r.stateNode=t}return mt(r),null;case 31:if(a=r.memoizedState,t===null||t.memoizedState!==null){if(l=no(r),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[ft]=r}else fa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),t=!1}else a=Pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return r.flags&256?(Gn(r),r):(Gn(r),null);if((r.flags&128)!==0)throw Error(s(558))}return mt(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(f=no(r),l!==null&&l.dehydrated!==null){if(t===null){if(!f)throw Error(s(318));if(f=r.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[ft]=r}else fa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;mt(r),f=!1}else f=Pf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=f),f=!0;if(!f)return r.flags&256?(Gn(r),r):(Gn(r),null)}return Gn(r),(r.flags&128)!==0?(r.lanes=a,r):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=r.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==t&&a&&(r.child.flags|=8192),Vc(r,r.updateQueue),mt(r),null);case 4:return it(),t===null&&Yd(r.stateNode.containerInfo),mt(r),null;case 10:return vi(r.type),mt(r),null;case 19:if(te(Pt),l=r.memoizedState,l===null)return mt(r),null;if(f=(r.flags&128)!==0,d=l.rendering,d===null)if(f)kl(l,!1);else{if(Dt!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(d=Ec(t),d!==null){for(r.flags|=128,kl(l,!1),t=d.updateQueue,r.updateQueue=t,Vc(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Vg(a,t),a=a.sibling;return he(Pt,Pt.current&1|2),Ke&&yi(r,l.treeForkCount),r.child}t=t.sibling}l.tail!==null&&Rt()>Uc&&(r.flags|=128,f=!0,kl(l,!1),r.lanes=4194304)}else{if(!f)if(t=Ec(d),t!==null){if(r.flags|=128,f=!0,t=t.updateQueue,r.updateQueue=t,Vc(r,t),kl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ke)return mt(r),null}else 2*Rt()-l.renderingStartTime>Uc&&a!==536870912&&(r.flags|=128,f=!0,kl(l,!1),r.lanes=4194304);l.isBackwards?(d.sibling=r.child,r.child=d):(t=l.last,t!==null?t.sibling=d:r.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Rt(),t.sibling=null,a=Pt.current,he(Pt,f?a&1|2:a&1),Ke&&yi(r,l.treeForkCount),t):(mt(r),null);case 22:case 23:return Gn(r),Qf(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(mt(r),r.subtreeFlags&6&&(r.flags|=8192)):mt(r),a=r.updateQueue,a!==null&&Vc(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&te(ma),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),vi(qt),mt(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function yb(t,r){switch(xf(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return vi(qt),it(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return Hi(r),null;case 31:if(r.memoizedState!==null){if(Gn(r),r.alternate===null)throw Error(s(340));fa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 13:if(Gn(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));fa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return te(Pt),null;case 4:return it(),null;case 10:return vi(r.type),null;case 22:case 23:return Gn(r),Qf(),t!==null&&te(ma),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return vi(qt),null;case 25:return null;default:return null}}function a_(t,r){switch(xf(r),r.tag){case 3:vi(qt),it();break;case 26:case 27:case 5:Hi(r);break;case 4:it();break;case 31:r.memoizedState!==null&&Gn(r);break;case 13:Gn(r);break;case 19:te(Pt);break;case 10:vi(r.type);break;case 22:case 23:Gn(r),Qf(),t!==null&&te(ma);break;case 24:vi(qt)}}function Pl(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&t)===t){l=void 0;var d=a.create,v=a.inst;l=d(),v.destroy=l}a=a.next}while(a!==f)}}catch(S){rt(r,r.return,S)}}function hs(t,r,a){try{var l=r.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&t)===t){var v=l.inst,S=v.destroy;if(S!==void 0){v.destroy=void 0,f=r;var D=a,q=S;try{q()}catch(J){rt(f,D,J)}}}l=l.next}while(l!==d)}}catch(J){rt(r,r.return,J)}}function o_(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{Wg(r,a)}catch(l){rt(t,t.return,l)}}}function l_(t,r,a){a.props=Ea(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){rt(t,r,l)}}function Ll(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(f){rt(t,r,f)}}function Zr(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){rt(t,r,f)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){rt(t,r,f)}else a.current=null}function u_(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){rt(t,t.return,f)}}function Id(t,r,a){try{var l=t.stateNode;zb(l,t.type,a,r),l[It]=r}catch(f){rt(t,t.return,f)}}function c_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&_s(t.type)||t.tag===4}function Cd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||c_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&_s(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Dd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Sr));else if(l!==4&&(l===27&&_s(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(Dd(t,r,a),t=t.sibling;t!==null;)Dd(t,r,a),t=t.sibling}function xc(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&_s(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(xc(t,r,a),t=t.sibling;t!==null;)xc(t,r,a),t=t.sibling}function h_(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,f=r.attributes;f.length;)r.removeAttributeNode(f[0]);un(r,l,a),r[ft]=t,r[It]=a}catch(d){rt(t,t.return,d)}}var bi=!1,Gt=!1,Nd=!1,f_=typeof WeakSet=="function"?WeakSet:Set,nn=null;function _b(t,r){if(t=t.containerInfo,Wd=th,t=bg(t),Af(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var v=0,S=-1,D=-1,q=0,J=0,re=t,F=null;t:for(;;){for(var $;re!==a||f!==0&&re.nodeType!==3||(S=v+f),re!==d||l!==0&&re.nodeType!==3||(D=v+l),re.nodeType===3&&(v+=re.nodeValue.length),($=re.firstChild)!==null;)F=re,re=$;for(;;){if(re===t)break t;if(F===a&&++q===f&&(S=v),F===d&&++J===l&&(D=v),($=re.nextSibling)!==null)break;re=F,F=re.parentNode}re=$}a=S===-1||D===-1?null:{start:S,end:D}}else a=null}a=a||{start:0,end:0}}else a=null;for(Jd={focusedElem:t,selectionRange:a},th=!1,nn=r;nn!==null;)if(r=nn,t=r.child,(r.subtreeFlags&1028)!==0&&t!==null)t.return=r,nn=t;else for(;nn!==null;){switch(r=nn,d=r.alternate,t=r.flags,r.tag){case 0:if((t&4)!==0&&(t=r.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)f=t[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=r,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ge=Ea(a.type,f);t=l.getSnapshotBeforeUpdate(ge,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(Ae){rt(a,a.return,Ae)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)tp(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":tp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,nn=t;break}nn=r.return}}function d_(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ri(t,a),l&4&&Pl(5,a);break;case 1:if(Ri(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(v){rt(a,a.return,v)}else{var f=Ea(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(f,r,t.__reactInternalSnapshotBeforeUpdate)}catch(v){rt(a,a.return,v)}}l&64&&o_(a),l&512&&Ll(a,a.return);break;case 3:if(Ri(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{Wg(t,r)}catch(v){rt(a,a.return,v)}}break;case 27:r===null&&l&4&&h_(a);case 26:case 5:Ri(t,a),r===null&&l&4&&u_(a),l&512&&Ll(a,a.return);break;case 12:Ri(t,a);break;case 31:Ri(t,a),l&4&&g_(t,a);break;case 13:Ri(t,a),l&4&&y_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=Ib.bind(null,a),Kb(t,a))));break;case 22:if(l=a.memoizedState!==null||bi,!l){r=r!==null&&r.memoizedState!==null||Gt,f=bi;var d=Gt;bi=l,(Gt=r)&&!d?Ii(t,a,(a.subtreeFlags&8772)!==0):Ri(t,a),bi=f,Gt=d}break;case 30:break;default:Ri(t,a)}}function p_(t){var r=t.alternate;r!==null&&(t.alternate=null,p_(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&fi(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var vt=null,Nn=!1;function wi(t,r,a){for(a=a.child;a!==null;)m_(t,r,a),a=a.sibling}function m_(t,r,a){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(Xt,a)}catch{}switch(a.tag){case 26:Gt||Zr(a,r),wi(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Gt||Zr(a,r);var l=vt,f=Nn;_s(a.type)&&(vt=a.stateNode,Nn=!1),wi(t,r,a),$l(a.stateNode),vt=l,Nn=f;break;case 5:Gt||Zr(a,r);case 6:if(l=vt,f=Nn,vt=null,wi(t,r,a),vt=l,Nn=f,vt!==null)if(Nn)try{(vt.nodeType===9?vt.body:vt.nodeName==="HTML"?vt.ownerDocument.body:vt).removeChild(a.stateNode)}catch(d){rt(a,r,d)}else try{vt.removeChild(a.stateNode)}catch(d){rt(a,r,d)}break;case 18:vt!==null&&(Nn?(t=vt,ov(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),bo(t)):ov(vt,a.stateNode));break;case 4:l=vt,f=Nn,vt=a.stateNode.containerInfo,Nn=!0,wi(t,r,a),vt=l,Nn=f;break;case 0:case 11:case 14:case 15:hs(2,a,r),Gt||hs(4,a,r),wi(t,r,a);break;case 1:Gt||(Zr(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&l_(a,r,l)),wi(t,r,a);break;case 21:wi(t,r,a);break;case 22:Gt=(l=Gt)||a.memoizedState!==null,wi(t,r,a),Gt=l;break;default:wi(t,r,a)}}function g_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{bo(t)}catch(a){rt(r,r.return,a)}}}function y_(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{bo(t)}catch(a){rt(r,r.return,a)}}function vb(t){switch(t.tag){case 31:case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new f_),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new f_),r;default:throw Error(s(435,t.tag))}}function kc(t,r){var a=vb(t);r.forEach(function(l){if(!a.has(l)){a.add(l);var f=Cb.bind(null,t,l);l.then(f,f)}})}function On(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=t,v=r,S=v;e:for(;S!==null;){switch(S.tag){case 27:if(_s(S.type)){vt=S.stateNode,Nn=!1;break e}break;case 5:vt=S.stateNode,Nn=!1;break e;case 3:case 4:vt=S.stateNode.containerInfo,Nn=!0;break e}S=S.return}if(vt===null)throw Error(s(160));m_(d,v,f),vt=null,Nn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(r.subtreeFlags&13886)for(r=r.child;r!==null;)__(r,t),r=r.sibling}var Cr=null;function __(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:On(r,t),Mn(t),l&4&&(hs(3,t,t.return),Pl(3,t),hs(5,t,t.return));break;case 1:On(r,t),Mn(t),l&512&&(Gt||a===null||Zr(a,a.return)),l&64&&bi&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=Cr;if(On(r,t),Mn(t),l&512&&(Gt||a===null||Zr(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,f=f.ownerDocument||f;t:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Bn]||d[ft]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),un(d,l,a),d[ft]=t,xt(d),l=d;break e;case"link":var v=_v("link","href",f).get(l+(a.href||""));if(v){for(var S=0;S<v.length;S++)if(d=v[S],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){v.splice(S,1);break t}}d=f.createElement(l),un(d,l,a),f.head.appendChild(d);break;case"meta":if(v=_v("meta","content",f).get(l+(a.content||""))){for(S=0;S<v.length;S++)if(d=v[S],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){v.splice(S,1);break t}}d=f.createElement(l),un(d,l,a),f.head.appendChild(d);break;default:throw Error(s(468,l))}d[ft]=t,xt(d),l=d}t.stateNode=l}else vv(f,t.type,t.stateNode);else t.stateNode=yv(f,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?vv(f,t.type,t.stateNode):yv(f,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Id(t,t.memoizedProps,a.memoizedProps)}break;case 27:On(r,t),Mn(t),l&512&&(Gt||a===null||Zr(a,a.return)),a!==null&&l&4&&Id(t,t.memoizedProps,a.memoizedProps);break;case 5:if(On(r,t),Mn(t),l&512&&(Gt||a===null||Zr(a,a.return)),t.flags&32){f=t.stateNode;try{Dn(f,"")}catch(ge){rt(t,t.return,ge)}}l&4&&t.stateNode!=null&&(f=t.memoizedProps,Id(t,f,a!==null?a.memoizedProps:f)),l&1024&&(Nd=!0);break;case 6:if(On(r,t),Mn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(ge){rt(t,t.return,ge)}}break;case 3:if(Wc=null,f=Cr,Cr=Qc(r.containerInfo),On(r,t),Cr=f,Mn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{bo(r.containerInfo)}catch(ge){rt(t,t.return,ge)}Nd&&(Nd=!1,v_(t));break;case 4:l=Cr,Cr=Qc(t.stateNode.containerInfo),On(r,t),Mn(t),Cr=l;break;case 12:On(r,t),Mn(t);break;case 31:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,kc(t,l)));break;case 13:On(r,t),Mn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Lc=Rt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,kc(t,l)));break;case 22:f=t.memoizedState!==null;var D=a!==null&&a.memoizedState!==null,q=bi,J=Gt;if(bi=q||f,Gt=J||D,On(r,t),Gt=J,bi=q,Mn(t),l&8192)e:for(r=t.stateNode,r._visibility=f?r._visibility&-2:r._visibility|1,f&&(a===null||D||bi||Gt||Ta(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){D=a=r;try{if(d=D.stateNode,f)v=d.style,typeof v.setProperty=="function"?v.setProperty("display","none","important"):v.display="none";else{S=D.stateNode;var re=D.memoizedProps.style,F=re!=null&&re.hasOwnProperty("display")?re.display:null;S.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ge){rt(D,D.return,ge)}}}else if(r.tag===6){if(a===null){D=r;try{D.stateNode.nodeValue=f?"":D.memoizedProps}catch(ge){rt(D,D.return,ge)}}}else if(r.tag===18){if(a===null){D=r;try{var $=D.stateNode;f?lv($,!0):lv(D.stateNode,!1)}catch(ge){rt(D,D.return,ge)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,kc(t,a))));break;case 19:On(r,t),Mn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,kc(t,l)));break;case 30:break;case 21:break;default:On(r,t),Mn(t)}}function Mn(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(c_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,d=Cd(t);xc(t,d,f);break;case 5:var v=a.stateNode;a.flags&32&&(Dn(v,""),a.flags&=-33);var S=Cd(t);xc(t,S,v);break;case 3:case 4:var D=a.stateNode.containerInfo,q=Cd(t);Dd(t,q,D);break;default:throw Error(s(161))}}catch(J){rt(t,t.return,J)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function v_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;v_(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ri(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)d_(t,r.alternate,r),r=r.sibling}function Ta(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:hs(4,r,r.return),Ta(r);break;case 1:Zr(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&l_(r,r.return,a),Ta(r);break;case 27:$l(r.stateNode);case 26:case 5:Zr(r,r.return),Ta(r);break;case 22:r.memoizedState===null&&Ta(r);break;case 30:Ta(r);break;default:Ta(r)}t=t.sibling}}function Ii(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,f=t,d=r,v=d.flags;switch(d.tag){case 0:case 11:case 15:Ii(f,d,a),Pl(4,d);break;case 1:if(Ii(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(q){rt(l,l.return,q)}if(l=d,f=l.updateQueue,f!==null){var S=l.stateNode;try{var D=f.shared.hiddenCallbacks;if(D!==null)for(f.shared.hiddenCallbacks=null,f=0;f<D.length;f++)Xg(D[f],S)}catch(q){rt(l,l.return,q)}}a&&v&64&&o_(d),Ll(d,d.return);break;case 27:h_(d);case 26:case 5:Ii(f,d,a),a&&l===null&&v&4&&u_(d),Ll(d,d.return);break;case 12:Ii(f,d,a);break;case 31:Ii(f,d,a),a&&v&4&&g_(f,d);break;case 13:Ii(f,d,a),a&&v&4&&y_(f,d);break;case 22:d.memoizedState===null&&Ii(f,d,a),Ll(d,d.return);break;case 30:break;default:Ii(f,d,a)}r=r.sibling}}function Od(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&Al(a))}function Md(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Al(t))}function Dr(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)E_(t,r,a,l),r=r.sibling}function E_(t,r,a,l){var f=r.flags;switch(r.tag){case 0:case 11:case 15:Dr(t,r,a,l),f&2048&&Pl(9,r);break;case 1:Dr(t,r,a,l);break;case 3:Dr(t,r,a,l),f&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&Al(t)));break;case 12:if(f&2048){Dr(t,r,a,l),t=r.stateNode;try{var d=r.memoizedProps,v=d.id,S=d.onPostCommit;typeof S=="function"&&S(v,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(D){rt(r,r.return,D)}}else Dr(t,r,a,l);break;case 31:Dr(t,r,a,l);break;case 13:Dr(t,r,a,l);break;case 23:break;case 22:d=r.stateNode,v=r.alternate,r.memoizedState!==null?d._visibility&2?Dr(t,r,a,l):Ul(t,r):d._visibility&2?Dr(t,r,a,l):(d._visibility|=2,fo(t,r,a,l,(r.subtreeFlags&10256)!==0||!1)),f&2048&&Od(v,r);break;case 24:Dr(t,r,a,l),f&2048&&Md(r.alternate,r);break;default:Dr(t,r,a,l)}}function fo(t,r,a,l,f){for(f=f&&((r.subtreeFlags&10256)!==0||!1),r=r.child;r!==null;){var d=t,v=r,S=a,D=l,q=v.flags;switch(v.tag){case 0:case 11:case 15:fo(d,v,S,D,f),Pl(8,v);break;case 23:break;case 22:var J=v.stateNode;v.memoizedState!==null?J._visibility&2?fo(d,v,S,D,f):Ul(d,v):(J._visibility|=2,fo(d,v,S,D,f)),f&&q&2048&&Od(v.alternate,v);break;case 24:fo(d,v,S,D,f),f&&q&2048&&Md(v.alternate,v);break;default:fo(d,v,S,D,f)}r=r.sibling}}function Ul(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,f=l.flags;switch(l.tag){case 22:Ul(a,l),f&2048&&Od(l.alternate,l);break;case 24:Ul(a,l),f&2048&&Md(l.alternate,l);break;default:Ul(a,l)}r=r.sibling}}var zl=8192;function po(t,r,a){if(t.subtreeFlags&zl)for(t=t.child;t!==null;)T_(t,r,a),t=t.sibling}function T_(t,r,a){switch(t.tag){case 26:po(t,r,a),t.flags&zl&&t.memoizedState!==null&&sw(a,Cr,t.memoizedState,t.memoizedProps);break;case 5:po(t,r,a);break;case 3:case 4:var l=Cr;Cr=Qc(t.stateNode.containerInfo),po(t,r,a),Cr=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=zl,zl=16777216,po(t,r,a),zl=l):po(t,r,a));break;default:po(t,r,a)}}function S_(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function Bl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];nn=l,b_(l,t)}S_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)A_(t),t=t.sibling}function A_(t){switch(t.tag){case 0:case 11:case 15:Bl(t),t.flags&2048&&hs(9,t,t.return);break;case 3:Bl(t);break;case 12:Bl(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Pc(t)):Bl(t);break;default:Bl(t)}}function Pc(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];nn=l,b_(l,t)}S_(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:hs(8,r,r.return),Pc(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Pc(r));break;default:Pc(r)}t=t.sibling}}function b_(t,r){for(;nn!==null;){var a=nn;switch(a.tag){case 0:case 11:case 15:hs(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:Al(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,nn=l;else e:for(a=t;nn!==null;){l=nn;var f=l.sibling,d=l.return;if(p_(l),l===a){nn=null;break e}if(f!==null){f.return=d,nn=f;break e}nn=d}}}var Eb={getCacheForType:function(t){var r=on(qt),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a},cacheSignal:function(){return on(qt).controller.signal}},Tb=typeof WeakMap=="function"?WeakMap:Map,Je=0,ut=null,Be=null,qe=0,nt=0,$n=null,fs=!1,mo=!1,Vd=!1,Ci=0,Dt=0,ds=0,Sa=0,xd=0,Kn=0,go=0,jl=null,Vn=null,kd=!1,Lc=0,w_=0,Uc=1/0,zc=null,ps=null,Zt=0,ms=null,yo=null,Di=0,Pd=0,Ld=null,R_=null,ql=0,Ud=null;function Yn(){return(Je&2)!==0&&qe!==0?qe&-qe:X.T!==null?Fd():Ot()}function I_(){if(Kn===0)if((qe&536870912)===0||Ke){var t=jr;jr<<=1,(jr&3932160)===0&&(jr=262144),Kn=t}else Kn=536870912;return t=Fn.current,t!==null&&(t.flags|=32),Kn}function xn(t,r,a){(t===ut&&(nt===2||nt===9)||t.cancelPendingCommit!==null)&&(_o(t,0),gs(t,qe,Kn,!1)),W(t,a),((Je&2)===0||t!==ut)&&(t===ut&&((Je&2)===0&&(Sa|=a),Dt===4&&gs(t,qe,Kn,!1)),ei(t))}function C_(t,r,a){if((Je&6)!==0)throw Error(s(327));var l=!a&&(r&127)===0&&(r&t.expiredLanes)===0||zn(t,r),f=l?bb(t,r):Bd(t,r,!0),d=l;do{if(f===0){mo&&!l&&gs(t,r,0,!1);break}else{if(a=t.current.alternate,d&&!Sb(a)){f=Bd(t,r,!1),d=!1;continue}if(f===2){if(d=r,t.errorRecoveryDisabledLanes&d)var v=0;else v=t.pendingLanes&-536870913,v=v!==0?v:v&536870912?536870912:0;if(v!==0){r=v;e:{var S=t;f=jl;var D=S.current.memoizedState.isDehydrated;if(D&&(_o(S,v).flags|=256),v=Bd(S,v,!1),v!==2){if(Vd&&!D){S.errorRecoveryDisabledLanes|=d,Sa|=d,f=4;break e}d=Vn,Vn=f,d!==null&&(Vn===null?Vn=d:Vn.push.apply(Vn,d))}f=v}if(d=!1,f!==2)continue}}if(f===1){_o(t,0),gs(t,r,0,!0);break}e:{switch(l=t,d=f,d){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:gs(l,r,Kn,!fs);break e;case 2:Vn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(f=Lc+300-Rt(),10<f)){if(gs(l,r,Kn,!fs),nr(l,0,!0)!==0)break e;Di=r,l.timeoutHandle=sv(D_.bind(null,l,a,Vn,zc,kd,r,Kn,Sa,go,fs,d,"Throttled",-0,0),f);break e}D_(l,a,Vn,zc,kd,r,Kn,Sa,go,fs,d,null,-0,0)}}break}while(!0);ei(t)}function D_(t,r,a,l,f,d,v,S,D,q,J,re,F,$){if(t.timeoutHandle=-1,re=r.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Sr},T_(r,d,re);var ge=(d&62914560)===d?Lc-Rt():(d&4194048)===d?w_-Rt():0;if(ge=aw(re,ge),ge!==null){Di=d,t.cancelPendingCommit=ge(L_.bind(null,t,r,d,a,l,f,v,S,D,J,re,null,F,$)),gs(t,d,v,!q);return}}L_(t,r,d,a,l,f,v,S,D)}function Sb(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!qn(d(),f))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function gs(t,r,a,l){r&=~xd,r&=~Sa,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var f=r;0<f;){var d=31-St(f),v=1<<d;l[d]=-1,f&=~v}a!==0&&Ie(t,a,r)}function Bc(){return(Je&6)===0?(Hl(0),!1):!0}function zd(){if(Be!==null){if(nt===0)var t=Be.return;else t=Be,_i=da=null,td(t),oo=null,wl=0,t=Be;for(;t!==null;)a_(t.alternate,t),t=t.return;Be=null}}function _o(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,qb(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Di=0,zd(),ut=t,Be=a=gi(t.current,null),qe=r,nt=0,$n=null,fs=!1,mo=zn(t,r),Vd=!1,go=Kn=xd=Sa=ds=Dt=0,Vn=jl=null,kd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var f=31-St(l),d=1<<f;r|=t[f],l&=~d}return Ci=r,oc(),a}function N_(t,r){xe=null,X.H=Vl,r===ao||r===mc?(r=$g(),nt=3):r===Hf?(r=$g(),nt=4):nt=r===yd?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,$n=r,Be===null&&(Dt=1,Dc(t,ur(r,t.current)))}function O_(){var t=Fn.current;return t===null?!0:(qe&4194048)===qe?dr===null:(qe&62914560)===qe||(qe&536870912)!==0?t===dr:!1}function M_(){var t=X.H;return X.H=Vl,t===null?Vl:t}function V_(){var t=X.A;return X.A=Eb,t}function jc(){Dt=4,fs||(qe&4194048)!==qe&&Fn.current!==null||(mo=!0),(ds&134217727)===0&&(Sa&134217727)===0||ut===null||gs(ut,qe,Kn,!1)}function Bd(t,r,a){var l=Je;Je|=2;var f=M_(),d=V_();(ut!==t||qe!==r)&&(zc=null,_o(t,r)),r=!1;var v=Dt;e:do try{if(nt!==0&&Be!==null){var S=Be,D=$n;switch(nt){case 8:zd(),v=6;break e;case 3:case 2:case 9:case 6:Fn.current===null&&(r=!0);var q=nt;if(nt=0,$n=null,vo(t,S,D,q),a&&mo){v=0;break e}break;default:q=nt,nt=0,$n=null,vo(t,S,D,q)}}Ab(),v=Dt;break}catch(J){N_(t,J)}while(!0);return r&&t.shellSuspendCounter++,_i=da=null,Je=l,X.H=f,X.A=d,Be===null&&(ut=null,qe=0,oc()),v}function Ab(){for(;Be!==null;)x_(Be)}function bb(t,r){var a=Je;Je|=2;var l=M_(),f=V_();ut!==t||qe!==r?(zc=null,Uc=Rt()+500,_o(t,r)):mo=zn(t,r);e:do try{if(nt!==0&&Be!==null){r=Be;var d=$n;t:switch(nt){case 1:nt=0,$n=null,vo(t,r,d,1);break;case 2:case 9:if(Fg(d)){nt=0,$n=null,k_(r);break}r=function(){nt!==2&&nt!==9||ut!==t||(nt=7),ei(t)},d.then(r,r);break e;case 3:nt=7;break e;case 4:nt=5;break e;case 7:Fg(d)?(nt=0,$n=null,k_(r)):(nt=0,$n=null,vo(t,r,d,7));break;case 5:var v=null;switch(Be.tag){case 26:v=Be.memoizedState;case 5:case 27:var S=Be;if(v?Ev(v):S.stateNode.complete){nt=0,$n=null;var D=S.sibling;if(D!==null)Be=D;else{var q=S.return;q!==null?(Be=q,qc(q)):Be=null}break t}}nt=0,$n=null,vo(t,r,d,5);break;case 6:nt=0,$n=null,vo(t,r,d,6);break;case 8:zd(),Dt=6;break e;default:throw Error(s(462))}}wb();break}catch(J){N_(t,J)}while(!0);return _i=da=null,X.H=l,X.A=f,Je=a,Be!==null?0:(ut=null,qe=0,oc(),Dt)}function wb(){for(;Be!==null&&!tl();)x_(Be)}function x_(t){var r=i_(t.alternate,t,Ci);t.memoizedProps=t.pendingProps,r===null?qc(t):Be=r}function k_(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=Jy(a,r,r.pendingProps,r.type,void 0,qe);break;case 11:r=Jy(a,r,r.pendingProps,r.type.render,r.ref,qe);break;case 5:td(r);default:a_(a,r),r=Be=Vg(r,Ci),r=i_(a,r,Ci)}t.memoizedProps=t.pendingProps,r===null?qc(t):Be=r}function vo(t,r,a,l){_i=da=null,td(r),oo=null,wl=0;var f=r.return;try{if(db(t,f,r,a,qe)){Dt=1,Dc(t,ur(a,t.current)),Be=null;return}}catch(d){if(f!==null)throw Be=f,d;Dt=1,Dc(t,ur(a,t.current)),Be=null;return}r.flags&32768?(Ke||l===1?t=!0:mo||(qe&536870912)!==0?t=!1:(fs=t=!0,(l===2||l===9||l===3||l===6)&&(l=Fn.current,l!==null&&l.tag===13&&(l.flags|=16384))),P_(r,t)):qc(r)}function qc(t){var r=t;do{if((r.flags&32768)!==0){P_(r,fs);return}t=r.return;var a=gb(r.alternate,r,Ci);if(a!==null){Be=a;return}if(r=r.sibling,r!==null){Be=r;return}Be=r=t}while(r!==null);Dt===0&&(Dt=5)}function P_(t,r){do{var a=yb(t.alternate,t);if(a!==null){a.flags&=32767,Be=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Be=t;return}Be=t=a}while(t!==null);Dt=6,Be=null}function L_(t,r,a,l,f,d,v,S,D){t.cancelPendingCommit=null;do Hc();while(Zt!==0);if((Je&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(d=r.lanes|r.childLanes,d|=Cf,le(t,a,d,v,S,D),t===ut&&(Be=ut=null,qe=0),yo=r,ms=t,Di=a,Pd=d,Ld=f,R_=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Db(er,function(){return q_(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=X.T,X.T=null,f=oe.p,oe.p=2,v=Je,Je|=4;try{_b(t,r,a)}finally{Je=v,oe.p=f,X.T=l}}Zt=1,U_(),z_(),B_()}}function U_(){if(Zt===1){Zt=0;var t=ms,r=yo,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=X.T,X.T=null;var l=oe.p;oe.p=2;var f=Je;Je|=4;try{__(r,t);var d=Jd,v=bg(t.containerInfo),S=d.focusedElem,D=d.selectionRange;if(v!==S&&S&&S.ownerDocument&&Ag(S.ownerDocument.documentElement,S)){if(D!==null&&Af(S)){var q=D.start,J=D.end;if(J===void 0&&(J=q),"selectionStart"in S)S.selectionStart=q,S.selectionEnd=Math.min(J,S.value.length);else{var re=S.ownerDocument||document,F=re&&re.defaultView||window;if(F.getSelection){var $=F.getSelection(),ge=S.textContent.length,Ae=Math.min(D.start,ge),lt=D.end===void 0?Ae:Math.min(D.end,ge);!$.extend&&Ae>lt&&(v=lt,lt=Ae,Ae=v);var U=Sg(S,Ae),k=Sg(S,lt);if(U&&k&&($.rangeCount!==1||$.anchorNode!==U.node||$.anchorOffset!==U.offset||$.focusNode!==k.node||$.focusOffset!==k.offset)){var B=re.createRange();B.setStart(U.node,U.offset),$.removeAllRanges(),Ae>lt?($.addRange(B),$.extend(k.node,k.offset)):(B.setEnd(k.node,k.offset),$.addRange(B))}}}}for(re=[],$=S;$=$.parentNode;)$.nodeType===1&&re.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof S.focus=="function"&&S.focus(),S=0;S<re.length;S++){var ee=re[S];ee.element.scrollLeft=ee.left,ee.element.scrollTop=ee.top}}th=!!Wd,Jd=Wd=null}finally{Je=f,oe.p=l,X.T=a}}t.current=r,Zt=2}}function z_(){if(Zt===2){Zt=0;var t=ms,r=yo,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=X.T,X.T=null;var l=oe.p;oe.p=2;var f=Je;Je|=4;try{d_(t,r.alternate,r)}finally{Je=f,oe.p=l,X.T=a}}Zt=3}}function B_(){if(Zt===4||Zt===3){Zt=0,Ys();var t=ms,r=yo,a=Di,l=R_;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Zt=5:(Zt=0,yo=ms=null,j_(t,t.pendingLanes));var f=t.pendingLanes;if(f===0&&(ps=null),gn(a),r=r.stateNode,Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(Xt,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=X.T,f=oe.p,oe.p=2,X.T=null;try{for(var d=t.onRecoverableError,v=0;v<l.length;v++){var S=l[v];d(S.value,{componentStack:S.stack})}}finally{X.T=r,oe.p=f}}(Di&3)!==0&&Hc(),ei(t),f=t.pendingLanes,(a&261930)!==0&&(f&42)!==0?t===Ud?ql++:(ql=0,Ud=t):ql=0,Hl(0)}}function j_(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,Al(r)))}function Hc(){return U_(),z_(),B_(),q_()}function q_(){if(Zt!==5)return!1;var t=ms,r=Pd;Pd=0;var a=gn(Di),l=X.T,f=oe.p;try{oe.p=32>a?32:a,X.T=null,a=Ld,Ld=null;var d=ms,v=Di;if(Zt=0,yo=ms=null,Di=0,(Je&6)!==0)throw Error(s(331));var S=Je;if(Je|=4,A_(d.current),E_(d,d.current,v,a),Je=S,Hl(0,!1),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(Xt,d)}catch{}return!0}finally{oe.p=f,X.T=l,j_(t,r)}}function H_(t,r,a){r=ur(a,r),r=gd(t.stateNode,r,2),t=ls(t,r,2),t!==null&&(W(t,2),ei(t))}function rt(t,r,a){if(t.tag===3)H_(t,t,a);else for(;r!==null;){if(r.tag===3){H_(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(ps===null||!ps.has(l))){t=ur(a,t),a=Fy(2),l=ls(r,a,2),l!==null&&(Gy(a,l,r,t),W(l,2),ei(l));break}}r=r.return}}function jd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new Tb;var f=new Set;l.set(r,f)}else f=l.get(r),f===void 0&&(f=new Set,l.set(r,f));f.has(a)||(Vd=!0,f.add(a),t=Rb.bind(null,t,r,a),r.then(t,t))}function Rb(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,ut===t&&(qe&a)===a&&(Dt===4||Dt===3&&(qe&62914560)===qe&&300>Rt()-Lc?(Je&2)===0&&_o(t,0):xd|=a,go===qe&&(go=0)),ei(t)}function F_(t,r){r===0&&(r=Js()),t=ca(t,r),t!==null&&(W(t,r),ei(t))}function Ib(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),F_(t,a)}function Cb(t,r){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,f=t.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),F_(t,a)}function Db(t,r){return wt(t,r)}var Fc=null,Eo=null,qd=!1,Gc=!1,Hd=!1,ys=0;function ei(t){t!==Eo&&t.next===null&&(Eo===null?Fc=Eo=t:Eo=Eo.next=t),Gc=!0,qd||(qd=!0,Ob())}function Hl(t,r){if(!Hd&&Gc){Hd=!0;do for(var a=!1,l=Fc;l!==null;){if(t!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var v=l.suspendedLanes,S=l.pingedLanes;d=(1<<31-St(42|t)+1)-1,d&=f&~(v&~S),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,Y_(l,d))}else d=qe,d=nr(l,l===ut?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||zn(l,d)||(a=!0,Y_(l,d));l=l.next}while(a);Hd=!1}}function Nb(){G_()}function G_(){Gc=qd=!1;var t=0;ys!==0&&jb()&&(t=ys);for(var r=Rt(),a=null,l=Fc;l!==null;){var f=l.next,d=$_(l,r);d===0?(l.next=null,a===null?Fc=f:a.next=f,f===null&&(Eo=a)):(a=l,(t!==0||(d&3)!==0)&&(Gc=!0)),l=f}Zt!==0&&Zt!==5||Hl(t),ys!==0&&(ys=0)}function $_(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,f=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var v=31-St(d),S=1<<v,D=f[v];D===-1?((S&a)===0||(S&l)!==0)&&(f[v]=La(S,r)):D<=r&&(t.expiredLanes|=S),d&=~S}if(r=ut,a=qe,a=nr(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(nt===2||nt===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&Tr(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||zn(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&Tr(l),gn(a)){case 2:case 8:a=zr;break;case 32:a=er;break;case 268435456:a=Br;break;default:a=er}return l=K_.bind(null,t),a=wt(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&Tr(l),t.callbackPriority=2,t.callbackNode=null,2}function K_(t,r){if(Zt!==0&&Zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Hc()&&t.callbackNode!==a)return null;var l=qe;return l=nr(t,t===ut?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(C_(t,l,r),$_(t,Rt()),t.callbackNode!=null&&t.callbackNode===a?K_.bind(null,t):null)}function Y_(t,r){if(Hc())return null;C_(t,r,!0)}function Ob(){Hb(function(){(Je&6)!==0?wt(Gi,Nb):G_()})}function Fd(){if(ys===0){var t=io;t===0&&(t=Un,Un<<=1,(Un&261888)===0&&(Un=256)),ys=t}return ys}function Q_(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ha(""+t)}function X_(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function Mb(t,r,a,l,f){if(r==="submit"&&a&&a.stateNode===f){var d=Q_((f[It]||null).action),v=l.submitter;v&&(r=(r=v[It]||null)?Q_(r.formAction):v.getAttribute("formAction"),r!==null&&(d=r,v=null));var S=new Kr("action","action",null,l,f);t.push({event:S,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(ys!==0){var D=v?X_(f,v):new FormData(f);cd(a,{pending:!0,data:D,method:f.method,action:d},null,D)}}else typeof d=="function"&&(S.preventDefault(),D=v?X_(f,v):new FormData(f),cd(a,{pending:!0,data:D,method:f.method,action:d},d,D))},currentTarget:f}]})}}for(var Gd=0;Gd<If.length;Gd++){var $d=If[Gd],Vb=$d.toLowerCase(),xb=$d[0].toUpperCase()+$d.slice(1);Ir(Vb,"on"+xb)}Ir(Ig,"onAnimationEnd"),Ir(Cg,"onAnimationIteration"),Ir(Dg,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(XA,"onTransitionRun"),Ir(WA,"onTransitionStart"),Ir(JA,"onTransitionCancel"),Ir(Ng,"onTransitionEnd"),Hr("onMouseEnter",["mouseout","mouseover"]),Hr("onMouseLeave",["mouseout","mouseover"]),Hr("onPointerEnter",["pointerout","pointerover"]),Hr("onPointerLeave",["pointerout","pointerover"]),qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),qr("onBeforeInput",["compositionend","keypress","textInput","paste"]),qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Fl));function W_(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],f=l.event;l=l.listeners;e:{var d=void 0;if(r)for(var v=l.length-1;0<=v;v--){var S=l[v],D=S.instance,q=S.currentTarget;if(S=S.listener,D!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=q;try{d(f)}catch(J){ac(J)}f.currentTarget=null,d=D}else for(v=0;v<l.length;v++){if(S=l[v],D=S.instance,q=S.currentTarget,S=S.listener,D!==d&&f.isPropagationStopped())break e;d=S,f.currentTarget=q;try{d(f)}catch(J){ac(J)}f.currentTarget=null,d=D}}}}function je(t,r){var a=r[hi];a===void 0&&(a=r[hi]=new Set);var l=t+"__bubble";a.has(l)||(J_(r,t,2,!1),a.add(l))}function Kd(t,r,a){var l=0;r&&(l|=4),J_(a,t,l,r)}var $c="_reactListening"+Math.random().toString(36).slice(2);function Yd(t){if(!t[$c]){t[$c]=!0,ir.forEach(function(a){a!=="selectionchange"&&(kb.has(a)||Kd(a,!1,t),Kd(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[$c]||(r[$c]=!0,Kd("selectionchange",!1,r))}}function J_(t,r,a,l){switch(Iv(r)){case 2:var f=uw;break;case 8:f=cw;break;default:f=up}a=f.bind(null,r,a,t),f=void 0,!na||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(f=!0),l?f!==void 0?t.addEventListener(r,a,{capture:!0,passive:f}):t.addEventListener(r,a,!0):f!==void 0?t.addEventListener(r,a,{passive:f}):t.addEventListener(r,a,!1)}function Qd(t,r,a,l,f){var d=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var v=l.tag;if(v===3||v===4){var S=l.stateNode.containerInfo;if(S===f)break;if(v===4)for(v=l.return;v!==null;){var D=v.tag;if((D===3||D===4)&&v.stateNode.containerInfo===f)return;v=v.return}for(;S!==null;){if(v=pe(S),v===null)return;if(D=v.tag,D===5||D===6||D===26||D===27){l=d=v;continue e}S=S.parentNode}}l=l.return}Ji(function(){var q=d,J=sr(a),re=[];e:{var F=Og.get(t);if(F!==void 0){var $=Kr,ge=t;switch(t){case"keypress":if(ia(a)===0)break e;case"keydown":case"keyup":$=rc;break;case"focusin":ge="focus",$=aa;break;case"focusout":ge="blur",$=aa;break;case"beforeblur":case"afterblur":$=aa;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=ml;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=Yu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=y;break;case Ig:case Cg:case Dg:$=Xu;break;case Ng:$=A;break;case"scroll":case"scrollend":$=pl;break;case"wheel":$=G;break;case"copy":case"cut":case"paste":$=Wu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=mi;break;case"toggle":case"beforetoggle":$=Ve}var Ae=(r&4)!==0,lt=!Ae&&(t==="scroll"||t==="scrollend"),U=Ae?F!==null?F+"Capture":null:F;Ae=[];for(var k=q,B;k!==null;){var ee=k;if(B=ee.stateNode,ee=ee.tag,ee!==5&&ee!==26&&ee!==27||B===null||U===null||(ee=Ar(k,U),ee!=null&&Ae.push(Gl(k,ee,B))),lt)break;k=k.return}0<Ae.length&&(F=new $(F,ge,null,a,J),re.push({event:F,listeners:Ae}))}}if((r&7)===0){e:{if(F=t==="mouseover"||t==="pointerover",$=t==="mouseout"||t==="pointerout",F&&a!==hl&&(ge=a.relatedTarget||a.fromElement)&&(pe(ge)||ge[yn]))break e;if(($||F)&&(F=J.window===J?J:(F=J.ownerDocument)?F.defaultView||F.parentWindow:window,$?(ge=a.relatedTarget||a.toElement,$=q,ge=ge?pe(ge):null,ge!==null&&(lt=u(ge),Ae=ge.tag,ge!==lt||Ae!==5&&Ae!==27&&Ae!==6)&&(ge=null)):($=null,ge=q),$!==ge)){if(Ae=ml,ee="onMouseLeave",U="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(Ae=mi,ee="onPointerLeave",U="onPointerEnter",k="pointer"),lt=$==null?F:Vt($),B=ge==null?F:Vt(ge),F=new Ae(ee,k+"leave",$,a,J),F.target=lt,F.relatedTarget=B,ee=null,pe(J)===q&&(Ae=new Ae(U,k+"enter",ge,a,J),Ae.target=B,Ae.relatedTarget=lt,ee=Ae),lt=ee,$&&ge)t:{for(Ae=Pb,U=$,k=ge,B=0,ee=U;ee;ee=Ae(ee))B++;ee=0;for(var Ee=k;Ee;Ee=Ae(Ee))ee++;for(;0<B-ee;)U=Ae(U),B--;for(;0<ee-B;)k=Ae(k),ee--;for(;B--;){if(U===k||k!==null&&U===k.alternate){Ae=U;break t}U=Ae(U),k=Ae(k)}Ae=null}else Ae=null;$!==null&&Z_(re,F,$,Ae,!1),ge!==null&&lt!==null&&Z_(re,lt,ge,Ae,!0)}}e:{if(F=q?Vt(q):window,$=F.nodeName&&F.nodeName.toLowerCase(),$==="select"||$==="input"&&F.type==="file")var Qe=gg;else if(pg(F))if(yg)Qe=KA;else{Qe=GA;var ye=FA}else $=F.nodeName,!$||$.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?q&&qa(q.elementType)&&(Qe=gg):Qe=$A;if(Qe&&(Qe=Qe(t,q))){mg(re,Qe,a,J);break e}ye&&ye(t,F,q),t==="focusout"&&q&&F.type==="number"&&q.memoizedProps.value!=null&&ll(F,"number",F.value)}switch(ye=q?Vt(q):window,t){case"focusin":(pg(ye)||ye.contentEditable==="true")&&(Xa=ye,bf=q,El=null);break;case"focusout":El=bf=Xa=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,wg(re,a,J);break;case"selectionchange":if(QA)break;case"keydown":case"keyup":wg(re,a,J)}var Pe;if(We)e:{switch(t){case"compositionstart":var He="onCompositionStart";break e;case"compositionend":He="onCompositionEnd";break e;case"compositionupdate":He="onCompositionUpdate";break e}He=void 0}else Qa?oa(t,a)&&(He="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(He="onCompositionStart");He&&(Xr&&a.locale!=="ko"&&(Qa||He!=="onCompositionStart"?He==="onCompositionEnd"&&Qa&&(Pe=dl()):($r=J,fl="value"in $r?$r.value:$r.textContent,Qa=!0)),ye=Kc(q,He),0<ye.length&&(He=new Qr(He,t,null,a,J),re.push({event:He,listeners:ye}),Pe?He.data=Pe:(Pe=Ya(a),Pe!==null&&(He.data=Pe)))),(Pe=or?BA(t,a):jA(t,a))&&(He=Kc(q,"onBeforeInput"),0<He.length&&(ye=new Qr("onBeforeInput","beforeinput",null,a,J),re.push({event:ye,listeners:He}),ye.data=Pe)),Mb(re,t,q,a,J)}W_(re,r)})}function Gl(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Kc(t,r){for(var a=r+"Capture",l=[];t!==null;){var f=t,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=Ar(t,a),f!=null&&l.unshift(Gl(t,f,d)),f=Ar(t,r),f!=null&&l.push(Gl(t,f,d))),t.tag===3)return l;t=t.return}return[]}function Pb(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Z_(t,r,a,l,f){for(var d=r._reactName,v=[];a!==null&&a!==l;){var S=a,D=S.alternate,q=S.stateNode;if(S=S.tag,D!==null&&D===l)break;S!==5&&S!==26&&S!==27||q===null||(D=q,f?(q=Ar(a,d),q!=null&&v.unshift(Gl(a,q,D))):f||(q=Ar(a,d),q!=null&&v.push(Gl(a,q,D)))),a=a.return}v.length!==0&&t.push({event:r,listeners:v})}var Lb=/\r\n?/g,Ub=/\u0000|\uFFFD/g;function ev(t){return(typeof t=="string"?t:""+t).replace(Lb,`
`).replace(Ub,"")}function tv(t,r){return r=ev(r),ev(t)===r}function ot(t,r,a,l,f,d){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Dn(t,""+l);break;case"className":jn(t,"class",l);break;case"tabIndex":jn(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":jn(t,a,l);break;case"style":cl(t,l,d);break;case"data":if(r!=="object"){jn(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ha(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(r!=="input"&&ot(t,r,"name",f.name,f,null),ot(t,r,"formEncType",f.formEncType,f,null),ot(t,r,"formMethod",f.formMethod,f,null),ot(t,r,"formTarget",f.formTarget,f,null)):(ot(t,r,"encType",f.encType,f,null),ot(t,r,"method",f.method,f,null),ot(t,r,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ha(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Sr);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ha(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":je("beforetoggle",t),je("toggle",t),Ba(t,"popover",l);break;case"xlinkActuate":jt(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":jt(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":jt(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":jt(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":jt(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":jt(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":jt(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":jt(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":jt(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Ba(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Ku.get(a)||a,Ba(t,a,l))}}function Xd(t,r,a,l,f,d){switch(a){case"style":cl(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Dn(t,l):(typeof l=="number"||typeof l=="bigint")&&Dn(t,""+l);break;case"onScroll":l!=null&&je("scroll",t);break;case"onScrollEnd":l!=null&&je("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Sr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!rl.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),r=a.slice(2,f?a.length-7:void 0),d=t[It]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(r,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,f);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Ba(t,a,l)}}}function un(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",t),je("load",t);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var v=a[d];if(v!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(t,r,d,v,a,null)}}f&&ot(t,r,"srcSet",a.srcSet,a,null),l&&ot(t,r,"src",a.src,a,null);return;case"input":je("invalid",t);var S=d=v=f=null,D=null,q=null;for(l in a)if(a.hasOwnProperty(l)){var J=a[l];if(J!=null)switch(l){case"name":f=J;break;case"type":v=J;break;case"checked":D=J;break;case"defaultChecked":q=J;break;case"value":d=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(s(137,r));break;default:ot(t,r,l,J,a,null)}}Fu(t,d,S,D,q,v,f,!1);return;case"select":je("invalid",t),l=v=d=null;for(f in a)if(a.hasOwnProperty(f)&&(S=a[f],S!=null))switch(f){case"value":d=S;break;case"defaultValue":v=S;break;case"multiple":l=S;default:ot(t,r,f,S,a,null)}r=d,a=v,t.multiple=!!l,r!=null?Yi(t,!!l,r,!1):a!=null&&Yi(t,!!l,a,!0);return;case"textarea":je("invalid",t),d=f=l=null;for(v in a)if(a.hasOwnProperty(v)&&(S=a[v],S!=null))switch(v){case"value":l=S;break;case"defaultValue":f=S;break;case"children":d=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(s(91));break;default:ot(t,r,v,S,a,null)}Qi(t,l,f,d);return;case"option":for(D in a)a.hasOwnProperty(D)&&(l=a[D],l!=null)&&(D==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":ot(t,r,D,l,a,null));return;case"dialog":je("beforetoggle",t),je("toggle",t),je("cancel",t),je("close",t);break;case"iframe":case"object":je("load",t);break;case"video":case"audio":for(l=0;l<Fl.length;l++)je(Fl[l],t);break;case"image":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"embed":case"source":case"link":je("error",t),je("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in a)if(a.hasOwnProperty(q)&&(l=a[q],l!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:ot(t,r,q,l,a,null)}return;default:if(qa(r)){for(J in a)a.hasOwnProperty(J)&&(l=a[J],l!==void 0&&Xd(t,r,J,l,a,void 0));return}}for(S in a)a.hasOwnProperty(S)&&(l=a[S],l!=null&&ot(t,r,S,l,a,null))}function zb(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,v=null,S=null,D=null,q=null,J=null;for($ in a){var re=a[$];if(a.hasOwnProperty($)&&re!=null)switch($){case"checked":break;case"value":break;case"defaultValue":D=re;default:l.hasOwnProperty($)||ot(t,r,$,null,l,re)}}for(var F in l){var $=l[F];if(re=a[F],l.hasOwnProperty(F)&&($!=null||re!=null))switch(F){case"type":d=$;break;case"name":f=$;break;case"checked":q=$;break;case"defaultChecked":J=$;break;case"value":v=$;break;case"defaultValue":S=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(s(137,r));break;default:$!==re&&ot(t,r,F,$,l,re)}}ja(t,v,S,D,q,J,d,f);return;case"select":$=v=S=F=null;for(d in a)if(D=a[d],a.hasOwnProperty(d)&&D!=null)switch(d){case"value":break;case"multiple":$=D;default:l.hasOwnProperty(d)||ot(t,r,d,null,l,D)}for(f in l)if(d=l[f],D=a[f],l.hasOwnProperty(f)&&(d!=null||D!=null))switch(f){case"value":F=d;break;case"defaultValue":S=d;break;case"multiple":v=d;default:d!==D&&ot(t,r,f,d,l,D)}r=S,a=v,l=$,F!=null?Yi(t,!!a,F,!1):!!l!=!!a&&(r!=null?Yi(t,!!a,r,!0):Yi(t,!!a,a?[]:"",!1));return;case"textarea":$=F=null;for(S in a)if(f=a[S],a.hasOwnProperty(S)&&f!=null&&!l.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:ot(t,r,S,null,l,f)}for(v in l)if(f=l[v],d=a[v],l.hasOwnProperty(v)&&(f!=null||d!=null))switch(v){case"value":F=f;break;case"defaultValue":$=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==d&&ot(t,r,v,f,l,d)}Gu(t,F,$);return;case"option":for(var ge in a)F=a[ge],a.hasOwnProperty(ge)&&F!=null&&!l.hasOwnProperty(ge)&&(ge==="selected"?t.selected=!1:ot(t,r,ge,null,l,F));for(D in l)F=l[D],$=a[D],l.hasOwnProperty(D)&&F!==$&&(F!=null||$!=null)&&(D==="selected"?t.selected=F&&typeof F!="function"&&typeof F!="symbol":ot(t,r,D,F,l,$));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ae in a)F=a[Ae],a.hasOwnProperty(Ae)&&F!=null&&!l.hasOwnProperty(Ae)&&ot(t,r,Ae,null,l,F);for(q in l)if(F=l[q],$=a[q],l.hasOwnProperty(q)&&F!==$&&(F!=null||$!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,r));break;default:ot(t,r,q,F,l,$)}return;default:if(qa(r)){for(var lt in a)F=a[lt],a.hasOwnProperty(lt)&&F!==void 0&&!l.hasOwnProperty(lt)&&Xd(t,r,lt,void 0,l,F);for(J in l)F=l[J],$=a[J],!l.hasOwnProperty(J)||F===$||F===void 0&&$===void 0||Xd(t,r,J,F,l,$);return}}for(var U in a)F=a[U],a.hasOwnProperty(U)&&F!=null&&!l.hasOwnProperty(U)&&ot(t,r,U,null,l,F);for(re in l)F=l[re],$=a[re],!l.hasOwnProperty(re)||F===$||F==null&&$==null||ot(t,r,re,F,l,$)}function nv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Bb(){if(typeof performance.getEntriesByType=="function"){for(var t=0,r=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,v=f.initiatorType,S=f.duration;if(d&&S&&nv(v)){for(v=0,S=f.responseEnd,l+=1;l<a.length;l++){var D=a[l],q=D.startTime;if(q>S)break;var J=D.transferSize,re=D.initiatorType;J&&nv(re)&&(D=D.responseEnd,v+=J*(D<S?1:(S-q)/(D-q)))}if(--l,r+=8*(d+v)/(f.duration/1e3),t++,10<t)break}}if(0<t)return r/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Wd=null,Jd=null;function Yc(t){return t.nodeType===9?t:t.ownerDocument}function rv(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function iv(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Zd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var ep=null;function jb(){var t=window.event;return t&&t.type==="popstate"?t===ep?!1:(ep=t,!0):(ep=null,!1)}var sv=typeof setTimeout=="function"?setTimeout:void 0,qb=typeof clearTimeout=="function"?clearTimeout:void 0,av=typeof Promise=="function"?Promise:void 0,Hb=typeof queueMicrotask=="function"?queueMicrotask:typeof av<"u"?function(t){return av.resolve(null).then(t).catch(Fb)}:sv;function Fb(t){setTimeout(function(){throw t})}function _s(t){return t==="head"}function ov(t,r){var a=r,l=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(f),bo(r);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")$l(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,$l(a);for(var d=a.firstChild;d;){var v=d.nextSibling,S=d.nodeName;d[Bn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=v}}else a==="body"&&$l(t.ownerDocument.body);a=f}while(a);bo(r)}function lv(t,r){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?r?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(r?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function tp(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":tp(a),fi(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function Gb(t,r,a,l){for(;t.nodeType===1;){var f=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Bn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==f.rel||t.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||t.getAttribute("title")!==(f.title==null?null:f.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(f.src==null?null:f.src)||t.getAttribute("type")!==(f.type==null?null:f.type)||t.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=pr(t.nextSibling),t===null)break}return null}function $b(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=pr(t.nextSibling),t===null))return null;return t}function uv(t,r){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=pr(t.nextSibling),t===null))return null;return t}function np(t){return t.data==="$?"||t.data==="$~"}function rp(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Kb(t,r){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=r;else if(t.data!=="$?"||a.readyState!=="loading")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function pr(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"||r==="F!"||r==="F")break;if(r==="/$"||r==="/&")return null}}return t}var ip=null;function cv(t){t=t.nextSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(r===0)return pr(t.nextSibling);r--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||r++}t=t.nextSibling}return null}function hv(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(r===0)return t;r--}else a!=="/$"&&a!=="/&"||r++}t=t.previousSibling}return null}function fv(t,r,a){switch(r=Yc(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function $l(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);fi(t)}var mr=new Map,dv=new Set;function Qc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Ni=oe.d;oe.d={f:Yb,r:Qb,D:Xb,C:Wb,L:Jb,m:Zb,X:tw,S:ew,M:nw};function Yb(){var t=Ni.f(),r=Bc();return t||r}function Qb(t){var r=Mt(t);r!==null&&r.tag===5&&r.type==="form"?Ny(r):Ni.r(t)}var To=typeof document>"u"?null:document;function pv(t,r,a){var l=To;if(l&&typeof r=="string"&&r){var f=Cn(r);f='link[rel="'+t+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),dv.has(f)||(dv.add(f),t={rel:t,crossOrigin:a,href:r},l.querySelector(f)===null&&(r=l.createElement("link"),un(r,"link",t),xt(r),l.head.appendChild(r)))}}function Xb(t){Ni.D(t),pv("dns-prefetch",t,null)}function Wb(t,r){Ni.C(t,r),pv("preconnect",t,r)}function Jb(t,r,a){Ni.L(t,r,a);var l=To;if(l&&t&&r){var f='link[rel="preload"][as="'+Cn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+Cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+Cn(a.imageSizes)+'"]')):f+='[href="'+Cn(t)+'"]';var d=f;switch(r){case"style":d=So(t);break;case"script":d=Ao(t)}mr.has(d)||(t=T({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),mr.set(d,t),l.querySelector(f)!==null||r==="style"&&l.querySelector(Kl(d))||r==="script"&&l.querySelector(Yl(d))||(r=l.createElement("link"),un(r,"link",t),xt(r),l.head.appendChild(r)))}}function Zb(t,r){Ni.m(t,r);var a=To;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",f='link[rel="modulepreload"][as="'+Cn(l)+'"][href="'+Cn(t)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=Ao(t)}if(!mr.has(d)&&(t=T({rel:"modulepreload",href:t},r),mr.set(d,t),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Yl(d)))return}l=a.createElement("link"),un(l,"link",t),xt(l),a.head.appendChild(l)}}}function ew(t,r,a){Ni.S(t,r,a);var l=To;if(l&&t){var f=rr(l).hoistableStyles,d=So(t);r=r||"default";var v=f.get(d);if(!v){var S={loading:0,preload:null};if(v=l.querySelector(Kl(d)))S.loading=5;else{t=T({rel:"stylesheet",href:t,"data-precedence":r},a),(a=mr.get(d))&&sp(t,a);var D=v=l.createElement("link");xt(D),un(D,"link",t),D._p=new Promise(function(q,J){D.onload=q,D.onerror=J}),D.addEventListener("load",function(){S.loading|=1}),D.addEventListener("error",function(){S.loading|=2}),S.loading|=4,Xc(v,r,l)}v={type:"stylesheet",instance:v,count:1,state:S},f.set(d,v)}}}function tw(t,r){Ni.X(t,r);var a=To;if(a&&t){var l=rr(a).hoistableScripts,f=Ao(t),d=l.get(f);d||(d=a.querySelector(Yl(f)),d||(t=T({src:t,async:!0},r),(r=mr.get(f))&&ap(t,r),d=a.createElement("script"),xt(d),un(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function nw(t,r){Ni.M(t,r);var a=To;if(a&&t){var l=rr(a).hoistableScripts,f=Ao(t),d=l.get(f);d||(d=a.querySelector(Yl(f)),d||(t=T({src:t,async:!0,type:"module"},r),(r=mr.get(f))&&ap(t,r),d=a.createElement("script"),xt(d),un(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function mv(t,r,a,l){var f=(f=Re.current)?Qc(f):null;if(!f)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=So(a.href),a=rr(f).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=So(a.href);var d=rr(f).hoistableStyles,v=d.get(t);if(v||(f=f.ownerDocument||f,v={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,v),(d=f.querySelector(Kl(t)))&&!d._p&&(v.instance=d,v.state.loading=5),mr.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},mr.set(t,a),d||rw(f,t,a,v.state))),r&&l===null)throw Error(s(528,""));return v}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Ao(a),a=rr(f).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function So(t){return'href="'+Cn(t)+'"'}function Kl(t){return'link[rel="stylesheet"]['+t+"]"}function gv(t){return T({},t,{"data-precedence":t.precedence,precedence:null})}function rw(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),un(r,"link",a),xt(r),t.head.appendChild(r))}function Ao(t){return'[src="'+Cn(t)+'"]'}function Yl(t){return"script[async]"+t}function yv(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+Cn(a.href)+'"]');if(l)return r.instance=l,xt(l),l;var f=T({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),un(l,"style",f),Xc(l,a.precedence,t),r.instance=l;case"stylesheet":f=So(a.href);var d=t.querySelector(Kl(f));if(d)return r.state.loading|=4,r.instance=d,xt(d),d;l=gv(a),(f=mr.get(f))&&sp(l,f),d=(t.ownerDocument||t).createElement("link"),xt(d);var v=d;return v._p=new Promise(function(S,D){v.onload=S,v.onerror=D}),un(d,"link",l),r.state.loading|=4,Xc(d,a.precedence,t),r.instance=d;case"script":return d=Ao(a.src),(f=t.querySelector(Yl(d)))?(r.instance=f,xt(f),f):(l=a,(f=mr.get(d))&&(l=T({},a),ap(l,f)),t=t.ownerDocument||t,f=t.createElement("script"),xt(f),un(f,"link",l),t.head.appendChild(f),r.instance=f);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Xc(l,a.precedence,t));return r.instance}function Xc(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,v=0;v<l.length;v++){var S=l[v];if(S.dataset.precedence===r)d=S;else if(d!==f)break}d?d.parentNode.insertBefore(t,d.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function sp(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function ap(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Wc=null;function _v(t,r,a){if(Wc===null){var l=new Map,f=Wc=new Map;f.set(a,l)}else f=Wc,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),f=0;f<a.length;f++){var d=a[f];if(!(d[Bn]||d[ft]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var v=d.getAttribute(r)||"";v=t+v;var S=l.get(v);S?S.push(d):l.set(v,[d])}}return l}function vv(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function iw(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;return r.rel==="stylesheet"?(t=r.disabled,typeof r.precedence=="string"&&t==null):!0;case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Ev(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function sw(t,r,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=So(l.href),d=r.querySelector(Kl(f));if(d){r=d._p,r!==null&&typeof r=="object"&&typeof r.then=="function"&&(t.count++,t=Jc.bind(t),r.then(t,t)),a.state.loading|=4,a.instance=d,xt(d);return}d=r.ownerDocument||r,l=gv(l),(f=mr.get(f))&&sp(l,f),d=d.createElement("link"),xt(d);var v=d;v._p=new Promise(function(S,D){v.onload=S,v.onerror=D}),un(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,r),(r=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Jc.bind(t),r.addEventListener("load",a),r.addEventListener("error",a))}}var op=0;function aw(t,r){return t.stylesheets&&t.count===0&&eh(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&eh(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+r);0<t.imgBytes&&op===0&&(op=62500*Bb());var f=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&eh(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>op?50:800)+r);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function Jc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)eh(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Zc=null;function eh(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Zc=new Map,r.forEach(ow,t),Zc=null,Jc.call(t))}function ow(t,r){if(!(r.state.loading&4)){var a=Zc.get(t);if(a)var l=a.get(null);else{a=new Map,Zc.set(t,a);for(var f=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var v=f[d];(v.nodeName==="LINK"||v.getAttribute("media")!=="not all")&&(a.set(v.dataset.precedence,v),l=v)}l&&a.set(null,l)}f=r.instance,v=f.getAttribute("data-precedence"),d=a.get(v)||l,d===l&&a.set(null,f),a.set(v,f),this.count++,l=Jc.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(f,t.firstChild)),r.state.loading|=4}}var Ql={$$typeof:se,Provider:null,Consumer:null,_currentValue:ve,_currentValue2:ve,_threadCount:0};function lw(t,r,a,l,f,d,v,S,D){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=j(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j(0),this.hiddenUpdates=j(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=v,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function Tv(t,r,a,l,f,d,v,S,D,q,J,re){return t=new lw(t,r,a,v,D,q,J,re,S),r=1,d===!0&&(r|=24),d=Hn(3,null,null,r),t.current=d,d.stateNode=t,r=Bf(),r.refCount++,t.pooledCache=r,r.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:r},Ff(d),t}function Sv(t){return t?(t=Za,t):Za}function Av(t,r,a,l,f,d){f=Sv(f),l.context===null?l.context=f:l.pendingContext=f,l=os(r),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=ls(t,l,r),a!==null&&(xn(a,t,r),Il(a,t,r))}function bv(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function lp(t,r){bv(t,r),(t=t.alternate)&&bv(t,r)}function wv(t){if(t.tag===13||t.tag===31){var r=ca(t,67108864);r!==null&&xn(r,t,67108864),lp(t,67108864)}}function Rv(t){if(t.tag===13||t.tag===31){var r=Yn();r=Nt(r);var a=ca(t,r);a!==null&&xn(a,t,r),lp(t,r)}}var th=!0;function uw(t,r,a,l){var f=X.T;X.T=null;var d=oe.p;try{oe.p=2,up(t,r,a,l)}finally{oe.p=d,X.T=f}}function cw(t,r,a,l){var f=X.T;X.T=null;var d=oe.p;try{oe.p=8,up(t,r,a,l)}finally{oe.p=d,X.T=f}}function up(t,r,a,l){if(th){var f=cp(l);if(f===null)Qd(t,r,l,nh,a),Cv(t,l);else if(fw(f,t,r,a,l))l.stopPropagation();else if(Cv(t,l),r&4&&-1<hw.indexOf(t)){for(;f!==null;){var d=Mt(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var v=tr(d.pendingLanes);if(v!==0){var S=d;for(S.pendingLanes|=2,S.entangledLanes|=2;v;){var D=1<<31-St(v);S.entanglements[1]|=D,v&=~D}ei(d),(Je&6)===0&&(Uc=Rt()+500,Hl(0))}}break;case 31:case 13:S=ca(d,2),S!==null&&xn(S,d,2),Bc(),lp(d,2)}if(d=cp(l),d===null&&Qd(t,r,l,nh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else Qd(t,r,l,null,a)}}function cp(t){return t=sr(t),hp(t)}var nh=null;function hp(t){if(nh=null,t=pe(t),t!==null){var r=u(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=h(r),t!==null)return t;t=null}else if(a===31){if(t=p(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return nh=t,null}function Iv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ur()){case Gi:return 2;case zr:return 8;case er:case Qs:return 32;case Br:return 268435456;default:return 32}default:return 32}}var fp=!1,vs=null,Es=null,Ts=null,Xl=new Map,Wl=new Map,Ss=[],hw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Cv(t,r){switch(t){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":Ts=null;break;case"pointerover":case"pointerout":Xl.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wl.delete(r.pointerId)}}function Jl(t,r,a,l,f,d){return t===null||t.nativeEvent!==d?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},r!==null&&(r=Mt(r),r!==null&&wv(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,f!==null&&r.indexOf(f)===-1&&r.push(f),t)}function fw(t,r,a,l,f){switch(r){case"focusin":return vs=Jl(vs,t,r,a,l,f),!0;case"dragenter":return Es=Jl(Es,t,r,a,l,f),!0;case"mouseover":return Ts=Jl(Ts,t,r,a,l,f),!0;case"pointerover":var d=f.pointerId;return Xl.set(d,Jl(Xl.get(d)||null,t,r,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Wl.set(d,Jl(Wl.get(d)||null,t,r,a,l,f)),!0}return!1}function Dv(t){var r=pe(t.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=h(a),r!==null){t.blockedOn=r,ht(t.priority,function(){Rv(a)});return}}else if(r===31){if(r=p(a),r!==null){t.blockedOn=r,ht(t.priority,function(){Rv(a)});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rh(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=cp(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);hl=l,a.target.dispatchEvent(l),hl=null}else return r=Mt(a),r!==null&&wv(r),t.blockedOn=a,!1;r.shift()}return!0}function Nv(t,r,a){rh(t)&&a.delete(r)}function dw(){fp=!1,vs!==null&&rh(vs)&&(vs=null),Es!==null&&rh(Es)&&(Es=null),Ts!==null&&rh(Ts)&&(Ts=null),Xl.forEach(Nv),Wl.forEach(Nv)}function ih(t,r){t.blockedOn===r&&(t.blockedOn=null,fp||(fp=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,dw)))}var sh=null;function Ov(t){sh!==t&&(sh=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){sh===t&&(sh=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],f=t[r+2];if(typeof l!="function"){if(hp(l||a)===null)continue;break}var d=Mt(a);d!==null&&(t.splice(r,3),r-=3,cd(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function bo(t){function r(D){return ih(D,t)}vs!==null&&ih(vs,t),Es!==null&&ih(Es,t),Ts!==null&&ih(Ts,t),Xl.forEach(r),Wl.forEach(r);for(var a=0;a<Ss.length;a++){var l=Ss[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Ss.length&&(a=Ss[0],a.blockedOn===null);)Dv(a),a.blockedOn===null&&Ss.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],v=f[It]||null;if(typeof d=="function")v||Ov(a);else if(v){var S=null;if(d&&d.hasAttribute("formAction")){if(f=d,v=d[It]||null)S=v.formAction;else if(hp(f)!==null)continue}else S=v.action;typeof S=="function"?a[l+1]=S:(a.splice(l,3),l-=3),Ov(a)}}}function Mv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(v){return f=v})},focusReset:"manual",scroll:"manual"})}function r(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",r),navigation.addEventListener("navigateerror",r),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",r),navigation.removeEventListener("navigateerror",r),f!==null&&(f(),f=null)}}}function dp(t){this._internalRoot=t}ah.prototype.render=dp.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=Yn();Av(a,l,t,r,null,null)},ah.prototype.unmount=dp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Av(t.current,2,null,t,null,null),Bc(),r[yn]=null}};function ah(t){this._internalRoot=t}ah.prototype.unstable_scheduleHydration=function(t){if(t){var r=Ot();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Ss.length&&r!==0&&r<Ss[a].priority;a++);Ss.splice(a,0,t),a===0&&Dv(t)}};var Vv=e.version;if(Vv!=="19.2.4")throw Error(s(527,Vv,"19.2.4"));oe.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=g(r),t=t!==null?_(t):null,t=t===null?null:t.stateNode,t};var pw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:X,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oh.isDisabled&&oh.supportsFiber)try{Xt=oh.inject(pw),Wt=oh}catch{}}return eu.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",f=By,d=jy,v=qy;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(f=r.onUncaughtError),r.onCaughtError!==void 0&&(d=r.onCaughtError),r.onRecoverableError!==void 0&&(v=r.onRecoverableError)),r=Tv(t,1,!1,null,null,a,l,null,f,d,v,Mv),t[yn]=r.current,Yd(t),new dp(r)},eu.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,f="",d=By,v=jy,S=qy,D=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(v=a.onCaughtError),a.onRecoverableError!==void 0&&(S=a.onRecoverableError),a.formState!==void 0&&(D=a.formState)),r=Tv(t,1,!0,r,a??null,l,f,D,d,v,S,Mv),r.context=Sv(null),a=r.current,l=Yn(),l=Nt(l),f=os(l),f.callback=null,ls(a,f,l),a=l,r.current.lanes=a,W(r,a),ei(r),t[yn]=r.current,Yd(t),new ah(r)},eu.version="19.2.4",eu}var Hv;function bw(){if(Hv)return gp.exports;Hv=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),gp.exports=Aw(),gp.exports}var ww=bw();var Fv="popstate";function Rw(i={}){function e(s,o){let{pathname:u,search:h,hash:p}=s.location;return Up("",{pathname:u,search:h,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(s,o){return typeof o=="string"?o:gu(o)}return Cw(e,n,null,i)}function At(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Mr(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Iw(){return Math.random().toString(36).substring(2,10)}function Gv(i,e){return{usr:i.state,key:i.key,idx:e}}function Up(i,e,n=null,s){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?Go(e):e,state:n,key:e&&e.key||s||Iw()}}function gu({pathname:i="/",search:e="",hash:n=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(i+=n.charAt(0)==="#"?n:"#"+n),i}function Go(i){let e={};if(i){let n=i.indexOf("#");n>=0&&(e.hash=i.substring(n),i=i.substring(0,n));let s=i.indexOf("?");s>=0&&(e.search=i.substring(s),i=i.substring(0,s)),i&&(e.pathname=i)}return e}function Cw(i,e,n,s={}){let{window:o=document.defaultView,v5Compat:u=!1}=s,h=o.history,p="POP",m=null,g=_();g==null&&(g=0,h.replaceState({...h.state,idx:g},""));function _(){return(h.state||{idx:null}).idx}function T(){p="POP";let H=_(),Q=H==null?null:H-g;g=H,m&&m({action:p,location:L.location,delta:Q})}function b(H,Q){p="PUSH";let Z=Up(L.location,H,Q);g=_()+1;let se=Gv(Z,g),_e=L.createHref(Z);try{h.pushState(se,"",_e)}catch(ce){if(ce instanceof DOMException&&ce.name==="DataCloneError")throw ce;o.location.assign(_e)}u&&m&&m({action:p,location:L.location,delta:1})}function M(H,Q){p="REPLACE";let Z=Up(L.location,H,Q);g=_();let se=Gv(Z,g),_e=L.createHref(Z);h.replaceState(se,"",_e),u&&m&&m({action:p,location:L.location,delta:0})}function Y(H){return Dw(H)}let L={get action(){return p},get location(){return i(o,h)},listen(H){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(Fv,T),m=H,()=>{o.removeEventListener(Fv,T),m=null}},createHref(H){return e(o,H)},createURL:Y,encodeLocation(H){let Q=Y(H);return{pathname:Q.pathname,search:Q.search,hash:Q.hash}},push:b,replace:M,go(H){return h.go(H)}};return L}function Dw(i,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),At(n,"No window.location.(origin|href) available to create URL");let s=typeof i=="string"?i:gu(i);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=n+s),new URL(s,n)}function xT(i,e,n="/"){return Nw(i,e,n,!1)}function Nw(i,e,n,s){let o=typeof e=="string"?Go(e):e,u=Pi(o.pathname||"/",n);if(u==null)return null;let h=kT(i);Ow(h);let p=null;for(let m=0;p==null&&m<h.length;++m){let g=qw(u);p=Bw(h[m],g,s)}return p}function kT(i,e=[],n=[],s="",o=!1){let u=(h,p,m=o,g)=>{let _={relativePath:g===void 0?h.path||"":g,caseSensitive:h.caseSensitive===!0,childrenIndex:p,route:h};if(_.relativePath.startsWith("/")){if(!_.relativePath.startsWith(s)&&m)return;At(_.relativePath.startsWith(s),`Absolute route path "${_.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),_.relativePath=_.relativePath.slice(s.length)}let T=Vi([s,_.relativePath]),b=n.concat(_);h.children&&h.children.length>0&&(At(h.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${T}".`),kT(h.children,e,b,T,m)),!(h.path==null&&!h.index)&&e.push({path:T,score:Uw(T,h.index),routesMeta:b})};return i.forEach((h,p)=>{if(h.path===""||!h.path?.includes("?"))u(h,p);else for(let m of PT(h.path))u(h,p,!0,m)}),e}function PT(i){let e=i.split("/");if(e.length===0)return[];let[n,...s]=e,o=n.endsWith("?"),u=n.replace(/\?$/,"");if(s.length===0)return o?[u,""]:[u];let h=PT(s.join("/")),p=[];return p.push(...h.map(m=>m===""?u:[u,m].join("/"))),o&&p.push(...h),p.map(m=>i.startsWith("/")&&m===""?"/":m)}function Ow(i){i.sort((e,n)=>e.score!==n.score?n.score-e.score:zw(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}var Mw=/^:[\w-]+$/,Vw=3,xw=2,kw=1,Pw=10,Lw=-2,$v=i=>i==="*";function Uw(i,e){let n=i.split("/"),s=n.length;return n.some($v)&&(s+=Lw),e&&(s+=xw),n.filter(o=>!$v(o)).reduce((o,u)=>o+(Mw.test(u)?Vw:u===""?kw:Pw),s)}function zw(i,e){return i.length===e.length&&i.slice(0,-1).every((s,o)=>s===e[o])?i[i.length-1]-e[e.length-1]:0}function Bw(i,e,n=!1){let{routesMeta:s}=i,o={},u="/",h=[];for(let p=0;p<s.length;++p){let m=s[p],g=p===s.length-1,_=u==="/"?e:e.slice(u.length)||"/",T=Dh({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},_),b=m.route;if(!T&&g&&n&&!s[s.length-1].route.index&&(T=Dh({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},_)),!T)return null;Object.assign(o,T.params),h.push({params:o,pathname:Vi([u,T.pathname]),pathnameBase:$w(Vi([u,T.pathnameBase])),route:b}),T.pathnameBase!=="/"&&(u=Vi([u,T.pathnameBase]))}return h}function Dh(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[n,s]=jw(i.path,i.caseSensitive,i.end),o=e.match(n);if(!o)return null;let u=o[0],h=u.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:s.reduce((g,{paramName:_,isOptional:T},b)=>{if(_==="*"){let Y=p[b]||"";h=u.slice(0,u.length-Y.length).replace(/(.)\/+$/,"$1")}const M=p[b];return T&&!M?g[_]=void 0:g[_]=(M||"").replace(/%2F/g,"/"),g},{}),pathname:u,pathnameBase:h,pattern:i}}function jw(i,e=!1,n=!0){Mr(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let s=[],o="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,p,m)=>(s.push({paramName:p,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(s.push({paramName:"*"}),o+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":i!==""&&i!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function qw(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mr(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function Pi(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=i.charAt(n);return s&&s!=="/"?null:i.slice(n)||"/"}var Hw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function Fw(i,e="/"){let{pathname:n,search:s="",hash:o=""}=typeof i=="string"?Go(i):i,u;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?u=Kv(n.substring(1),"/"):u=Kv(n,e)):u=e,{pathname:u,search:Kw(s),hash:Yw(o)}}function Kv(i,e){let n=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function Ep(i,e,n,s){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Gw(i){return i.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function LT(i){let e=Gw(i);return e.map((n,s)=>s===e.length-1?n.pathname:n.pathnameBase)}function UT(i,e,n,s=!1){let o;typeof i=="string"?o=Go(i):(o={...i},At(!o.pathname||!o.pathname.includes("?"),Ep("?","pathname","search",o)),At(!o.pathname||!o.pathname.includes("#"),Ep("#","pathname","hash",o)),At(!o.search||!o.search.includes("#"),Ep("#","search","hash",o)));let u=i===""||o.pathname==="",h=u?"/":o.pathname,p;if(h==null)p=n;else{let T=e.length-1;if(!s&&h.startsWith("..")){let b=h.split("/");for(;b[0]==="..";)b.shift(),T-=1;o.pathname=b.join("/")}p=T>=0?e[T]:"/"}let m=Fw(o,p),g=h&&h!=="/"&&h.endsWith("/"),_=(u||h===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(g||_)&&(m.pathname+="/"),m}var Vi=i=>i.join("/").replace(/\/\/+/g,"/"),$w=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),Kw=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,Yw=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,Qw=class{constructor(i,e,n,s=!1){this.status=i,this.statusText=e||"",this.internal=s,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function Xw(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function Ww(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var zT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function BT(i,e){let n=i;if(typeof n!="string"||!Hw.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let s=n,o=!1;if(zT)try{let u=new URL(window.location.href),h=n.startsWith("//")?new URL(u.protocol+n):new URL(n),p=Pi(h.pathname,e);h.origin===u.origin&&p!=null?n=p+h.search+h.hash:o=!0}catch{Mr(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:s,isExternal:o,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var jT=["POST","PUT","PATCH","DELETE"];new Set(jT);var Jw=["GET",...jT];new Set(Jw);var $o=N.createContext(null);$o.displayName="DataRouter";var Wh=N.createContext(null);Wh.displayName="DataRouterState";var Zw=N.createContext(!1),qT=N.createContext({isTransitioning:!1});qT.displayName="ViewTransition";var eR=N.createContext(new Map);eR.displayName="Fetchers";var tR=N.createContext(null);tR.displayName="Await";var Er=N.createContext(null);Er.displayName="Navigation";var Cu=N.createContext(null);Cu.displayName="Location";var ji=N.createContext({outlet:null,matches:[],isDataRoute:!1});ji.displayName="Route";var pm=N.createContext(null);pm.displayName="RouteError";var HT="REACT_ROUTER_ERROR",nR="REDIRECT",rR="ROUTE_ERROR_RESPONSE";function iR(i){if(i.startsWith(`${HT}:${nR}:{`))try{let e=JSON.parse(i.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function sR(i){if(i.startsWith(`${HT}:${rR}:{`))try{let e=JSON.parse(i.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new Qw(e.status,e.statusText,e.data)}catch{}}function aR(i,{relative:e}={}){At(Du(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:s}=N.useContext(Er),{hash:o,pathname:u,search:h}=Nu(i,{relative:e}),p=u;return n!=="/"&&(p=u==="/"?n:Vi([n,u])),s.createHref({pathname:p,search:h,hash:o})}function Du(){return N.useContext(Cu)!=null}function qs(){return At(Du(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Cu).location}var FT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function GT(i){N.useContext(Er).static||N.useLayoutEffect(i)}function $T(){let{isDataRoute:i}=N.useContext(ji);return i?vR():oR()}function oR(){At(Du(),"useNavigate() may be used only in the context of a <Router> component.");let i=N.useContext($o),{basename:e,navigator:n}=N.useContext(Er),{matches:s}=N.useContext(ji),{pathname:o}=qs(),u=JSON.stringify(LT(s)),h=N.useRef(!1);return GT(()=>{h.current=!0}),N.useCallback((m,g={})=>{if(Mr(h.current,FT),!h.current)return;if(typeof m=="number"){n.go(m);return}let _=UT(m,JSON.parse(u),o,g.relative==="path");i==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Vi([e,_.pathname])),(g.replace?n.replace:n.push)(_,g.state,g)},[e,n,u,o,i])}N.createContext(null);function Nu(i,{relative:e}={}){let{matches:n}=N.useContext(ji),{pathname:s}=qs(),o=JSON.stringify(LT(n));return N.useMemo(()=>UT(i,JSON.parse(o),s,e==="path"),[i,o,s,e])}function lR(i,e){return KT(i,e)}function KT(i,e,n,s,o){At(Du(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:u}=N.useContext(Er),{matches:h}=N.useContext(ji),p=h[h.length-1],m=p?p.params:{},g=p?p.pathname:"/",_=p?p.pathnameBase:"/",T=p&&p.route;{let Z=T&&T.path||"";QT(g,!T||Z.endsWith("*")||Z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Z}"> to <Route path="${Z==="/"?"*":`${Z}/*`}">.`)}let b=qs(),M;if(e){let Z=typeof e=="string"?Go(e):e;At(_==="/"||Z.pathname?.startsWith(_),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${Z.pathname}" was given in the \`location\` prop.`),M=Z}else M=b;let Y=M.pathname||"/",L=Y;if(_!=="/"){let Z=_.replace(/^\//,"").split("/");L="/"+Y.replace(/^\//,"").split("/").slice(Z.length).join("/")}let H=xT(i,{pathname:L});Mr(T||H!=null,`No routes matched location "${M.pathname}${M.search}${M.hash}" `),Mr(H==null||H[H.length-1].route.element!==void 0||H[H.length-1].route.Component!==void 0||H[H.length-1].route.lazy!==void 0,`Matched leaf route at location "${M.pathname}${M.search}${M.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let Q=dR(H&&H.map(Z=>Object.assign({},Z,{params:Object.assign({},m,Z.params),pathname:Vi([_,u.encodeLocation?u.encodeLocation(Z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathname]),pathnameBase:Z.pathnameBase==="/"?_:Vi([_,u.encodeLocation?u.encodeLocation(Z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Z.pathnameBase])})),h,n,s,o);return e&&Q?N.createElement(Cu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...M},navigationType:"POP"}},Q):Q}function uR(){let i=_R(),e=Xw(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),n=i instanceof Error?i.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},u={padding:"2px 4px",backgroundColor:s},h=null;return console.error("Error handled by React Router default ErrorBoundary:",i),h=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:u},"ErrorBoundary")," or"," ",N.createElement("code",{style:u},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:o},n):null,h)}var cR=N.createElement(uR,null),YT=class extends N.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){let i=this.state.error;if(this.context&&typeof i=="object"&&i&&"digest"in i&&typeof i.digest=="string"){const n=sR(i.digest);n&&(i=n)}let e=i!==void 0?N.createElement(ji.Provider,{value:this.props.routeContext},N.createElement(pm.Provider,{value:i,children:this.props.component})):this.props.children;return this.context?N.createElement(hR,{error:i},e):e}};YT.contextType=Zw;var Tp=new WeakMap;function hR({children:i,error:e}){let{basename:n}=N.useContext(Er);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let s=iR(e.digest);if(s){let o=Tp.get(e);if(o)throw o;let u=BT(s.location,n);if(zT&&!Tp.get(e))if(u.isExternal||s.reloadDocument)window.location.href=u.absoluteURL||u.to;else{const h=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(u.to,{replace:s.replace}));throw Tp.set(e,h),h}return N.createElement("meta",{httpEquiv:"refresh",content:`0;url=${u.absoluteURL||u.to}`})}}return i}function fR({routeContext:i,match:e,children:n}){let s=N.useContext($o);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(ji.Provider,{value:i},n)}function dR(i,e=[],n=null,s=null,o=null){if(i==null){if(!n)return null;if(n.errors)i=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)i=n.matches;else return null}let u=i,h=n?.errors;if(h!=null){let _=u.findIndex(T=>T.route.id&&h?.[T.route.id]!==void 0);At(_>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(h).join(",")}`),u=u.slice(0,Math.min(u.length,_+1))}let p=!1,m=-1;if(n)for(let _=0;_<u.length;_++){let T=u[_];if((T.route.HydrateFallback||T.route.hydrateFallbackElement)&&(m=_),T.route.id){let{loaderData:b,errors:M}=n,Y=T.route.loader&&!b.hasOwnProperty(T.route.id)&&(!M||M[T.route.id]===void 0);if(T.route.lazy||Y){p=!0,m>=0?u=u.slice(0,m+1):u=[u[0]];break}}}let g=n&&s?(_,T)=>{s(_,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:Ww(n.matches),errorInfo:T})}:void 0;return u.reduceRight((_,T,b)=>{let M,Y=!1,L=null,H=null;n&&(M=h&&T.route.id?h[T.route.id]:void 0,L=T.route.errorElement||cR,p&&(m<0&&b===0?(QT("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),Y=!0,H=null):m===b&&(Y=!0,H=T.route.hydrateFallbackElement||null)));let Q=e.concat(u.slice(0,b+1)),Z=()=>{let se;return M?se=L:Y?se=H:T.route.Component?se=N.createElement(T.route.Component,null):T.route.element?se=T.route.element:se=_,N.createElement(fR,{match:T,routeContext:{outlet:_,matches:Q,isDataRoute:n!=null},children:se})};return n&&(T.route.ErrorBoundary||T.route.errorElement||b===0)?N.createElement(YT,{location:n.location,revalidation:n.revalidation,component:L,error:M,children:Z(),routeContext:{outlet:null,matches:Q,isDataRoute:!0},onError:g}):Z()},null)}function mm(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function pR(i){let e=N.useContext($o);return At(e,mm(i)),e}function mR(i){let e=N.useContext(Wh);return At(e,mm(i)),e}function gR(i){let e=N.useContext(ji);return At(e,mm(i)),e}function gm(i){let e=gR(i),n=e.matches[e.matches.length-1];return At(n.route.id,`${i} can only be used on routes that contain a unique "id"`),n.route.id}function yR(){return gm("useRouteId")}function _R(){let i=N.useContext(pm),e=mR("useRouteError"),n=gm("useRouteError");return i!==void 0?i:e.errors?.[n]}function vR(){let{router:i}=pR("useNavigate"),e=gm("useNavigate"),n=N.useRef(!1);return GT(()=>{n.current=!0}),N.useCallback(async(o,u={})=>{Mr(n.current,FT),n.current&&(typeof o=="number"?await i.navigate(o):await i.navigate(o,{fromRouteId:e,...u}))},[i,e])}var Yv={};function QT(i,e,n){!e&&!Yv[i]&&(Yv[i]=!0,Mr(!1,n))}N.memo(ER);function ER({routes:i,future:e,state:n,onError:s}){return KT(i,void 0,n,s,e)}function XT(i){At(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TR({basename:i="/",children:e=null,location:n,navigationType:s="POP",navigator:o,static:u=!1,unstable_useTransitions:h}){At(!Du(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let p=i.replace(/^\/*/,"/"),m=N.useMemo(()=>({basename:p,navigator:o,static:u,unstable_useTransitions:h,future:{}}),[p,o,u,h]);typeof n=="string"&&(n=Go(n));let{pathname:g="/",search:_="",hash:T="",state:b=null,key:M="default"}=n,Y=N.useMemo(()=>{let L=Pi(g,p);return L==null?null:{location:{pathname:L,search:_,hash:T,state:b,key:M},navigationType:s}},[p,g,_,T,b,M,s]);return Mr(Y!=null,`<Router basename="${p}"> is not able to match the URL "${g}${_}${T}" because it does not start with the basename, so the <Router> won't render anything.`),Y==null?null:N.createElement(Er.Provider,{value:m},N.createElement(Cu.Provider,{children:e,value:Y}))}function SR({children:i,location:e}){return lR(zp(i),e)}function zp(i,e=[]){let n=[];return N.Children.forEach(i,(s,o)=>{if(!N.isValidElement(s))return;let u=[...e,o];if(s.type===N.Fragment){n.push.apply(n,zp(s.props.children,u));return}At(s.type===XT,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),At(!s.props.index||!s.props.children,"An index route cannot have child routes.");let h={id:s.props.id||u.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(h.children=zp(s.props.children,u)),n.push(h)}),n}var yh="get",_h="application/x-www-form-urlencoded";function Jh(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function AR(i){return Jh(i)&&i.tagName.toLowerCase()==="button"}function bR(i){return Jh(i)&&i.tagName.toLowerCase()==="form"}function wR(i){return Jh(i)&&i.tagName.toLowerCase()==="input"}function RR(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function IR(i,e){return i.button===0&&(!e||e==="_self")&&!RR(i)}function Bp(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,n)=>{let s=i[n];return e.concat(Array.isArray(s)?s.map(o=>[n,o]):[[n,s]])},[]))}function CR(i,e){let n=Bp(i);return e&&e.forEach((s,o)=>{n.has(o)||e.getAll(o).forEach(u=>{n.append(o,u)})}),n}var lh=null;function DR(){if(lh===null)try{new FormData(document.createElement("form"),0),lh=!1}catch{lh=!0}return lh}var NR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Sp(i){return i!=null&&!NR.has(i)?(Mr(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${_h}"`),null):i}function OR(i,e){let n,s,o,u,h;if(bR(i)){let p=i.getAttribute("action");s=p?Pi(p,e):null,n=i.getAttribute("method")||yh,o=Sp(i.getAttribute("enctype"))||_h,u=new FormData(i)}else if(AR(i)||wR(i)&&(i.type==="submit"||i.type==="image")){let p=i.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=i.getAttribute("formaction")||p.getAttribute("action");if(s=m?Pi(m,e):null,n=i.getAttribute("formmethod")||p.getAttribute("method")||yh,o=Sp(i.getAttribute("formenctype"))||Sp(p.getAttribute("enctype"))||_h,u=new FormData(p,i),!DR()){let{name:g,type:_,value:T}=i;if(_==="image"){let b=g?`${g}.`:"";u.append(`${b}x`,"0"),u.append(`${b}y`,"0")}else g&&u.append(g,T)}}else{if(Jh(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=yh,s=null,o=_h,h=i}return u&&o==="text/plain"&&(h=u,u=void 0),{action:s,method:n.toLowerCase(),encType:o,formData:u,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function ym(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function MR(i,e,n,s){let o=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n?o.pathname.endsWith("/")?o.pathname=`${o.pathname}_.${s}`:o.pathname=`${o.pathname}.${s}`:o.pathname==="/"?o.pathname=`_root.${s}`:e&&Pi(o.pathname,e)==="/"?o.pathname=`${e.replace(/\/$/,"")}/_root.${s}`:o.pathname=`${o.pathname.replace(/\/$/,"")}.${s}`,o}async function VR(i,e){if(i.id in e)return e[i.id];try{let n=await import(i.module);return e[i.id]=n,n}catch(n){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function xR(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function kR(i,e,n){let s=await Promise.all(i.map(async o=>{let u=e.routes[o.route.id];if(u){let h=await VR(u,n);return h.links?h.links():[]}return[]}));return zR(s.flat(1).filter(xR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Qv(i,e,n,s,o,u){let h=(m,g)=>n[g]?m.route.id!==n[g].route.id:!0,p=(m,g)=>n[g].pathname!==m.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==m.params["*"];return u==="assets"?e.filter((m,g)=>h(m,g)||p(m,g)):u==="data"?e.filter((m,g)=>{let _=s.routes[m.route.id];if(!_||!_.hasLoader)return!1;if(h(m,g)||p(m,g))return!0;if(m.route.shouldRevalidate){let T=m.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(i,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function PR(i,e,{includeHydrateFallback:n}={}){return LR(i.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let u=[o.module];return o.clientActionModule&&(u=u.concat(o.clientActionModule)),o.clientLoaderModule&&(u=u.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(u=u.concat(o.hydrateFallbackModule)),o.imports&&(u=u.concat(o.imports)),u}).flat(1))}function LR(i){return[...new Set(i)]}function UR(i){let e={},n=Object.keys(i).sort();for(let s of n)e[s]=i[s];return e}function zR(i,e){let n=new Set;return new Set(e),i.reduce((s,o)=>{let u=JSON.stringify(UR(o));return n.has(u)||(n.add(u),s.push({key:u,link:o})),s},[])}function WT(){let i=N.useContext($o);return ym(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function BR(){let i=N.useContext(Wh);return ym(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var _m=N.createContext(void 0);_m.displayName="FrameworkContext";function JT(){let i=N.useContext(_m);return ym(i,"You must render this element inside a <HydratedRouter> element"),i}function jR(i,e){let n=N.useContext(_m),[s,o]=N.useState(!1),[u,h]=N.useState(!1),{onFocus:p,onBlur:m,onMouseEnter:g,onMouseLeave:_,onTouchStart:T}=e,b=N.useRef(null);N.useEffect(()=>{if(i==="render"&&h(!0),i==="viewport"){let L=Q=>{Q.forEach(Z=>{h(Z.isIntersecting)})},H=new IntersectionObserver(L,{threshold:.5});return b.current&&H.observe(b.current),()=>{H.disconnect()}}},[i]),N.useEffect(()=>{if(s){let L=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(L)}}},[s]);let M=()=>{o(!0)},Y=()=>{o(!1),h(!1)};return n?i!=="intent"?[u,b,{}]:[u,b,{onFocus:tu(p,M),onBlur:tu(m,Y),onMouseEnter:tu(g,M),onMouseLeave:tu(_,Y),onTouchStart:tu(T,M)}]:[!1,b,{}]}function tu(i,e){return n=>{i&&i(n),n.defaultPrevented||e(n)}}function qR({page:i,...e}){let{router:n}=WT(),s=N.useMemo(()=>xT(n.routes,i,n.basename),[n.routes,i,n.basename]);return s?N.createElement(FR,{page:i,matches:s,...e}):null}function HR(i){let{manifest:e,routeModules:n}=JT(),[s,o]=N.useState([]);return N.useEffect(()=>{let u=!1;return kR(i,e,n).then(h=>{u||o(h)}),()=>{u=!0}},[i,e,n]),s}function FR({page:i,matches:e,...n}){let s=qs(),{future:o,manifest:u,routeModules:h}=JT(),{basename:p}=WT(),{loaderData:m,matches:g}=BR(),_=N.useMemo(()=>Qv(i,e,g,u,s,"data"),[i,e,g,u,s]),T=N.useMemo(()=>Qv(i,e,g,u,s,"assets"),[i,e,g,u,s]),b=N.useMemo(()=>{if(i===s.pathname+s.search+s.hash)return[];let L=new Set,H=!1;if(e.forEach(Z=>{let se=u.routes[Z.route.id];!se||!se.hasLoader||(!_.some(_e=>_e.route.id===Z.route.id)&&Z.route.id in m&&h[Z.route.id]?.shouldRevalidate||se.hasClientLoader?H=!0:L.add(Z.route.id))}),L.size===0)return[];let Q=MR(i,p,o.unstable_trailingSlashAwareDataRequests,"data");return H&&L.size>0&&Q.searchParams.set("_routes",e.filter(Z=>L.has(Z.route.id)).map(Z=>Z.route.id).join(",")),[Q.pathname+Q.search]},[p,o.unstable_trailingSlashAwareDataRequests,m,s,u,_,e,i,h]),M=N.useMemo(()=>PR(T,u),[T,u]),Y=HR(T);return N.createElement(N.Fragment,null,b.map(L=>N.createElement("link",{key:L,rel:"prefetch",as:"fetch",href:L,...n})),M.map(L=>N.createElement("link",{key:L,rel:"modulepreload",href:L,...n})),Y.map(({key:L,link:H})=>N.createElement("link",{key:L,nonce:n.nonce,...H,crossOrigin:H.crossOrigin??n.crossOrigin})))}function GR(...i){return e=>{i.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var $R=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{$R&&(window.__reactRouterVersion="7.13.0")}catch{}function KR({basename:i,children:e,unstable_useTransitions:n,window:s}){let o=N.useRef();o.current==null&&(o.current=Rw({window:s,v5Compat:!0}));let u=o.current,[h,p]=N.useState({action:u.action,location:u.location}),m=N.useCallback(g=>{n===!1?p(g):N.startTransition(()=>p(g))},[n]);return N.useLayoutEffect(()=>u.listen(m),[u,m]),N.createElement(TR,{basename:i,children:e,location:h.location,navigationType:h.action,navigator:u,unstable_useTransitions:n})}var ZT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,e0=N.forwardRef(function({onClick:e,discover:n="render",prefetch:s="none",relative:o,reloadDocument:u,replace:h,state:p,target:m,to:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:b,...M},Y){let{basename:L,unstable_useTransitions:H}=N.useContext(Er),Q=typeof g=="string"&&ZT.test(g),Z=BT(g,L);g=Z.to;let se=aR(g,{relative:o}),[_e,ce,ae]=jR(s,M),I=WR(g,{replace:h,state:p,target:m,preventScrollReset:_,relative:o,viewTransition:T,unstable_defaultShouldRevalidate:b,unstable_useTransitions:H});function w(x){e&&e(x),x.defaultPrevented||I(x)}let C=N.createElement("a",{...M,...ae,href:Z.absoluteURL||se,onClick:Z.isExternal||u?e:w,ref:GR(Y,ce),target:m,"data-discover":!Q&&n==="render"?"true":void 0});return _e&&!Q?N.createElement(N.Fragment,null,C,N.createElement(qR,{page:se})):C});e0.displayName="Link";var YR=N.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:s="",end:o=!1,style:u,to:h,viewTransition:p,children:m,...g},_){let T=Nu(h,{relative:g.relative}),b=qs(),M=N.useContext(Wh),{navigator:Y,basename:L}=N.useContext(Er),H=M!=null&&r1(T)&&p===!0,Q=Y.encodeLocation?Y.encodeLocation(T).pathname:T.pathname,Z=b.pathname,se=M&&M.navigation&&M.navigation.location?M.navigation.location.pathname:null;n||(Z=Z.toLowerCase(),se=se?se.toLowerCase():null,Q=Q.toLowerCase()),se&&L&&(se=Pi(se,L)||se);const _e=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let ce=Z===Q||!o&&Z.startsWith(Q)&&Z.charAt(_e)==="/",ae=se!=null&&(se===Q||!o&&se.startsWith(Q)&&se.charAt(Q.length)==="/"),I={isActive:ce,isPending:ae,isTransitioning:H},w=ce?e:void 0,C;typeof s=="function"?C=s(I):C=[s,ce?"active":null,ae?"pending":null,H?"transitioning":null].filter(Boolean).join(" ");let x=typeof u=="function"?u(I):u;return N.createElement(e0,{...g,"aria-current":w,className:C,ref:_,style:x,to:h,viewTransition:p},typeof m=="function"?m(I):m)});YR.displayName="NavLink";var QR=N.forwardRef(({discover:i="render",fetcherKey:e,navigate:n,reloadDocument:s,replace:o,state:u,method:h=yh,action:p,onSubmit:m,relative:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:b,...M},Y)=>{let{unstable_useTransitions:L}=N.useContext(Er),H=t1(),Q=n1(p,{relative:g}),Z=h.toLowerCase()==="get"?"get":"post",se=typeof p=="string"&&ZT.test(p),_e=ce=>{if(m&&m(ce),ce.defaultPrevented)return;ce.preventDefault();let ae=ce.nativeEvent.submitter,I=ae?.getAttribute("formmethod")||h,w=()=>H(ae||ce.currentTarget,{fetcherKey:e,method:I,navigate:n,replace:o,state:u,relative:g,preventScrollReset:_,viewTransition:T,unstable_defaultShouldRevalidate:b});L&&n!==!1?N.startTransition(()=>w()):w()};return N.createElement("form",{ref:Y,method:Z,action:Q,onSubmit:s?m:_e,...M,"data-discover":!se&&i==="render"?"true":void 0})});QR.displayName="Form";function XR(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t0(i){let e=N.useContext($o);return At(e,XR(i)),e}function WR(i,{target:e,replace:n,state:s,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p,unstable_useTransitions:m}={}){let g=$T(),_=qs(),T=Nu(i,{relative:u});return N.useCallback(b=>{if(IR(b,e)){b.preventDefault();let M=n!==void 0?n:gu(_)===gu(T),Y=()=>g(i,{replace:M,state:s,preventScrollReset:o,relative:u,viewTransition:h,unstable_defaultShouldRevalidate:p});m?N.startTransition(()=>Y()):Y()}},[_,g,T,n,s,e,i,o,u,h,p,m])}function JR(i){Mr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=N.useRef(Bp(i)),n=N.useRef(!1),s=qs(),o=N.useMemo(()=>CR(s.search,n.current?null:e.current),[s.search]),u=$T(),h=N.useCallback((p,m)=>{const g=Bp(typeof p=="function"?p(new URLSearchParams(o)):p);n.current=!0,u("?"+g,m)},[u,o]);return[o,h]}var ZR=0,e1=()=>`__${String(++ZR)}__`;function t1(){let{router:i}=t0("useSubmit"),{basename:e}=N.useContext(Er),n=yR(),s=i.fetch,o=i.navigate;return N.useCallback(async(u,h={})=>{let{action:p,method:m,encType:g,formData:_,body:T}=OR(u,e);if(h.navigate===!1){let b=h.fetcherKey||e1();await s(b,n,h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:_,body:T,formMethod:h.method||m,formEncType:h.encType||g,flushSync:h.flushSync})}else await o(h.action||p,{unstable_defaultShouldRevalidate:h.unstable_defaultShouldRevalidate,preventScrollReset:h.preventScrollReset,formData:_,body:T,formMethod:h.method||m,formEncType:h.encType||g,replace:h.replace,state:h.state,fromRouteId:n,flushSync:h.flushSync,viewTransition:h.viewTransition})},[s,o,e,n])}function n1(i,{relative:e}={}){let{basename:n}=N.useContext(Er),s=N.useContext(ji);At(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),u={...Nu(i||".",{relative:e})},h=qs();if(i==null){u.search=h.search;let p=new URLSearchParams(u.search),m=p.getAll("index");if(m.some(_=>_==="")){p.delete("index"),m.filter(T=>T).forEach(T=>p.append("index",T));let _=p.toString();u.search=_?`?${_}`:""}}return(!i||i===".")&&o.route.index&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(u.pathname=u.pathname==="/"?n:Vi([n,u.pathname])),gu(u)}function r1(i,{relative:e}={}){let n=N.useContext(qT);At(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=t0("useViewTransitionState"),o=Nu(i,{relative:e});if(!n.isTransitioning)return!1;let u=Pi(n.currentLocation.pathname,s)||n.currentLocation.pathname,h=Pi(n.nextLocation.pathname,s)||n.nextLocation.pathname;return Dh(o.pathname,h)!=null||Dh(o.pathname,u)!=null}const i1=()=>{};var Xv={};const n0=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},s1=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=i[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=i[n++],h=i[n++],p=i[n++],m=((o&7)<<18|(u&63)<<12|(h&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(m>>10)),e[s++]=String.fromCharCode(56320+(m&1023))}else{const u=i[n++],h=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return e.join("")},r0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const u=i[o],h=o+1<i.length,p=h?i[o+1]:0,m=o+2<i.length,g=m?i[o+2]:0,_=u>>2,T=(u&3)<<4|p>>4;let b=(p&15)<<2|g>>6,M=g&63;m||(M=64,h||(b=64)),s.push(n[_],n[T],n[b],n[M])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(n0(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):s1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const u=n[i.charAt(o++)],p=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const T=o<i.length?n[i.charAt(o)]:64;if(++o,u==null||p==null||g==null||T==null)throw new a1;const b=u<<2|p>>4;if(s.push(b),g!==64){const M=p<<4&240|g>>2;if(s.push(M),T!==64){const Y=g<<6&192|T;s.push(Y)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class a1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const o1=function(i){const e=n0(i);return r0.encodeByteArray(e,!0)},Nh=function(i){return o1(i).replace(/\./g,"")},i0=function(i){try{return r0.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const u1=()=>l1().__FIREBASE_DEFAULTS__,c1=()=>{if(typeof process>"u"||typeof Xv>"u")return;const i=Xv.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},h1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&i0(i[1]);return e&&JSON.parse(e)},Zh=()=>{try{return i1()||u1()||c1()||h1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},s0=i=>Zh()?.emulatorHosts?.[i],f1=i=>{const e=s0(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},a0=()=>Zh()?.config,o0=i=>Zh()?.[`_${i}`];class d1{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function Ko(i){try{return(i.startsWith("http://")||i.startsWith("https://")?new URL(i).hostname:i).endsWith(".cloudworkstations.dev")}catch{return!1}}async function l0(i){return(await fetch(i,{credentials:"include"})).ok}function p1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,u=i.sub||i.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...i};return[Nh(JSON.stringify(n)),Nh(JSON.stringify(h)),""].join(".")}const uu={};function m1(){const i={prod:[],emulator:[]};for(const e of Object.keys(uu))uu[e]?i.emulator.push(e):i.prod.push(e);return i}function g1(i){let e=document.getElementById(i),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",i),n=!0),{created:n,element:e}}let Wv=!1;function u0(i,e){if(typeof window>"u"||typeof document>"u"||!Ko(window.location.host)||uu[i]===e||uu[i]||Wv)return;uu[i]=e;function n(b){return`__firebase__banner__${b}`}const s="__firebase__banner",u=m1().prod.length>0;function h(){const b=document.getElementById(s);b&&b.remove()}function p(b){b.style.display="flex",b.style.background="#7faaf0",b.style.position="fixed",b.style.bottom="5px",b.style.left="5px",b.style.padding=".5em",b.style.borderRadius="5px",b.style.alignItems="center"}function m(b,M){b.setAttribute("width","24"),b.setAttribute("id",M),b.setAttribute("height","24"),b.setAttribute("viewBox","0 0 24 24"),b.setAttribute("fill","none"),b.style.marginLeft="-6px"}function g(){const b=document.createElement("span");return b.style.cursor="pointer",b.style.marginLeft="16px",b.style.fontSize="24px",b.innerHTML=" &times;",b.onclick=()=>{Wv=!0,h()},b}function _(b,M){b.setAttribute("id",M),b.innerText="Learn more",b.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",b.setAttribute("target","__blank"),b.style.paddingLeft="5px",b.style.textDecoration="underline"}function T(){const b=g1(s),M=n("text"),Y=document.getElementById(M)||document.createElement("span"),L=n("learnmore"),H=document.getElementById(L)||document.createElement("a"),Q=n("preprendIcon"),Z=document.getElementById(Q)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(b.created){const se=b.element;p(se),_(H,L);const _e=g();m(Z,Q),se.append(Z,Y,H,_e),document.body.appendChild(se)}u?(Y.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,Y.innerText="Preview backend running in this workspace."),Y.setAttribute("id",M)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}function bn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function y1(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(bn())}function _1(){const i=Zh()?.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function v1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function E1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function T1(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function S1(){const i=bn();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function A1(){return!_1()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function b1(){try{return typeof indexedDB=="object"}catch{return!1}}function w1(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const R1="FirebaseError";class qi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=R1,Object.setPrototypeOf(this,qi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],h=u?I1(u,s):"Error",p=`${this.serviceName}: ${h} (${o}).`;return new qi(o,p,s)}}function I1(i,e){return i.replace(C1,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const C1=/\{\$([^}]+)}/g;function D1(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function Ra(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=i[o],h=e[o];if(Jv(u)&&Jv(h)){if(!Ra(u,h))return!1}else if(u!==h)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function Jv(i){return i!==null&&typeof i=="object"}function Mu(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ru(i){const e={};return i.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function iu(i){const e=i.indexOf("?");if(!e)return"";const n=i.indexOf("#",e);return i.substring(e,n>0?n:void 0)}function N1(i,e){const n=new O1(i,e);return n.subscribe.bind(n)}class O1{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");M1(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Ap),o.error===void 0&&(o.error=Ap),o.complete===void 0&&(o.complete=Ap);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function M1(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Ap(){}function fn(i){return i&&i._delegate?i._delegate:i}class Ia{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Aa="[DEFAULT]";class V1{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new d1;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(k1(e))try{this.getOrInitializeService({instanceIdentifier:Aa})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Aa){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Aa){return this.instances.has(e)}getOptions(e=Aa){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,h]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);s===p&&h.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:x1(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Aa){return this.component?this.component.multipleInstances?e:Aa:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function x1(i){return i===Aa?void 0:i}function k1(i){return i.instantiationMode==="EAGER"}class P1{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new V1(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Fe;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(Fe||(Fe={}));const L1={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},U1=Fe.INFO,z1={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},B1=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=z1[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vm{constructor(e){this.name=e,this._logLevel=U1,this._logHandler=B1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?L1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const j1=(i,e)=>e.some(n=>i instanceof n);let Zv,eE;function q1(){return Zv||(Zv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function H1(){return eE||(eE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const c0=new WeakMap,jp=new WeakMap,h0=new WeakMap,bp=new WeakMap,Em=new WeakMap;function F1(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",u),i.removeEventListener("error",h)},u=()=>{n(Ns(i.result)),o()},h=()=>{s(i.error),o()};i.addEventListener("success",u),i.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&c0.set(n,i)}).catch(()=>{}),Em.set(e,i),e}function G1(i){if(jp.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",u),i.removeEventListener("error",h),i.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",u),i.addEventListener("error",h),i.addEventListener("abort",h)});jp.set(i,e)}let qp={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return jp.get(i);if(e==="objectStoreNames")return i.objectStoreNames||h0.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ns(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function $1(i){qp=i(qp)}function K1(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(wp(this),e,...n);return h0.set(s,e.sort?e.sort():[e]),Ns(s)}:H1().includes(i)?function(...e){return i.apply(wp(this),e),Ns(c0.get(this))}:function(...e){return Ns(i.apply(wp(this),e))}}function Y1(i){return typeof i=="function"?K1(i):(i instanceof IDBTransaction&&G1(i),j1(i,q1())?new Proxy(i,qp):i)}function Ns(i){if(i instanceof IDBRequest)return F1(i);if(bp.has(i))return bp.get(i);const e=Y1(i);return e!==i&&(bp.set(i,e),Em.set(e,i)),e}const wp=i=>Em.get(i);function Q1(i,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const h=indexedDB.open(i,e),p=Ns(h);return s&&h.addEventListener("upgradeneeded",m=>{s(Ns(h.result),m.oldVersion,m.newVersion,Ns(h.transaction),m)}),n&&h.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),p.then(m=>{u&&m.addEventListener("close",()=>u()),o&&m.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),p}const X1=["get","getKey","getAll","getAllKeys","count"],W1=["put","add","delete","clear"],Rp=new Map;function tE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Rp.get(e))return Rp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=W1.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||X1.includes(n)))return;const u=async function(h,...p){const m=this.transaction(h,o?"readwrite":"readonly");let g=m.store;return s&&(g=g.index(p.shift())),(await Promise.all([g[n](...p),o&&m.done]))[0]};return Rp.set(e,u),u}$1(i=>({...i,get:(e,n,s)=>tE(e,n)||i.get(e,n,s),has:(e,n)=>!!tE(e,n)||i.has(e,n)}));class J1{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Z1(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Z1(i){return i.getComponent()?.type==="VERSION"}const Hp="@firebase/app",nE="0.14.7";const Li=new vm("@firebase/app"),eI="@firebase/app-compat",tI="@firebase/analytics-compat",nI="@firebase/analytics",rI="@firebase/app-check-compat",iI="@firebase/app-check",sI="@firebase/auth",aI="@firebase/auth-compat",oI="@firebase/database",lI="@firebase/data-connect",uI="@firebase/database-compat",cI="@firebase/functions",hI="@firebase/functions-compat",fI="@firebase/installations",dI="@firebase/installations-compat",pI="@firebase/messaging",mI="@firebase/messaging-compat",gI="@firebase/performance",yI="@firebase/performance-compat",_I="@firebase/remote-config",vI="@firebase/remote-config-compat",EI="@firebase/storage",TI="@firebase/storage-compat",SI="@firebase/firestore",AI="@firebase/ai",bI="@firebase/firestore-compat",wI="firebase",RI="12.8.0";const Fp="[DEFAULT]",II={[Hp]:"fire-core",[eI]:"fire-core-compat",[nI]:"fire-analytics",[tI]:"fire-analytics-compat",[iI]:"fire-app-check",[rI]:"fire-app-check-compat",[sI]:"fire-auth",[aI]:"fire-auth-compat",[oI]:"fire-rtdb",[lI]:"fire-data-connect",[uI]:"fire-rtdb-compat",[cI]:"fire-fn",[hI]:"fire-fn-compat",[fI]:"fire-iid",[dI]:"fire-iid-compat",[pI]:"fire-fcm",[mI]:"fire-fcm-compat",[gI]:"fire-perf",[yI]:"fire-perf-compat",[_I]:"fire-rc",[vI]:"fire-rc-compat",[EI]:"fire-gcs",[TI]:"fire-gcs-compat",[SI]:"fire-fst",[bI]:"fire-fst-compat",[AI]:"fire-vertex","fire-js":"fire-js",[wI]:"fire-js-all"};const yu=new Map,CI=new Map,Gp=new Map;function rE(i,e){try{i.container.addComponent(e)}catch(n){Li.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Uo(i){const e=i.name;if(Gp.has(e))return Li.debug(`There were multiple attempts to register component ${e}.`),!1;Gp.set(e,i);for(const n of yu.values())rE(n,i);for(const n of CI.values())rE(n,i);return!0}function Tm(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function yr(i){return i==null?!1:i.settings!==void 0}const DI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Os=new Ou("app","Firebase",DI);class NI{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Os.create("app-deleted",{appName:this._name})}}const Yo=RI;function f0(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s={name:Fp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Os.create("bad-app-name",{appName:String(o)});if(n||(n=a0()),!n)throw Os.create("no-options");const u=yu.get(o);if(u){if(Ra(n,u.options)&&Ra(s,u.config))return u;throw Os.create("duplicate-app",{appName:o})}const h=new P1(o);for(const m of Gp.values())h.addComponent(m);const p=new NI(n,s,h);return yu.set(o,p),p}function d0(i=Fp){const e=yu.get(i);if(!e&&i===Fp&&a0())return f0();if(!e)throw Os.create("no-app",{appName:i});return e}function iE(){return Array.from(yu.values())}function Ms(i,e,n){let s=II[i]??i;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Li.warn(h.join(" "));return}Uo(new Ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const OI="firebase-heartbeat-database",MI=1,_u="firebase-heartbeat-store";let Ip=null;function p0(){return Ip||(Ip=Q1(OI,MI,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(_u)}catch(n){console.warn(n)}}}}).catch(i=>{throw Os.create("idb-open",{originalErrorMessage:i.message})})),Ip}async function VI(i){try{const n=(await p0()).transaction(_u),s=await n.objectStore(_u).get(m0(i));return await n.done,s}catch(e){if(e instanceof qi)Li.warn(e.message);else{const n=Os.create("idb-get",{originalErrorMessage:e?.message});Li.warn(n.message)}}}async function sE(i,e){try{const s=(await p0()).transaction(_u,"readwrite");await s.objectStore(_u).put(e,m0(i)),await s.done}catch(n){if(n instanceof qi)Li.warn(n.message);else{const s=Os.create("idb-set",{originalErrorMessage:n?.message});Li.warn(s.message)}}}function m0(i){return`${i.name}!${i.options.appId}`}const xI=1024,kI=30;class PI{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new UI(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=aE();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>kI){const o=zI(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Li.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=aE(),{heartbeatsToSend:n,unsentEntries:s}=LI(this._heartbeatsCache.heartbeats),o=Nh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Li.warn(e),""}}}function aE(){return new Date().toISOString().substring(0,10)}function LI(i,e=xI){const n=[];let s=i.slice();for(const o of i){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),oE(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),oE(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class UI{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return b1()?w1().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await VI(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return sE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return sE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oE(i){return Nh(JSON.stringify({version:2,heartbeats:i})).length}function zI(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}function BI(i){Uo(new Ia("platform-logger",e=>new J1(e),"PRIVATE")),Uo(new Ia("heartbeat",e=>new PI(e),"PRIVATE")),Ms(Hp,nE,i),Ms(Hp,nE,"esm2020"),Ms("fire-js","")}BI("");function g0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const jI=g0,y0=new Ou("auth","Firebase",g0());const Oh=new vm("@firebase/auth");function qI(i,...e){Oh.logLevel<=Fe.WARN&&Oh.warn(`Auth (${Yo}): ${i}`,...e)}function vh(i,...e){Oh.logLevel<=Fe.ERROR&&Oh.error(`Auth (${Yo}): ${i}`,...e)}function Vr(i,...e){throw Sm(i,...e)}function ni(i,...e){return Sm(i,...e)}function _0(i,e,n){const s={...jI(),[e]:n};return new Ou("auth","Firebase",s).create(e,{appName:i.name})}function xi(i){return _0(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Sm(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return y0.create(i,...e)}function be(i,e,...n){if(!i)throw Sm(e,...n)}function Oi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw vh(e),new Error(e)}function Ui(i,e){i||Oi(e)}function $p(){return typeof self<"u"&&self.location?.href||""}function HI(){return lE()==="http:"||lE()==="https:"}function lE(){return typeof self<"u"&&self.location?.protocol||null}function FI(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(HI()||E1()||"connection"in navigator)?navigator.onLine:!0}function GI(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}class Vu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ui(n>e,"Short delay should be less than long delay!"),this.isMobile=y1()||T1()}get(){return FI()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Am(i,e){Ui(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class v0{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const $I={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const KI=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],YI=new Vu(3e4,6e4);function Hs(i,e){return i.tenantId&&!e.tenantId?{...e,tenantId:i.tenantId}:e}async function Fs(i,e,n,s,o={}){return E0(i,o,async()=>{let u={},h={};s&&(e==="GET"?h=s:u={body:JSON.stringify(s)});const p=Mu({key:i.config.apiKey,...h}).slice(1),m=await i._getAdditionalHeaders();m["Content-Type"]="application/json",i.languageCode&&(m["X-Firebase-Locale"]=i.languageCode);const g={method:e,headers:m,...u};return v1()||(g.referrerPolicy="no-referrer"),i.emulatorConfig&&Ko(i.emulatorConfig.host)&&(g.credentials="include"),v0.fetch()(await T0(i,i.config.apiHost,n,p),g)})}async function E0(i,e,n){i._canInitEmulator=!1;const s={...$I,...e};try{const o=new XI(i),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const h=await u.json();if("needConfirmation"in h)throw uh(i,"account-exists-with-different-credential",h);if(u.ok&&!("errorMessage"in h))return h;{const p=u.ok?h.errorMessage:h.error.message,[m,g]=p.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw uh(i,"credential-already-in-use",h);if(m==="EMAIL_EXISTS")throw uh(i,"email-already-in-use",h);if(m==="USER_DISABLED")throw uh(i,"user-disabled",h);const _=s[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw _0(i,_,g);Vr(i,_)}}catch(o){if(o instanceof qi)throw o;Vr(i,"network-request-failed",{message:String(o)})}}async function xu(i,e,n,s,o={}){const u=await Fs(i,e,n,s,o);return"mfaPendingCredential"in u&&Vr(i,"multi-factor-auth-required",{_serverResponse:u}),u}async function T0(i,e,n,s){const o=`${e}${n}?${s}`,u=i,h=u.config.emulator?Am(i.config,o):`${i.config.apiScheme}://${o}`;return KI.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(h).toString():h}function QI(i){switch(i){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XI{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(ni(this.auth,"network-request-failed")),YI.get())})}}function uh(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=ni(i,e,s);return o.customData._tokenResponse=n,o}function uE(i){return i!==void 0&&i.enterprise!==void 0}class WI{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QI(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JI(i,e){return Fs(i,"GET","/v2/recaptchaConfig",Hs(i,e))}async function ZI(i,e){return Fs(i,"POST","/v1/accounts:delete",e)}async function Mh(i,e){return Fs(i,"POST","/v1/accounts:lookup",e)}function cu(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eC(i,e=!1){const n=fn(i),s=await n.getIdToken(e),o=bm(s);be(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,h=u?.sign_in_provider;return{claims:o,token:s,authTime:cu(Cp(o.auth_time)),issuedAtTime:cu(Cp(o.iat)),expirationTime:cu(Cp(o.exp)),signInProvider:h||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Cp(i){return Number(i)*1e3}function bm(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return vh("JWT malformed, contained fewer than 3 sections"),null;try{const o=i0(n);return o?JSON.parse(o):(vh("Failed to decode base64 JWT payload"),null)}catch(o){return vh("Caught error parsing JWT payload as JSON",o?.toString()),null}}function cE(i){const e=bm(i);return be(e,"internal-error"),be(typeof e.exp<"u","internal-error"),be(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function vu(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof qi&&tC(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function tC({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}class nC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class Kp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=cu(this.lastLoginAt),this.creationTime=cu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Vh(i){const e=i.auth,n=await i.getIdToken(),s=await vu(i,Mh(e,{idToken:n}));be(s?.users.length,e,"internal-error");const o=s.users[0];i._notifyReloadListener(o);const u=o.providerUserInfo?.length?S0(o.providerUserInfo):[],h=iC(i.providerData,u),p=i.isAnonymous,m=!(i.email&&o.passwordHash)&&!h?.length,g=p?m:!1,_={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Kp(o.createdAt,o.lastLoginAt),isAnonymous:g};Object.assign(i,_)}async function rC(i){const e=fn(i);await Vh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iC(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function S0(i){return i.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function sC(i,e){const n=await E0(i,{},async()=>{const s=Mu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=i.config,h=await T0(i,o,"/v1/token",`key=${u}`),p=await i._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const m={method:"POST",headers:p,body:s};return i.emulatorConfig&&Ko(i.emulatorConfig.host)&&(m.credentials="include"),v0.fetch()(h,m)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aC(i,e){return Fs(i,"POST","/v2/accounts:revokeToken",Hs(i,e))}class Mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){be(e.idToken,"internal-error"),be(typeof e.idToken<"u","internal-error"),be(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){be(e.length!==0,"internal-error");const n=cE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(be(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await sC(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,h=new Mo;return s&&(be(typeof s=="string","internal-error",{appName:e}),h.refreshToken=s),o&&(be(typeof o=="string","internal-error",{appName:e}),h.accessToken=o),u&&(be(typeof u=="number","internal-error",{appName:e}),h.expirationTime=u),h}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mo,this.toJSON())}_performRefresh(){return Oi("not implemented")}}function bs(i,e){be(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Nr{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new nC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Kp(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await vu(this,this.stsTokenManager.getToken(this.auth,e));return be(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eC(this,e)}reload(){return rC(this)}_assign(e){this!==e&&(be(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){be(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Vh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yr(this.auth.app))return Promise.reject(xi(this.auth));const e=await this.getIdToken();return await vu(this,ZI(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,h=n.photoURL??void 0,p=n.tenantId??void 0,m=n._redirectEventId??void 0,g=n.createdAt??void 0,_=n.lastLoginAt??void 0,{uid:T,emailVerified:b,isAnonymous:M,providerData:Y,stsTokenManager:L}=n;be(T&&L,e,"internal-error");const H=Mo.fromJSON(this.name,L);be(typeof T=="string",e,"internal-error"),bs(s,e.name),bs(o,e.name),be(typeof b=="boolean",e,"internal-error"),be(typeof M=="boolean",e,"internal-error"),bs(u,e.name),bs(h,e.name),bs(p,e.name),bs(m,e.name),bs(g,e.name),bs(_,e.name);const Q=new Nr({uid:T,auth:e,email:o,emailVerified:b,displayName:s,isAnonymous:M,photoURL:h,phoneNumber:u,tenantId:p,stsTokenManager:H,createdAt:g,lastLoginAt:_});return Y&&Array.isArray(Y)&&(Q.providerData=Y.map(Z=>({...Z}))),m&&(Q._redirectEventId=m),Q}static async _fromIdTokenResponse(e,n,s=!1){const o=new Mo;o.updateFromServerResponse(n);const u=new Nr({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Vh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];be(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?S0(o.providerUserInfo):[],h=!(o.email&&o.passwordHash)&&!u?.length,p=new Mo;p.updateFromIdToken(s);const m=new Nr({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:h}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new Kp(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(m,g),m}}const hE=new Map;function Mi(i){Ui(i instanceof Function,"Expected a class definition");let e=hE.get(i);return e?(Ui(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,hE.set(i,e),e)}class A0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}A0.type="NONE";const fE=A0;function Eh(i,e,n){return`firebase:${i}:${e}:${n}`}class Vo{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=Eh(this.userKey,o.apiKey,u),this.fullPersistenceKey=Eh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Mh(this.auth,{idToken:e}).catch(()=>{});return n?Nr._fromGetAccountInfoResponse(this.auth,n,e):null}return Nr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Vo(Mi(fE),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let u=o[0]||Mi(fE);const h=Eh(s,e.config.apiKey,e.name);let p=null;for(const g of n)try{const _=await g._get(h);if(_){let T;if(typeof _=="string"){const b=await Mh(e,{idToken:_}).catch(()=>{});if(!b)break;T=await Nr._fromGetAccountInfoResponse(e,b,_)}else T=Nr._fromJSON(e,_);g!==u&&(p=T),u=g;break}}catch{}const m=o.filter(g=>g._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new Vo(u,e,s):(u=m[0],p&&await u._set(h,p.toJSON()),await Promise.all(n.map(async g=>{if(g!==u)try{await g._remove(h)}catch{}})),new Vo(u,e,s))}}function dE(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(I0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(b0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(D0(e))return"Blackberry";if(N0(e))return"Webos";if(w0(e))return"Safari";if((e.includes("chrome/")||R0(e))&&!e.includes("edge/"))return"Chrome";if(C0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if(s?.length===2)return s[1]}return"Other"}function b0(i=bn()){return/firefox\//i.test(i)}function w0(i=bn()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function R0(i=bn()){return/crios\//i.test(i)}function I0(i=bn()){return/iemobile/i.test(i)}function C0(i=bn()){return/android/i.test(i)}function D0(i=bn()){return/blackberry/i.test(i)}function N0(i=bn()){return/webos/i.test(i)}function wm(i=bn()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function oC(i=bn()){return wm(i)&&!!window.navigator?.standalone}function lC(){return S1()&&document.documentMode===10}function O0(i=bn()){return wm(i)||C0(i)||N0(i)||D0(i)||/windows phone/i.test(i)||I0(i)}function M0(i,e=[]){let n;switch(i){case"Browser":n=dE(bn());break;case"Worker":n=`${dE(bn())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Yo}/${s}`}class uC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((h,p)=>{try{const m=e(u);h(m)}catch(m){p(m)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function cC(i,e={}){return Fs(i,"GET","/v2/passwordPolicy",Hs(i,e))}const hC=6;class fC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class dC{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pE(this),this.idTokenSubscription=new pE(this),this.beforeStateQueue=new uC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=y0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mi(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await Vo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Mh(this,{idToken:e}),s=await Nr._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(yr(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(h,h))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,h=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===h)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return be(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Vh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=GI()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yr(this.app))return Promise.reject(xi(this));const n=e?fn(e):null;return n&&be(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&be(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yr(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yr(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cC(this),n=new fC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await aC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mi(e)||this._popupRedirectResolver;be(n,this,"argument-error"),this.redirectPersistenceManager=await Vo.create(this,[Mi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let h=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(be(p,this,"internal-error"),p.then(()=>{h||u(this.currentUser)}),typeof n=="function"){const m=e.addObserver(n,s,o);return()=>{h=!0,m()}}else{const m=e.addObserver(n);return()=>{h=!0,m()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return be(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(yr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&qI(`Error while retrieving App Check token: ${e.error}`),e?.token}}function Va(i){return fn(i)}class pE{constructor(e){this.auth=e,this.observer=null,this.addObserver=N1(n=>this.observer=n)}get next(){return be(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ef={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pC(i){ef=i}function V0(i){return ef.loadJS(i)}function mC(){return ef.recaptchaEnterpriseScript}function gC(){return ef.gapiScript}function yC(i){return`__${i}${Math.floor(Math.random()*1e6)}`}class _C{constructor(){this.enterprise=new vC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class vC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const EC="recaptcha-enterprise",x0="NO_RECAPTCHA";class TC{constructor(e){this.type=EC,this.auth=Va(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(h,p)=>{JI(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const g=new WI(m);return u.tenantId==null?u._agentRecaptchaConfig=g:u._tenantRecaptchaConfigs[u.tenantId]=g,h(g.siteKey)}}).catch(m=>{p(m)})})}function o(u,h,p){const m=window.grecaptcha;uE(m)?m.enterprise.ready(()=>{m.enterprise.execute(u,{action:e}).then(g=>{h(g)}).catch(()=>{h(x0)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _C().execute("siteKey",{action:"verify"}):new Promise((u,h)=>{s(this.auth).then(p=>{if(!n&&uE(window.grecaptcha))o(p,u,h);else{if(typeof window>"u"){h(new Error("RecaptchaVerifier is only supported in browser"));return}let m=mC();m.length!==0&&(m+=p),V0(m).then(()=>{o(p,u,h)}).catch(g=>{h(g)})}}).catch(p=>{h(p)})})}}async function mE(i,e,n,s=!1,o=!1){const u=new TC(i);let h;if(o)h=x0;else try{h=await u.verify(n)}catch{h=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const m=p.phoneEnrollmentInfo.phoneNumber,g=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:m,recaptchaToken:g,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const m=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:m,captchaResponse:h,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:h}):Object.assign(p,{captchaResponse:h}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function Yp(i,e,n,s,o){if(i._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await mE(i,e,n,n==="getOobCode");return s(i,u)}else return s(i,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const h=await mE(i,e,n,n==="getOobCode");return s(i,h)}else return Promise.reject(u)})}function SC(i,e){const n=Tm(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(Ra(u,e??{}))return o;Vr(o,"already-initialized")}return n.initialize({options:e})}function AC(i,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(Mi);e?.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e?.popupRedirectResolver)}function bC(i,e,n){const s=Va(i);be(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=k0(e),{host:h,port:p}=wC(e),m=p===null?"":`:${p}`,g={url:`${u}//${h}${m}/`},_=Object.freeze({host:h,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){be(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),be(Ra(g,s.config.emulator)&&Ra(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,Ko(h)?(l0(`${u}//${h}${m}`),u0("Auth",!0)):RC()}function k0(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function wC(i){const e=k0(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:gE(s.substr(u.length+1))}}else{const[u,h]=s.split(":");return{host:u,port:gE(h)}}}function gE(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function RC(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}class Rm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Oi("not implemented")}_getIdTokenResponse(e){return Oi("not implemented")}_linkToIdToken(e,n){return Oi("not implemented")}_getReauthenticationResolver(e){return Oi("not implemented")}}async function IC(i,e){return Fs(i,"POST","/v1/accounts:signUp",e)}async function CC(i,e){return xu(i,"POST","/v1/accounts:signInWithPassword",Hs(i,e))}async function DC(i,e){return xu(i,"POST","/v1/accounts:signInWithEmailLink",Hs(i,e))}async function NC(i,e){return xu(i,"POST","/v1/accounts:signInWithEmailLink",Hs(i,e))}class Eu extends Rm{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new Eu(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new Eu(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,n,"signInWithPassword",CC);case"emailLink":return DC(e,{email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yp(e,s,"signUpPassword",IC);case"emailLink":return NC(e,{idToken:n,email:this._email,oobCode:this._password});default:Vr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function xo(i,e){return xu(i,"POST","/v1/accounts:signInWithIdp",Hs(i,e))}const OC="http://localhost";class Ca extends Rm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ca(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Vr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const h=new Ca(s,o);return h.idToken=u.idToken||void 0,h.accessToken=u.accessToken||void 0,h.secret=u.secret,h.nonce=u.nonce,h.pendingToken=u.pendingToken||null,h}_getIdTokenResponse(e){const n=this.buildRequest();return xo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,xo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,xo(e,n)}buildRequest(){const e={requestUri:OC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Mu(n)}return e}}function MC(i){switch(i){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VC(i){const e=ru(iu(i)).link,n=e?ru(iu(e)).deep_link_id:null,s=ru(iu(i)).deep_link_id;return(s?ru(iu(s)).link:null)||s||n||e||i}class Im{constructor(e){const n=ru(iu(e)),s=n.apiKey??null,o=n.oobCode??null,u=MC(n.mode??null);be(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=VC(e);try{return new Im(n)}catch{return null}}}class Qo{constructor(){this.providerId=Qo.PROVIDER_ID}static credential(e,n){return Eu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=Im.parseLink(n);return be(s,"argument-error"),Eu._fromEmailAndCode(e,s.code,s.tenantId)}}Qo.PROVIDER_ID="password";Qo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class P0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ku extends P0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ws extends ku{constructor(){super("facebook.com")}static credential(e){return Ca._fromParams({providerId:ws.PROVIDER_ID,signInMethod:ws.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ws.credentialFromTaggedObject(e)}static credentialFromError(e){return ws.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ws.credential(e.oauthAccessToken)}catch{return null}}}ws.FACEBOOK_SIGN_IN_METHOD="facebook.com";ws.PROVIDER_ID="facebook.com";class Rs extends ku{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ca._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Rs.credential(n,s)}catch{return null}}}Rs.GOOGLE_SIGN_IN_METHOD="google.com";Rs.PROVIDER_ID="google.com";class Is extends ku{constructor(){super("github.com")}static credential(e){return Ca._fromParams({providerId:Is.PROVIDER_ID,signInMethod:Is.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Is.credentialFromTaggedObject(e)}static credentialFromError(e){return Is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Is.credential(e.oauthAccessToken)}catch{return null}}}Is.GITHUB_SIGN_IN_METHOD="github.com";Is.PROVIDER_ID="github.com";class Cs extends ku{constructor(){super("twitter.com")}static credential(e,n){return Ca._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Cs.credential(n,s)}catch{return null}}}Cs.TWITTER_SIGN_IN_METHOD="twitter.com";Cs.PROVIDER_ID="twitter.com";async function xC(i,e){return xu(i,"POST","/v1/accounts:signUp",Hs(i,e))}class Da{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await Nr._fromIdTokenResponse(e,s,o),h=yE(s);return new Da({user:u,providerId:h,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=yE(s);return new Da({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function yE(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}class xh extends qi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new xh(e,n,s,o)}}function L0(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(i,u,e,s):u})}async function kC(i,e,n=!1){const s=await vu(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return Da._forOperation(i,"link",s)}async function PC(i,e,n=!1){const{auth:s}=i;if(yr(s.app))return Promise.reject(xi(s));const o="reauthenticate";try{const u=await vu(i,L0(s,o,e,i),n);be(u.idToken,s,"internal-error");const h=bm(u.idToken);be(h,s,"internal-error");const{sub:p}=h;return be(i.uid===p,s,"user-mismatch"),Da._forOperation(i,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&Vr(s,"user-mismatch"),u}}async function U0(i,e,n=!1){if(yr(i.app))return Promise.reject(xi(i));const s="signIn",o=await L0(i,s,e),u=await Da._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(u.user),u}async function LC(i,e){return U0(Va(i),e)}async function z0(i){const e=Va(i);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UC(i,e,n){if(yr(i.app))return Promise.reject(xi(i));const s=Va(i),h=await Yp(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",xC).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&z0(i),m}),p=await Da._fromIdTokenResponse(s,"signIn",h);return await s._updateCurrentUser(p.user),p}function zC(i,e,n){return yr(i.app)?Promise.reject(xi(i)):LC(fn(i),Qo.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&z0(i),s})}function BC(i,e,n,s){return fn(i).onIdTokenChanged(e,n,s)}function jC(i,e,n){return fn(i).beforeAuthStateChanged(e,n)}function qC(i,e,n,s){return fn(i).onAuthStateChanged(e,n,s)}const kh="__sak";class B0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(kh,"1"),this.storage.removeItem(kh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const HC=1e3,FC=10;class j0 extends B0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=O0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((h,p,m)=>{this.notifyListeners(h,m)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const h=this.storage.getItem(s);!n&&this.localCache[s]===h||this.notifyListeners(s,h)},u=this.storage.getItem(s);lC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,FC):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},HC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}j0.type="LOCAL";const GC=j0;class q0 extends B0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}q0.type="SESSION";const H0=q0;function $C(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class tf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new tf(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,h=this.handlersMap[o];if(!h?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(h).map(async g=>g(n.origin,u)),m=await $C(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:m})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}tf.receivers=[];function Cm(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}class KC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,h;return new Promise((p,m)=>{const g=Cm("",20);o.port1.start();const _=setTimeout(()=>{m(new Error("unsupported_event"))},s);h={messageChannel:o,onMessage(T){const b=T;if(b.data.eventId===g)switch(b.data.status){case"ack":clearTimeout(_),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(b.data.response);break;default:clearTimeout(_),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(h),o.port1.addEventListener("message",h.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{h&&this.removeMessageHandler(h)})}}function ri(){return window}function YC(i){ri().location.href=i}function F0(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}async function QC(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XC(){return navigator?.serviceWorker?.controller||null}function WC(){return F0()?self:null}const G0="firebaseLocalStorageDb",JC=1,Ph="firebaseLocalStorage",$0="fbase_key";class Pu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function nf(i,e){return i.transaction([Ph],e?"readwrite":"readonly").objectStore(Ph)}function ZC(){const i=indexedDB.deleteDatabase(G0);return new Pu(i).toPromise()}function Qp(){const i=indexedDB.open(G0,JC);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(Ph,{keyPath:$0})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(Ph)?e(s):(s.close(),await ZC(),e(await Qp()))})})}async function _E(i,e,n){const s=nf(i,!0).put({[$0]:e,value:n});return new Pu(s).toPromise()}async function e2(i,e){const n=nf(i,!1).get(e),s=await new Pu(n).toPromise();return s===void 0?null:s.value}function vE(i,e){const n=nf(i,!0).delete(e);return new Pu(n).toPromise()}const t2=800,n2=3;class K0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Qp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>n2)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return F0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=tf._getInstance(WC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await QC(),!this.activeServiceWorker)return;this.sender=new KC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Qp();return await _E(e,kh,"1"),await vE(e,kh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>_E(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>e2(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=nf(o,!1).getAll();return new Pu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),t2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}K0.type="LOCAL";const r2=K0;new Vu(3e4,6e4);function i2(i,e){return e?Mi(e):(be(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}class Dm extends Rm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return xo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return xo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return xo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function s2(i){return U0(i.auth,new Dm(i),i.bypassAuthState)}function a2(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),PC(n,new Dm(i),i.bypassAuthState)}async function o2(i){const{auth:e,user:n}=i;return be(n,e,"internal-error"),kC(n,new Dm(i),i.bypassAuthState)}class Y0{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:h,type:p}=e;if(h){this.reject(h);return}const m={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(m))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return s2;case"linkViaPopup":case"linkViaRedirect":return o2;case"reauthViaPopup":case"reauthViaRedirect":return a2;default:Vr(this.auth,"internal-error")}}resolve(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ui(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const l2=new Vu(2e3,1e4);class Oo extends Y0{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,Oo.currentPopupAction&&Oo.currentPopupAction.cancel(),Oo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return be(e,this.auth,"internal-error"),e}async onExecution(){Ui(this.filter.length===1,"Popup operations only handle one event");const e=Cm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(ni(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(ni(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Oo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ni(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,l2.get())};e()}}Oo.currentPopupAction=null;const u2="pendingRedirect",Th=new Map;class c2 extends Y0{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Th.get(this.auth._key());if(!e){try{const s=await h2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Th.set(this.auth._key(),e)}return this.bypassAuthState||Th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function h2(i,e){const n=p2(e),s=d2(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function f2(i,e){Th.set(i._key(),e)}function d2(i){return Mi(i._redirectPersistence)}function p2(i){return Eh(u2,i.config.apiKey,i.name)}async function m2(i,e,n=!1){if(yr(i.app))return Promise.reject(xi(i));const s=Va(i),o=i2(s,e),h=await new c2(s,o,n).execute();return h&&!n&&(delete h.user._redirectEventId,await s._persistUserIfCurrent(h.user),await s._setRedirectUser(null,e)),h}const g2=600*1e3;class y2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!_2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!Q0(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(ni(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=g2&&this.cachedEventUids.clear(),this.cachedEventUids.has(EE(e))}saveEventToCache(e){this.cachedEventUids.add(EE(e)),this.lastProcessedEventTime=Date.now()}}function EE(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function Q0({type:i,error:e}){return i==="unknown"&&e?.code==="auth/no-auth-event"}function _2(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Q0(i);default:return!1}}async function v2(i,e={}){return Fs(i,"GET","/v1/projects",e)}const E2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,T2=/^https?/;async function S2(i){if(i.config.emulator)return;const{authorizedDomains:e}=await v2(i);for(const n of e)try{if(A2(n))return}catch{}Vr(i,"unauthorized-domain")}function A2(i){const e=$p(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const h=new URL(i);return h.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&h.hostname===s}if(!T2.test(n))return!1;if(E2.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const b2=new Vu(3e4,6e4);function TE(){const i=ri().___jsl;if(i?.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function w2(i){return new Promise((e,n)=>{function s(){TE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{TE(),n(ni(i,"network-request-failed"))},timeout:b2.get()})}if(ri().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(ri().gapi?.load)s();else{const o=yC("iframefcb");return ri()[o]=()=>{gapi.load?s():n(ni(i,"network-request-failed"))},V0(`${gC()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Sh=null,e})}let Sh=null;function R2(i){return Sh=Sh||w2(i),Sh}const I2=new Vu(5e3,15e3),C2="__/auth/iframe",D2="emulator/auth/iframe",N2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M2(i){const e=i.config;be(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?Am(e,D2):`https://${i.config.authDomain}/${C2}`,s={apiKey:e.apiKey,appName:i.name,v:Yo},o=O2.get(i.config.apiHost);o&&(s.eid=o);const u=i._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${Mu(s).slice(1)}`}async function V2(i){const e=await R2(i),n=ri().gapi;return be(n,i,"internal-error"),e.open({where:document.body,url:M2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:N2,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const h=ni(i,"network-request-failed"),p=ri().setTimeout(()=>{u(h)},I2.get());function m(){ri().clearTimeout(p),o(s)}s.ping(m).then(m,()=>{u(h)})}))}const x2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},k2=500,P2=600,L2="_blank",U2="http://localhost";class SE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function z2(i,e,n,s=k2,o=P2){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),h=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const m={...x2,width:s.toString(),height:o.toString(),top:u,left:h},g=bn().toLowerCase();n&&(p=R0(g)?L2:n),b0(g)&&(e=e||U2,m.scrollbars="yes");const _=Object.entries(m).reduce((b,[M,Y])=>`${b}${M}=${Y},`,"");if(oC(g)&&p!=="_self")return B2(e||"",p),new SE(null);const T=window.open(e||"",p,_);be(T,i,"popup-blocked");try{T.focus()}catch{}return new SE(T)}function B2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const j2="__/auth/handler",q2="emulator/auth/handler",H2=encodeURIComponent("fac");async function AE(i,e,n,s,o,u){be(i.config.authDomain,i,"auth-domain-config-required"),be(i.config.apiKey,i,"invalid-api-key");const h={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Yo,eventId:o};if(e instanceof P0){e.setDefaultLanguage(i.languageCode),h.providerId=e.providerId||"",D1(e.getCustomParameters())||(h.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))h[_]=T}if(e instanceof ku){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(h.scopes=_.join(","))}i.tenantId&&(h.tid=i.tenantId);const p=h;for(const _ of Object.keys(p))p[_]===void 0&&delete p[_];const m=await i._getAppCheckToken(),g=m?`#${H2}=${encodeURIComponent(m)}`:"";return`${F2(i)}?${Mu(p).slice(1)}${g}`}function F2({config:i}){return i.emulator?Am(i,q2):`https://${i.authDomain}/${j2}`}const Dp="webStorageSupport";class G2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=H0,this._completeRedirectFn=m2,this._overrideRedirectResult=f2}async _openPopup(e,n,s,o){Ui(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await AE(e,n,s,$p(),o);return z2(e,u,Cm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await AE(e,n,s,$p(),o);return YC(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(Ui(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await V2(e),s=new y2(e);return n.register("authEvent",o=>(be(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Dp,{type:Dp},o=>{const u=o?.[0]?.[Dp];u!==void 0&&n(!!u),Vr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=S2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return O0()||w0()||wm()}}const $2=G2;var bE="@firebase/auth",wE="1.12.0";class K2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){be(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Y2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Q2(i){Uo(new Ia("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:h,authDomain:p}=s.options;be(h&&!h.includes(":"),"invalid-api-key",{appName:s.name});const m={apiKey:h,authDomain:p,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M0(i)},g=new dC(s,o,u,m);return AC(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Uo(new Ia("auth-internal",e=>{const n=Va(e.getProvider("auth").getImmediate());return(s=>new K2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ms(bE,wE,Y2(i)),Ms(bE,wE,"esm2020")}const X2=300,W2=o0("authIdTokenMaxAge")||X2;let RE=null;const J2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>W2)return;const o=n?.token;RE!==o&&(RE=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function Z2(i=d0()){const e=Tm(i,"auth");if(e.isInitialized())return e.getImmediate();const n=SC(i,{popupRedirectResolver:$2,persistence:[r2,GC,H0]}),s=o0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const h=J2(u.toString());jC(n,h,()=>h(n.currentUser)),BC(n,p=>h(p))}}const o=s0("auth");return o&&bC(n,`http://${o}`),n}function eD(){return document.getElementsByTagName("head")?.[0]??document}pC({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const u=ni("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",eD().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Q2("Browser");var tD="firebase",nD="12.8.0";Ms(tD,nD,"app");const rD={apiKey:"AIzaSyBRpfRDkXr6HHVkSNGOkwyqF65iBDCZUlA",authDomain:"hayos-20be8.firebaseapp.com",projectId:"hayos-20be8",appId:"1:581995849862:web:fdde2933dd36fecfb04907",measurementId:"G-T5M7VDL89H"};let Np=null;function Ut(){return Np||(Np=iE().length?iE()[0]:f0(rD)),Np}function Vs(){return Z2(Ut())}async function iD(i,e){const n=Vs();return(await zC(n,i,e)).user}async function sD(i,e){const n=Vs();return(await UC(n,i,e)).user}async function Lh(i=!1){const n=Vs().currentUser;return n?n.getIdToken(i):null}const X0=N.createContext(void 0);function aD({children:i}){const[e,n]=N.useState({user:null,loading:!0,idToken:null});N.useEffect(()=>{let h=!0;const p=Vs(),m=qC(p,async g=>{if(!h)return;if(!g){n({user:null,loading:!1,idToken:null});return}const _=await g.getIdToken(!1);h&&n({user:g,loading:!1,idToken:_})});return()=>{h=!1,m()}},[]);const s=async(h,p)=>{n(m=>({...m,loading:!0}));try{const m=await iD(h,p),g=await Lh(!1);n({user:m,loading:!1,idToken:g})}catch(m){throw n(g=>({...g,loading:!1})),m}},o=async(h,p)=>{n(m=>({...m,loading:!0}));try{const m=await sD(h,p),g=await Lh(!1);n({user:m,loading:!1,idToken:g})}catch(m){throw n(g=>({...g,loading:!1})),m}},u=async()=>{n(h=>({...h,loading:!0}));try{await Vs().signOut(),n({user:null,loading:!1,idToken:null})}catch(h){throw n(p=>({...p,loading:!1})),h}};return K.jsx(X0.Provider,{value:{...e,signIn:s,signUp:o,signOut:u},children:i})}function W0(){const i=N.useContext(X0);if(!i)throw new Error("useAuth must be used within an AuthProvider");return i}const J0=[{id:"koryoon",name:"Koryoon",type:"builtin_app",iframePath:"/koryoon-app/index.html",builtin:!0,permissions:["auth.token.read","firestore.read"],group:"system",version:"0.1.0",wallpaperProvider:!0},{id:"wallpaper",name:"Wallpaper",type:"builtin_app",iframePath:"/wallpaper-app/index.html",builtin:!0,permissions:["auth.token.read","firestore.read","firestore.write"],group:"system",version:"0.1.0"},{id:"global-spaces-manager",name:"",type:"builtin_app",iframePath:"/global-spaces-app/index.html",builtin:!0,permissions:["global.space.read","global.space.write","auth.token.read","firestore.read"],group:"data",version:"0.1.0"}],Uh=[...J0];var IE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var xs,Z0;(function(){var i;function e(I,w){function C(){}C.prototype=w.prototype,I.F=w.prototype,I.prototype=new C,I.prototype.constructor=I,I.D=function(x,O,P){for(var R=Array(arguments.length-2),Le=2;Le<arguments.length;Le++)R[Le-2]=arguments[Le];return w.prototype[O].apply(x,R)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(I,w,C){C||(C=0);const x=Array(16);if(typeof w=="string")for(var O=0;O<16;++O)x[O]=w.charCodeAt(C++)|w.charCodeAt(C++)<<8|w.charCodeAt(C++)<<16|w.charCodeAt(C++)<<24;else for(O=0;O<16;++O)x[O]=w[C++]|w[C++]<<8|w[C++]<<16|w[C++]<<24;w=I.g[0],C=I.g[1],O=I.g[2];let P=I.g[3],R;R=w+(P^C&(O^P))+x[0]+3614090360&4294967295,w=C+(R<<7&4294967295|R>>>25),R=P+(O^w&(C^O))+x[1]+3905402710&4294967295,P=w+(R<<12&4294967295|R>>>20),R=O+(C^P&(w^C))+x[2]+606105819&4294967295,O=P+(R<<17&4294967295|R>>>15),R=C+(w^O&(P^w))+x[3]+3250441966&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(P^C&(O^P))+x[4]+4118548399&4294967295,w=C+(R<<7&4294967295|R>>>25),R=P+(O^w&(C^O))+x[5]+1200080426&4294967295,P=w+(R<<12&4294967295|R>>>20),R=O+(C^P&(w^C))+x[6]+2821735955&4294967295,O=P+(R<<17&4294967295|R>>>15),R=C+(w^O&(P^w))+x[7]+4249261313&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(P^C&(O^P))+x[8]+1770035416&4294967295,w=C+(R<<7&4294967295|R>>>25),R=P+(O^w&(C^O))+x[9]+2336552879&4294967295,P=w+(R<<12&4294967295|R>>>20),R=O+(C^P&(w^C))+x[10]+4294925233&4294967295,O=P+(R<<17&4294967295|R>>>15),R=C+(w^O&(P^w))+x[11]+2304563134&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(P^C&(O^P))+x[12]+1804603682&4294967295,w=C+(R<<7&4294967295|R>>>25),R=P+(O^w&(C^O))+x[13]+4254626195&4294967295,P=w+(R<<12&4294967295|R>>>20),R=O+(C^P&(w^C))+x[14]+2792965006&4294967295,O=P+(R<<17&4294967295|R>>>15),R=C+(w^O&(P^w))+x[15]+1236535329&4294967295,C=O+(R<<22&4294967295|R>>>10),R=w+(O^P&(C^O))+x[1]+4129170786&4294967295,w=C+(R<<5&4294967295|R>>>27),R=P+(C^O&(w^C))+x[6]+3225465664&4294967295,P=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(P^w))+x[11]+643717713&4294967295,O=P+(R<<14&4294967295|R>>>18),R=C+(P^w&(O^P))+x[0]+3921069994&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^P&(C^O))+x[5]+3593408605&4294967295,w=C+(R<<5&4294967295|R>>>27),R=P+(C^O&(w^C))+x[10]+38016083&4294967295,P=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(P^w))+x[15]+3634488961&4294967295,O=P+(R<<14&4294967295|R>>>18),R=C+(P^w&(O^P))+x[4]+3889429448&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^P&(C^O))+x[9]+568446438&4294967295,w=C+(R<<5&4294967295|R>>>27),R=P+(C^O&(w^C))+x[14]+3275163606&4294967295,P=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(P^w))+x[3]+4107603335&4294967295,O=P+(R<<14&4294967295|R>>>18),R=C+(P^w&(O^P))+x[8]+1163531501&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(O^P&(C^O))+x[13]+2850285829&4294967295,w=C+(R<<5&4294967295|R>>>27),R=P+(C^O&(w^C))+x[2]+4243563512&4294967295,P=w+(R<<9&4294967295|R>>>23),R=O+(w^C&(P^w))+x[7]+1735328473&4294967295,O=P+(R<<14&4294967295|R>>>18),R=C+(P^w&(O^P))+x[12]+2368359562&4294967295,C=O+(R<<20&4294967295|R>>>12),R=w+(C^O^P)+x[5]+4294588738&4294967295,w=C+(R<<4&4294967295|R>>>28),R=P+(w^C^O)+x[8]+2272392833&4294967295,P=w+(R<<11&4294967295|R>>>21),R=O+(P^w^C)+x[11]+1839030562&4294967295,O=P+(R<<16&4294967295|R>>>16),R=C+(O^P^w)+x[14]+4259657740&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^P)+x[1]+2763975236&4294967295,w=C+(R<<4&4294967295|R>>>28),R=P+(w^C^O)+x[4]+1272893353&4294967295,P=w+(R<<11&4294967295|R>>>21),R=O+(P^w^C)+x[7]+4139469664&4294967295,O=P+(R<<16&4294967295|R>>>16),R=C+(O^P^w)+x[10]+3200236656&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^P)+x[13]+681279174&4294967295,w=C+(R<<4&4294967295|R>>>28),R=P+(w^C^O)+x[0]+3936430074&4294967295,P=w+(R<<11&4294967295|R>>>21),R=O+(P^w^C)+x[3]+3572445317&4294967295,O=P+(R<<16&4294967295|R>>>16),R=C+(O^P^w)+x[6]+76029189&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(C^O^P)+x[9]+3654602809&4294967295,w=C+(R<<4&4294967295|R>>>28),R=P+(w^C^O)+x[12]+3873151461&4294967295,P=w+(R<<11&4294967295|R>>>21),R=O+(P^w^C)+x[15]+530742520&4294967295,O=P+(R<<16&4294967295|R>>>16),R=C+(O^P^w)+x[2]+3299628645&4294967295,C=O+(R<<23&4294967295|R>>>9),R=w+(O^(C|~P))+x[0]+4096336452&4294967295,w=C+(R<<6&4294967295|R>>>26),R=P+(C^(w|~O))+x[7]+1126891415&4294967295,P=w+(R<<10&4294967295|R>>>22),R=O+(w^(P|~C))+x[14]+2878612391&4294967295,O=P+(R<<15&4294967295|R>>>17),R=C+(P^(O|~w))+x[5]+4237533241&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~P))+x[12]+1700485571&4294967295,w=C+(R<<6&4294967295|R>>>26),R=P+(C^(w|~O))+x[3]+2399980690&4294967295,P=w+(R<<10&4294967295|R>>>22),R=O+(w^(P|~C))+x[10]+4293915773&4294967295,O=P+(R<<15&4294967295|R>>>17),R=C+(P^(O|~w))+x[1]+2240044497&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~P))+x[8]+1873313359&4294967295,w=C+(R<<6&4294967295|R>>>26),R=P+(C^(w|~O))+x[15]+4264355552&4294967295,P=w+(R<<10&4294967295|R>>>22),R=O+(w^(P|~C))+x[6]+2734768916&4294967295,O=P+(R<<15&4294967295|R>>>17),R=C+(P^(O|~w))+x[13]+1309151649&4294967295,C=O+(R<<21&4294967295|R>>>11),R=w+(O^(C|~P))+x[4]+4149444226&4294967295,w=C+(R<<6&4294967295|R>>>26),R=P+(C^(w|~O))+x[11]+3174756917&4294967295,P=w+(R<<10&4294967295|R>>>22),R=O+(w^(P|~C))+x[2]+718787259&4294967295,O=P+(R<<15&4294967295|R>>>17),R=C+(P^(O|~w))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+w&4294967295,I.g[1]=I.g[1]+(O+(R<<21&4294967295|R>>>11))&4294967295,I.g[2]=I.g[2]+O&4294967295,I.g[3]=I.g[3]+P&4294967295}s.prototype.v=function(I,w){w===void 0&&(w=I.length);const C=w-this.blockSize,x=this.C;let O=this.h,P=0;for(;P<w;){if(O==0)for(;P<=C;)o(this,I,P),P+=this.blockSize;if(typeof I=="string"){for(;P<w;)if(x[O++]=I.charCodeAt(P++),O==this.blockSize){o(this,x),O=0;break}}else for(;P<w;)if(x[O++]=I[P++],O==this.blockSize){o(this,x),O=0;break}}this.h=O,this.o+=w},s.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var w=1;w<I.length-8;++w)I[w]=0;w=this.o*8;for(var C=I.length-8;C<I.length;++C)I[C]=w&255,w/=256;for(this.v(I),I=Array(16),w=0,C=0;C<4;++C)for(let x=0;x<32;x+=8)I[w++]=this.g[C]>>>x&255;return I};function u(I,w){var C=p;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=w(I)}function h(I,w){this.h=w;const C=[];let x=!0;for(let O=I.length-1;O>=0;O--){const P=I[O]|0;x&&P==w||(C[O]=P,x=!1)}this.g=C}var p={};function m(I){return-128<=I&&I<128?u(I,function(w){return new h([w|0],w<0?-1:0)}):new h([I|0],I<0?-1:0)}function g(I){if(isNaN(I)||!isFinite(I))return T;if(I<0)return H(g(-I));const w=[];let C=1;for(let x=0;I>=C;x++)w[x]=I/C|0,C*=4294967296;return new h(w,0)}function _(I,w){if(I.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(I.charAt(0)=="-")return H(_(I.substring(1),w));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=g(Math.pow(w,8));let x=T;for(let P=0;P<I.length;P+=8){var O=Math.min(8,I.length-P);const R=parseInt(I.substring(P,P+O),w);O<8?(O=g(Math.pow(w,O)),x=x.j(O).add(g(R))):(x=x.j(C),x=x.add(g(R)))}return x}var T=m(0),b=m(1),M=m(16777216);i=h.prototype,i.m=function(){if(L(this))return-H(this).m();let I=0,w=1;for(let C=0;C<this.g.length;C++){const x=this.i(C);I+=(x>=0?x:4294967296+x)*w,w*=4294967296}return I},i.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(Y(this))return"0";if(L(this))return"-"+H(this).toString(I);const w=g(Math.pow(I,6));var C=this;let x="";for(;;){const O=_e(C,w).g;C=Q(C,O.j(w));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(I);if(C=O,Y(C))return P+x;for(;P.length<6;)P="0"+P;x=P+x}},i.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function Y(I){if(I.h!=0)return!1;for(let w=0;w<I.g.length;w++)if(I.g[w]!=0)return!1;return!0}function L(I){return I.h==-1}i.l=function(I){return I=Q(this,I),L(I)?-1:Y(I)?0:1};function H(I){const w=I.g.length,C=[];for(let x=0;x<w;x++)C[x]=~I.g[x];return new h(C,~I.h).add(b)}i.abs=function(){return L(this)?H(this):this},i.add=function(I){const w=Math.max(this.g.length,I.g.length),C=[];let x=0;for(let O=0;O<=w;O++){let P=x+(this.i(O)&65535)+(I.i(O)&65535),R=(P>>>16)+(this.i(O)>>>16)+(I.i(O)>>>16);x=R>>>16,P&=65535,R&=65535,C[O]=R<<16|P}return new h(C,C[C.length-1]&-2147483648?-1:0)};function Q(I,w){return I.add(H(w))}i.j=function(I){if(Y(this)||Y(I))return T;if(L(this))return L(I)?H(this).j(H(I)):H(H(this).j(I));if(L(I))return H(this.j(H(I)));if(this.l(M)<0&&I.l(M)<0)return g(this.m()*I.m());const w=this.g.length+I.g.length,C=[];for(var x=0;x<2*w;x++)C[x]=0;for(x=0;x<this.g.length;x++)for(let O=0;O<I.g.length;O++){const P=this.i(x)>>>16,R=this.i(x)&65535,Le=I.i(O)>>>16,De=I.i(O)&65535;C[2*x+2*O]+=R*De,Z(C,2*x+2*O),C[2*x+2*O+1]+=P*De,Z(C,2*x+2*O+1),C[2*x+2*O+1]+=R*Le,Z(C,2*x+2*O+1),C[2*x+2*O+2]+=P*Le,Z(C,2*x+2*O+2)}for(I=0;I<w;I++)C[I]=C[2*I+1]<<16|C[2*I];for(I=w;I<2*w;I++)C[I]=0;return new h(C,0)};function Z(I,w){for(;(I[w]&65535)!=I[w];)I[w+1]+=I[w]>>>16,I[w]&=65535,w++}function se(I,w){this.g=I,this.h=w}function _e(I,w){if(Y(w))throw Error("division by zero");if(Y(I))return new se(T,T);if(L(I))return w=_e(H(I),w),new se(H(w.g),H(w.h));if(L(w))return w=_e(I,H(w)),new se(H(w.g),w.h);if(I.g.length>30){if(L(I)||L(w))throw Error("slowDivide_ only works with positive integers.");for(var C=b,x=w;x.l(I)<=0;)C=ce(C),x=ce(x);var O=ae(C,1),P=ae(x,1);for(x=ae(x,2),C=ae(C,2);!Y(x);){var R=P.add(x);R.l(I)<=0&&(O=O.add(C),P=R),x=ae(x,1),C=ae(C,1)}return w=Q(I,O.j(w)),new se(O,w)}for(O=T;I.l(w)>=0;){for(C=Math.max(1,Math.floor(I.m()/w.m())),x=Math.ceil(Math.log(C)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),P=g(C),R=P.j(w);L(R)||R.l(I)>0;)C-=x,P=g(C),R=P.j(w);Y(P)&&(P=b),O=O.add(P),I=Q(I,R)}return new se(O,I)}i.B=function(I){return _e(this,I).h},i.and=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let x=0;x<w;x++)C[x]=this.i(x)&I.i(x);return new h(C,this.h&I.h)},i.or=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let x=0;x<w;x++)C[x]=this.i(x)|I.i(x);return new h(C,this.h|I.h)},i.xor=function(I){const w=Math.max(this.g.length,I.g.length),C=[];for(let x=0;x<w;x++)C[x]=this.i(x)^I.i(x);return new h(C,this.h^I.h)};function ce(I){const w=I.g.length+1,C=[];for(let x=0;x<w;x++)C[x]=I.i(x)<<1|I.i(x-1)>>>31;return new h(C,I.h)}function ae(I,w){const C=w>>5;w%=32;const x=I.g.length-C,O=[];for(let P=0;P<x;P++)O[P]=w>0?I.i(P+C)>>>w|I.i(P+C+1)<<32-w:I.i(P+C);return new h(O,I.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,Z0=s,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=g,h.fromString=_,xs=h}).apply(typeof IE<"u"?IE:typeof self<"u"?self:typeof window<"u"?window:{});var ch=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var eS,su,tS,Ah,Xp,nS,rS,iS;(function(){var i,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ch=="object"&&ch];for(var y=0;y<c.length;++y){var E=c[y];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var s=n(this);function o(c,y){if(y)e:{var E=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var z=c[A];if(!(z in E))break e;E=E[z]}c=c[c.length-1],A=E[c],y=y(A),y!=A&&y!=null&&e(E,c,{configurable:!0,writable:!0,value:y})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(y){var E=[],A;for(A in y)Object.prototype.hasOwnProperty.call(y,A)&&E.push([A,y[A]]);return E}});var u=u||{},h=this||self;function p(c){var y=typeof c;return y=="object"&&c!=null||y=="function"}function m(c,y,E){return c.call.apply(c.bind,arguments)}function g(c,y,E){return g=m,g.apply(null,arguments)}function _(c,y){var E=Array.prototype.slice.call(arguments,1);return function(){var A=E.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function T(c,y){function E(){}E.prototype=y.prototype,c.Z=y.prototype,c.prototype=new E,c.prototype.constructor=c,c.Ob=function(A,z,G){for(var ue=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)ue[Ve-2]=arguments[Ve];return y.prototype[z].apply(A,ue)}}var b=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function M(c){const y=c.length;if(y>0){const E=Array(y);for(let A=0;A<y;A++)E[A]=c[A];return E}return[]}function Y(c,y){for(let A=1;A<arguments.length;A++){const z=arguments[A];var E=typeof z;if(E=E!="object"?E:z?Array.isArray(z)?"array":E:"null",E=="array"||E=="object"&&typeof z.length=="number"){E=c.length||0;const G=z.length||0;c.length=E+G;for(let ue=0;ue<G;ue++)c[E+ue]=z[ue]}else c.push(z)}}class L{constructor(y,E){this.i=y,this.j=E,this.h=0,this.g=null}get(){let y;return this.h>0?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function H(c){h.setTimeout(()=>{throw c},0)}function Q(){var c=I;let y=null;return c.g&&(y=c.g,c.g=c.g.next,c.g||(c.h=null),y.next=null),y}class Z{constructor(){this.h=this.g=null}add(y,E){const A=se.get();A.set(y,E),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new L(()=>new _e,c=>c.reset());class _e{constructor(){this.next=this.g=this.h=null}set(y,E){this.h=y,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ce,ae=!1,I=new Z,w=()=>{const c=Promise.resolve(void 0);ce=()=>{c.then(C)}};function C(){for(var c;c=Q();){try{c.h.call(c.g)}catch(E){H(E)}var y=se;y.j(c),y.h<100&&(y.h++,c.next=y.g,y.g=c)}ae=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function O(c,y){this.type=c,this.g=this.target=y,this.defaultPrevented=!1}O.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,y=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};h.addEventListener("test",E,y),h.removeEventListener("test",E,y)}catch{}return c})();function R(c){return/^[\s\xa0]*$/.test(c)}function Le(c,y){O.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,y)}T(Le,O),Le.prototype.init=function(c,y){const E=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=y,y=c.relatedTarget,y||(E=="mouseover"?y=c.fromElement:E=="mouseout"&&(y=c.toElement)),this.relatedTarget=y,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Le.Z.h.call(this)},Le.prototype.h=function(){Le.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var De="closure_listenable_"+(Math.random()*1e6|0),X=0;function oe(c,y,E,A,z){this.listener=c,this.proxy=null,this.src=y,this.type=E,this.capture=!!A,this.ha=z,this.key=++X,this.da=this.fa=!1}function ve(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ue(c,y,E){for(const A in c)y.call(E,c[A],A,c)}function Ne(c,y){for(const E in c)y.call(void 0,c[E],E,c)}function V(c){const y={};for(const E in c)y[E]=c[E];return y}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function he(c,y){let E,A;for(let z=1;z<arguments.length;z++){A=arguments[z];for(E in A)c[E]=A[E];for(let G=0;G<te.length;G++)E=te[G],Object.prototype.hasOwnProperty.call(A,E)&&(c[E]=A[E])}}function fe(c){this.src=c,this.g={},this.h=0}fe.prototype.add=function(c,y,E,A,z){const G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);const ue=Re(c,y,A,z);return ue>-1?(y=c[ue],E||(y.fa=!1)):(y=new oe(y,this.src,G,!!A,z),y.fa=E,c.push(y)),y};function Se(c,y){const E=y.type;if(E in c.g){var A=c.g[E],z=Array.prototype.indexOf.call(A,y,void 0),G;(G=z>=0)&&Array.prototype.splice.call(A,z,1),G&&(ve(y),c.g[E].length==0&&(delete c.g[E],c.h--))}}function Re(c,y,E,A){for(let z=0;z<c.length;++z){const G=c[z];if(!G.da&&G.listener==y&&G.capture==!!E&&G.ha==A)return z}return-1}var ze="closure_lm_"+(Math.random()*1e6|0),Et={};function it(c,y,E,A,z){if(Array.isArray(y)){for(let G=0;G<y.length;G++)it(c,y[G],E,A,z);return null}return E=Lr(E),c&&c[De]?c.J(y,E,p(A)?!!A.capture:!1,z):li(c,y,E,!1,A,z)}function li(c,y,E,A,z,G){if(!y)throw Error("Invalid event type");const ue=p(z)?!!z.capture:!!z;let Ve=Pr(c);if(Ve||(c[ze]=Ve=new fe(c)),E=Ve.add(y,E,A,ue,G),E.proxy)return E;if(A=Hi(),E.proxy=A,A.src=c,A.listener=E,c.addEventListener)P||(z=ue),z===void 0&&(z=!1),c.addEventListener(y.toString(),A,z);else if(c.attachEvent)c.attachEvent(Ln(y.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return E}function Hi(){function c(E){return y.call(c.src,c.listener,E)}const y=pn;return c}function Fi(c,y,E,A,z){if(Array.isArray(y))for(var G=0;G<y.length;G++)Fi(c,y[G],E,A,z);else A=p(A)?!!A.capture:!!A,E=Lr(E),c&&c[De]?(c=c.i,G=String(y).toString(),G in c.g&&(y=c.g[G],E=Re(y,E,A,z),E>-1&&(ve(y[E]),Array.prototype.splice.call(y,E,1),y.length==0&&(delete c.g[G],c.h--)))):c&&(c=Pr(c))&&(y=c.g[y.toString()],c=-1,y&&(c=Re(y,E,A,z)),(E=c>-1?y[c]:null)&&Zn(E))}function Zn(c){if(typeof c!="number"&&c&&!c.da){var y=c.src;if(y&&y[De])Se(y.i,c);else{var E=c.type,A=c.proxy;y.removeEventListener?y.removeEventListener(E,A,c.capture):y.detachEvent?y.detachEvent(Ln(E),A):y.addListener&&y.removeListener&&y.removeListener(A),(E=Pr(y))?(Se(E,c),E.h==0&&(E.src=null,y[ze]=null)):ve(c)}}}function Ln(c){return c in Et?Et[c]:Et[c]="on"+c}function pn(c,y){if(c.da)c=!0;else{y=new Le(y,this);const E=c.listener,A=c.ha||c.src;c.fa&&Zn(c),c=E.call(A,y)}return c}function Pr(c){return c=c[ze],c instanceof fe?c:null}var mn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Lr(c){return typeof c=="function"?c:(c[mn]||(c[mn]=function(y){return c.handleEvent(y)}),c[mn])}function Tt(){x.call(this),this.i=new fe(this),this.M=this,this.G=null}T(Tt,x),Tt.prototype[De]=!0,Tt.prototype.removeEventListener=function(c,y,E,A){Fi(this,c,y,E,A)};function wt(c,y){var E,A=c.G;if(A)for(E=[];A;A=A.G)E.push(A);if(c=c.M,A=y.type||y,typeof y=="string")y=new O(y,c);else if(y instanceof O)y.target=y.target||c;else{var z=y;y=new O(A,c),he(y,z)}z=!0;let G,ue;if(E)for(ue=E.length-1;ue>=0;ue--)G=y.g=E[ue],z=Tr(G,A,!0,y)&&z;if(G=y.g=c,z=Tr(G,A,!0,y)&&z,z=Tr(G,A,!1,y)&&z,E)for(ue=0;ue<E.length;ue++)G=y.g=E[ue],z=Tr(G,A,!1,y)&&z}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var c=this.i;for(const y in c.g){const E=c.g[y];for(let A=0;A<E.length;A++)ve(E[A]);delete c.g[y],c.h--}}this.G=null},Tt.prototype.J=function(c,y,E,A){return this.i.add(String(c),y,!1,E,A)},Tt.prototype.K=function(c,y,E,A){return this.i.add(String(c),y,!0,E,A)};function Tr(c,y,E,A){if(y=c.i.g[String(y)],!y)return!0;y=y.concat();let z=!0;for(let G=0;G<y.length;++G){const ue=y[G];if(ue&&!ue.da&&ue.capture==E){const Ve=ue.listener,kt=ue.ha||ue.src;ue.fa&&Se(c.i,ue),z=Ve.call(kt,A)!==!1&&z}}return z&&!A.defaultPrevented}function tl(c,y){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=g(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(y)>2147483647?-1:h.setTimeout(c,y||0)}function Ys(c){c.g=tl(()=>{c.g=null,c.i&&(c.i=!1,Ys(c))},c.l);const y=c.h;c.h=null,c.m.apply(null,y)}class Rt extends x{constructor(y,E){super(),this.m=y,this.l=E,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:Ys(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ur(c){x.call(this),this.h=c,this.g={}}T(Ur,x);var Gi=[];function zr(c){Ue(c.g,function(y,E){this.g.hasOwnProperty(E)&&Zn(y)},c),c.g={}}Ur.prototype.N=function(){Ur.Z.N.call(this),zr(this)},Ur.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var er=h.JSON.stringify,Qs=h.JSON.parse,Br=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function Xs(){}function ui(){}var Xt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wt(){O.call(this,"d")}T(Wt,O);function In(){O.call(this,"c")}T(In,O);var St={},Ws=null;function ci(){return Ws=Ws||new Tt}St.Ia="serverreachability";function $i(c){O.call(this,St.Ia,c)}T($i,O);function Un(c){const y=ci();wt(y,new $i(y))}St.STAT_EVENT="statevent";function jr(c,y){O.call(this,St.STAT_EVENT,c),this.stat=y}T(jr,O);function yt(c){const y=ci();wt(y,new jr(y,c))}St.Ja="timingevent";function tr(c,y){O.call(this,St.Ja,c),this.size=y}T(tr,O);function nr(c,y){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},y)}function zn(){this.g=!0}zn.prototype.ua=function(){this.g=!1};function La(c,y,E,A,z,G){c.info(function(){if(c.g)if(G){var ue="",Ve=G.split("&");for(let We=0;We<Ve.length;We++){var kt=Ve[We].split("=");if(kt.length>1){const _t=kt[0];kt=kt[1];const or=_t.split("_");ue=or.length>=2&&or[1]=="type"?ue+(_t+"="+kt+"&"):ue+(_t+"=redacted&")}}}else ue=null;else ue=G;return"XMLHTTP REQ ("+A+") [attempt "+z+"]: "+y+`
`+E+`
`+ue})}function Js(c,y,E,A,z,G,ue){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+z+"]: "+y+`
`+E+`
`+G+" "+ue})}function j(c,y,E,A){c.info(function(){return"XMLHTTP TEXT ("+y+"): "+le(c,E)+(A?" "+A:"")})}function W(c,y){c.info(function(){return"TIMEOUT: "+y})}zn.prototype.info=function(){};function le(c,y){if(!c.g)return y;if(!y)return null;try{const G=JSON.parse(y);if(G){for(c=0;c<G.length;c++)if(Array.isArray(G[c])){var E=G[c];if(!(E.length<2)){var A=E[1];if(Array.isArray(A)&&!(A.length<1)){var z=A[0];if(z!="noop"&&z!="stop"&&z!="close")for(let ue=1;ue<A.length;ue++)A[ue]=""}}}}return er(G)}catch{return y}}var Ie={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ke={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},et;function Nt(){}T(Nt,Xs),Nt.prototype.g=function(){return new XMLHttpRequest},et=new Nt;function gn(c){return encodeURIComponent(String(c))}function Ot(c){var y=1;c=c.split(":");const E=[];for(;y>0&&c.length;)E.push(c.shift()),y--;return c.length&&E.push(c.join(":")),E}function ht(c,y,E,A){this.j=c,this.i=y,this.l=E,this.S=A||1,this.V=new Ur(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Jt}function Jt(){this.i=null,this.g="",this.h=!1}var ft={},It={};function yn(c,y,E){c.M=1,c.A=Zs(jt(y)),c.u=E,c.R=!0,hi(c,null)}function hi(c,y){c.F=Date.now(),Bn(c),c.B=jt(c.A);var E=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),qa(E.i,"t",A),c.C=0,E=c.j.L,c.h=new Jt,c.g=tc(c.j,E?y:null,!c.u),c.P>0&&(c.O=new Rt(g(c.Y,c,c.g),c.P)),y=c.V,E=c.g,A=c.ba;var z="readystatechange";Array.isArray(z)||(z&&(Gi[0]=z.toString()),z=Gi);for(let G=0;G<z.length;G++){const ue=it(E,z[G],A||y.handleEvent,!1,y.h||y);if(!ue)break;y.g[ue.key]=ue}y=c.J?V(c.J):{},c.u?(c.v||(c.v="POST"),y["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,y)):(c.v="GET",c.g.ea(c.B,c.v,null,y)),Un(),La(c.i,c.v,c.B,c.l,c.S,c.u)}ht.prototype.ba=function(c){c=c.target;const y=this.O;y&&br(c)==3?y.j():this.Y(c)},ht.prototype.Y=function(c){try{if(c==this.g)e:{const Ve=br(this.g),kt=this.g.ya(),We=this.g.ca();if(!(Ve<3)&&(Ve!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Ve!=4||kt==7||(kt==8||We<=0?Un(3):Un(2)),pe(this);var y=this.g.ca();this.X=y;var E=nl(this);if(this.o=y==200,Js(this.i,this.v,this.B,this.l,this.S,Ve,y),this.o){if(this.U&&!this.L){t:{if(this.g){var A,z=this.g;if((A=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(A)){var G=A;break t}}G=null}if(c=G)j(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,rr(this,c);else{this.o=!1,this.m=3,yt(12),Vt(this),Mt(this);break e}}if(this.R){c=!0;let _t;for(;!this.K&&this.C<E.length;)if(_t=za(this,E),_t==It){Ve==4&&(this.m=4,yt(14),c=!1),j(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==ft){this.m=4,yt(15),j(this.i,this.l,E,"[Invalid Chunk]"),c=!1;break}else j(this.i,this.l,_t,null),rr(this,_t);if(Ua(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ve!=4||E.length!=0||this.h.h||(this.m=1,yt(16),c=!1),this.o=this.o&&c,!c)j(this.i,this.l,E,"[Invalid Chunked Response]"),Vt(this),Mt(this);else if(E.length>0&&!this.W){this.W=!0;var ue=this.j;ue.g==this&&ue.aa&&!ue.P&&(ue.j.info("Great, no buffering proxy detected. Bytes received: "+E.length),gl(ue),ue.P=!0,yt(11))}}else j(this.i,this.l,E,null),rr(this,E);Ve==4&&Vt(this),this.o&&!this.K&&(Ve==4?Wu(this.j,this):(this.o=!1,Bn(this)))}else pi(this.g),y==400&&E.indexOf("Unknown SID")>0?(this.m=3,yt(12)):(this.m=0,yt(13)),Vt(this),Mt(this)}}}catch{}};function nl(c){if(!Ua(c))return c.g.la();const y=sn(c.g);if(y==="")return"";let E="";const A=y.length,z=br(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vt(c),Mt(c),"";c.h.i=new h.TextDecoder}for(let G=0;G<A;G++)c.h.h=!0,E+=c.h.i.decode(y[G],{stream:!(z&&G==A-1)});return y.length=0,c.h.g+=E,c.C=0,c.h.g}function Ua(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function za(c,y){var E=c.C,A=y.indexOf(`
`,E);return A==-1?It:(E=Number(y.substring(E,A)),isNaN(E)?ft:(A+=1,A+E>y.length?It:(y=y.slice(A,A+E),c.C=A+E,y)))}ht.prototype.cancel=function(){this.K=!0,Vt(this)};function Bn(c){c.T=Date.now()+c.H,fi(c,c.H)}function fi(c,y){if(c.D!=null)throw Error("WatchDog timer not null");c.D=nr(g(c.aa,c),y)}function pe(c){c.D&&(h.clearTimeout(c.D),c.D=null)}ht.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(W(this.i,this.B),this.M!=2&&(Un(),yt(17)),Vt(this),this.m=2,Mt(this)):fi(this,this.T-c)};function Mt(c){c.j.I==0||c.K||Wu(c.j,c)}function Vt(c){pe(c);var y=c.O;y&&typeof y.dispose=="function"&&y.dispose(),c.O=null,zr(c.V),c.g&&(y=c.g,c.g=null,y.abort(),y.dispose())}function rr(c,y){try{var E=c.j;if(E.I!=0&&(E.g==c||Hr(E.h,c))){if(!c.L&&Hr(E.h,c)&&E.I==3){try{var A=E.Ba.g.parse(y)}catch{A=null}if(Array.isArray(A)&&A.length==3){var z=A;if(z[0]==0){e:if(!E.v){if(E.g)if(E.g.F+3e3<c.F)Ka(E),es(E);else break e;aa(E),yt(18)}}else E.xa=z[1],0<E.xa-E.K&&z[2]<37500&&E.F&&E.A==0&&!E.C&&(E.C=nr(g(E.Va,E),6e3));qr(E.h)<=1&&E.ta&&(E.ta=void 0)}else Qr(E,11)}else if((c.L||E.g==c)&&Ka(E),!R(y))for(z=E.Ba.g.parse(y),y=0;y<z.length;y++){let We=z[y];const _t=We[0];if(!(_t<=E.K))if(E.K=_t,We=We[1],E.I==2)if(We[0]=="c"){E.M=We[1],E.ba=We[2];const or=We[3];or!=null&&(E.ka=or,E.j.info("VER="+E.ka));const Xr=We[4];Xr!=null&&(E.za=Xr,E.j.info("SVER="+E.za));const wr=We[5];wr!=null&&typeof wr=="number"&&wr>0&&(A=1.5*wr,E.O=A,E.j.info("backChannelRequestTimeoutMs_="+A)),A=E;const Rr=c.g;if(Rr){const oa=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(oa){var G=A.h;G.g||oa.indexOf("spdy")==-1&&oa.indexOf("quic")==-1&&oa.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(il(G,G.h),G.h=null))}if(A.G){const Ya=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Ya&&(A.wa=Ya,tt(A.J,A.G,Ya))}}E.I=3,E.l&&E.l.ra(),E.aa&&(E.T=Date.now()-c.F,E.j.info("Handshake RTT: "+E.T+"ms")),A=E;var ue=c;if(A.na=ec(A,A.L?A.ba:null,A.W),ue.L){sl(A.h,ue);var Ve=ue,kt=A.O;kt&&(Ve.H=kt),Ve.D&&(pe(Ve),Bn(Ve)),A.g=ue}else Qu(A);E.i.length>0&&Yr(E)}else We[0]!="stop"&&We[0]!="close"||Qr(E,7);else E.I==3&&(We[0]=="stop"||We[0]=="close"?We[0]=="stop"?Qr(E,7):pl(E):We[0]!="noop"&&E.l&&E.l.qa(We),E.A=0)}}Un(4)}catch{}}var xt=class{constructor(c,y){this.g=c,this.map=y}};function ir(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function rl(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function qr(c){return c.h?1:c.g?c.g.size:0}function Hr(c,y){return c.h?c.h==y:c.g?c.g.has(y):!1}function il(c,y){c.g?c.g.add(y):c.h=y}function sl(c,y){c.h&&c.h==y?c.h=null:c.g&&c.g.has(y)&&c.g.delete(y)}ir.prototype.cancel=function(){if(this.i=al(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function al(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let y=c.i;for(const E of c.g.values())y=y.concat(E.G);return y}return M(c.i)}var Hu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ba(c,y){if(c){c=c.split("&");for(let E=0;E<c.length;E++){const A=c[E].indexOf("=");let z,G=null;A>=0?(z=c[E].substring(0,A),G=c[E].substring(A+1)):z=c[E],y(z,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function jn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let y;c instanceof jn?(this.l=c.l,tn(this,c.j),this.o=c.o,this.g=c.g,Ki(this,c.u),this.h=c.h,ol(this,Ku(c.i)),this.m=c.m):c&&(y=String(c).match(Hu))?(this.l=!1,tn(this,y[1]||"",!0),this.o=Fr(y[2]||""),this.g=Fr(y[3]||"",!0),Ki(this,y[4]),this.h=Fr(y[5]||"",!0),ol(this,y[6]||"",!0),this.m=Fr(y[7]||"")):(this.l=!1,this.i=new Qi(null,this.l))}jn.prototype.toString=function(){const c=[];var y=this.j;y&&c.push(ea(y,ja,!0),":");var E=this.g;return(E||y=="file")&&(c.push("//"),(y=this.o)&&c.push(ea(y,ja,!0),"@"),c.push(gn(E).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.u,E!=null&&c.push(":",String(E))),(E=this.h)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(ea(E,E.charAt(0)=="/"?ll:Fu,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",ea(E,Gu)),c.join("")},jn.prototype.resolve=function(c){const y=jt(this);let E=!!c.j;E?tn(y,c.j):E=!!c.o,E?y.o=c.o:E=!!c.g,E?y.g=c.g:E=c.u!=null;var A=c.h;if(E)Ki(y,c.u);else if(E=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var z=y.h.lastIndexOf("/");z!=-1&&(A=y.h.slice(0,z+1)+A)}if(z=A,z==".."||z==".")A="";else if(z.indexOf("./")!=-1||z.indexOf("/.")!=-1){A=z.lastIndexOf("/",0)==0,z=z.split("/");const G=[];for(let ue=0;ue<z.length;){const Ve=z[ue++];Ve=="."?A&&ue==z.length&&G.push(""):Ve==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),A&&ue==z.length&&G.push("")):(G.push(Ve),A=!0)}A=G.join("/")}else A=z}return E?y.h=A:E=c.i.toString()!=="",E?ol(y,Ku(c.i)):E=!!c.m,E&&(y.m=c.m),y};function jt(c){return new jn(c)}function tn(c,y,E){c.j=E?Fr(y,!0):y,c.j&&(c.j=c.j.replace(/:$/,""))}function Ki(c,y){if(y){if(y=Number(y),isNaN(y)||y<0)throw Error("Bad port number "+y);c.u=y}else c.u=null}function ol(c,y,E){y instanceof Qi?(c.i=y,Ha(c.i,c.l)):(E||(y=ea(y,Yi)),c.i=new Qi(y,c.l))}function tt(c,y,E){c.i.set(y,E)}function Zs(c){return tt(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Fr(c,y){return c?y?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ea(c,y,E){return typeof c=="string"?(c=encodeURI(c).replace(y,Cn),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function Cn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var ja=/[#\/\?@]/g,Fu=/[#\?:]/g,ll=/[#\?]/g,Yi=/[#\?@]/g,Gu=/#/g;function Qi(c,y){this.h=this.g=null,this.i=c||null,this.j=!!y}function Dn(c){c.g||(c.g=new Map,c.h=0,c.i&&Ba(c.i,function(y,E){c.add(decodeURIComponent(y.replace(/\+/g," ")),E)}))}i=Qi.prototype,i.add=function(c,y){Dn(this),this.i=null,c=Xi(this,c);let E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(y),this.h+=1,this};function $u(c,y){Dn(c),y=Xi(c,y),c.g.has(y)&&(c.i=null,c.h-=c.g.get(y).length,c.g.delete(y))}function ul(c,y){return Dn(c),y=Xi(c,y),c.g.has(y)}i.forEach=function(c,y){Dn(this),this.g.forEach(function(E,A){E.forEach(function(z){c.call(y,z,A,this)},this)},this)};function cl(c,y){Dn(c);let E=[];if(typeof y=="string")ul(c,y)&&(E=E.concat(c.g.get(Xi(c,y))));else for(c=Array.from(c.g.values()),y=0;y<c.length;y++)E=E.concat(c[y]);return E}i.set=function(c,y){return Dn(this),this.i=null,c=Xi(this,c),ul(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[y]),this.h+=1,this},i.get=function(c,y){return c?(c=cl(this,c),c.length>0?String(c[0]):y):y};function qa(c,y,E){$u(c,y),E.length>0&&(c.i=null,c.g.set(Xi(c,y),M(E)),c.h+=E.length)}i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],y=Array.from(this.g.keys());for(let A=0;A<y.length;A++){var E=y[A];const z=gn(E);E=cl(this,E);for(let G=0;G<E.length;G++){let ue=z;E[G]!==""&&(ue+="="+gn(E[G])),c.push(ue)}}return this.i=c.join("&")};function Ku(c){const y=new Qi;return y.i=c.i,c.g&&(y.g=new Map(c.g),y.h=c.h),y}function Xi(c,y){return y=String(y),c.j&&(y=y.toLowerCase()),y}function Ha(c,y){y&&!c.j&&(Dn(c),c.i=null,c.g.forEach(function(E,A){const z=A.toLowerCase();A!=z&&($u(this,A),qa(this,z,E))},c)),c.j=y}function Sr(c,y){const E=new zn;if(h.Image){const A=new Image;A.onload=_(sr,E,"TestLoadImage: loaded",!0,y,A),A.onerror=_(sr,E,"TestLoadImage: error",!1,y,A),A.onabort=_(sr,E,"TestLoadImage: abort",!1,y,A),A.ontimeout=_(sr,E,"TestLoadImage: timeout",!1,y,A),h.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else y(!1)}function hl(c,y){const E=new zn,A=new AbortController,z=setTimeout(()=>{A.abort(),sr(E,"TestPingServer: timeout",!1,y)},1e4);fetch(c,{signal:A.signal}).then(G=>{clearTimeout(z),G.ok?sr(E,"TestPingServer: ok",!0,y):sr(E,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(z),sr(E,"TestPingServer: error",!1,y)})}function sr(c,y,E,A,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),A(E)}catch{}}function Wi(){this.g=new Br}function Gr(c){this.i=c.Sb||null,this.h=c.ab||!1}T(Gr,Xs),Gr.prototype.g=function(){return new ta(this.i,this.h)};function ta(c,y){Tt.call(this),this.H=c,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(ta,Tt),i=ta.prototype,i.open=function(c,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=y,this.readyState=1,Ar(this)},i.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const y={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(y.body=c),(this.H||h).fetch(new Request(this.D,y)).then(this.Pa.bind(this),this.ga.bind(this))},i.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ji(this)),this.readyState=0},i.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ar(this)),this.g&&(this.readyState=3,Ar(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Fa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Fa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}i.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var y=c.value?c.value:new Uint8Array(0);(y=this.B.decode(y,{stream:!c.done}))&&(this.response=this.responseText+=y)}c.done?Ji(this):Ar(this),this.readyState==3&&Fa(this)}},i.Oa=function(c){this.g&&(this.response=this.responseText=c,Ji(this))},i.Na=function(c){this.g&&(this.response=c,Ji(this))},i.ga=function(){this.g&&Ji(this)};function Ji(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Ar(c)}i.setRequestHeader=function(c,y){this.A.append(c,y)},i.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],y=this.h.entries();for(var E=y.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=y.next();return c.join(`\r
`)};function Ar(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function ar(c){let y="";return Ue(c,function(E,A){y+=A,y+=":",y+=E,y+=`\r
`}),y}function na(c,y,E){e:{for(A in E){var A=!1;break e}A=!0}A||(E=ar(E),typeof c=="string"?E!=null&&gn(E):tt(c,y,E))}function st(c){Tt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(st,Tt);var $r=/^https?$/i,fl=["POST","PUT"];i=st.prototype,i.Fa=function(c){this.H=c},i.ea=function(c,y,E,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);y=y?y.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():et.g(),this.g.onreadystatechange=b(g(this.Ca,this));try{this.B=!0,this.g.open(y,String(c),!0),this.B=!1}catch(G){ra(this,G);return}if(c=E||"",E=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var z in A)E.set(z,A[z]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const G of A.keys())E.set(G,A.get(G));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),z=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(fl,y,void 0)>=0)||A||z||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ue]of E)this.g.setRequestHeader(G,ue);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(G){ra(this,G)}};function ra(c,y){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=y,c.o=5,dl(c),di(c)}function dl(c){c.A||(c.A=!0,wt(c,"complete"),wt(c,"error"))}i.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,wt(this,"complete"),wt(this,"abort"),di(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),di(this,!0)),st.Z.N.call(this)},i.Ca=function(){this.u||(this.B||this.v||this.j?ia(this):this.Xa())},i.Xa=function(){ia(this)};function ia(c){if(c.h&&typeof u<"u"){if(c.v&&br(c)==4)setTimeout(c.Ca.bind(c),0);else if(wt(c,"readystatechange"),br(c)==4){c.h=!1;try{const G=c.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var E;if(!(E=y)){var A;if(A=G===0){let ue=String(c.D).match(Hu)[1]||null;!ue&&h.self&&h.self.location&&(ue=h.self.location.protocol.slice(0,-1)),A=!$r.test(ue?ue.toLowerCase():"")}E=A}if(E)wt(c,"complete"),wt(c,"success");else{c.o=6;try{var z=br(c)>2?c.g.statusText:""}catch{z=""}c.l=z+" ["+c.ca()+"]",dl(c)}}finally{di(c)}}}}function di(c,y){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const E=c.g;c.g=null,y||wt(c,"ready");try{E.onreadystatechange=null}catch{}}}i.isActive=function(){return!!this.g};function br(c){return c.g?c.g.readyState:0}i.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},i.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},i.La=function(c){if(this.g){var y=this.g.responseText;return c&&y.indexOf(c)==0&&(y=y.substring(c.length)),Qs(y)}};function sn(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function pi(c){const y={};c=(c.g&&br(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(R(c[A]))continue;var E=Ot(c[A]);const z=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=y[z]||[];y[z]=G,G.push(E)}Ne(y,function(A){return A.join(", ")})}i.ya=function(){return this.o},i.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Kr(c,y,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||y}function Zi(c){this.za=0,this.i=[],this.j=new zn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Kr("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Kr("baseRetryDelayMs",5e3,c),this.Za=Kr("retryDelaySeedMs",1e4,c),this.Ta=Kr("forwardChannelMaxRetries",2,c),this.va=Kr("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new ir(c&&c.concurrentRequestLimit),this.Ba=new Wi,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}i=Zi.prototype,i.ka=8,i.I=1,i.connect=function(c,y,E,A){yt(0),this.W=c,this.H=y||{},E&&A!==void 0&&(this.H.OSID=E,this.H.OAID=A),this.F=this.X,this.J=ec(this,null,this.W),Yr(this)};function pl(c){if(Ga(c),c.I==3){var y=c.V++,E=jt(c.J);if(tt(E,"SID",c.M),tt(E,"RID",y),tt(E,"TYPE","terminate"),sa(c,E),y=new ht(c,c.j,y),y.M=2,y.A=Zs(jt(E)),E=!1,h.navigator&&h.navigator.sendBeacon)try{E=h.navigator.sendBeacon(y.A.toString(),"")}catch{}!E&&h.Image&&(new Image().src=y.A,E=!0),E||(y.g=tc(y.j,null),y.g.ea(y.A)),y.F=Date.now(),Bn(y)}Zu(c)}function es(c){c.g&&(gl(c),c.g.cancel(),c.g=null)}function Ga(c){es(c),c.v&&(h.clearTimeout(c.v),c.v=null),Ka(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function Yr(c){if(!rl(c.h)&&!c.m){c.m=!0;var y=c.Ea;ce||w(),ae||(ce(),ae=!0),I.add(y,c),c.D=0}}function $a(c,y){return qr(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=y.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=nr(g(c.Ea,c,y),Ju(c,c.D)),c.D++,!0)}i.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const z=new ht(this,this.j,c);let G=this.o;if(this.U&&(G?(G=V(G),he(G,this.U)):G=this.U),this.u!==null||this.R||(z.J=G,G=null),this.S)e:{for(var y=0,E=0;E<this.i.length;E++){t:{var A=this.i[E];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(y+=A,y>4096){y=E;break e}if(y===4096||E===this.i.length-1){y=E+1;break e}}y=1e3}else y=1e3;y=Yu(this,z,y),E=jt(this.J),tt(E,"RID",c),tt(E,"CVER",22),this.G&&tt(E,"X-HTTP-Session-Id",this.G),sa(this,E),G&&(this.R?y="headers="+gn(ar(G))+"&"+y:this.u&&na(E,this.u,G)),il(this.h,z),this.Ra&&tt(E,"TYPE","init"),this.S?(tt(E,"$req",y),tt(E,"SID","null"),z.U=!0,yn(z,E,null)):yn(z,E,y),this.I=2}}else this.I==3&&(c?ml(this,c):this.i.length==0||rl(this.h)||ml(this))};function ml(c,y){var E;y?E=y.l:E=c.V++;const A=jt(c.J);tt(A,"SID",c.M),tt(A,"RID",E),tt(A,"AID",c.K),sa(c,A),c.u&&c.o&&na(A,c.u,c.o),E=new ht(c,c.j,E,c.D+1),c.u===null&&(E.J=c.o),y&&(c.i=y.G.concat(c.i)),y=Yu(c,E,1e3),E.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),il(c.h,E),yn(E,A,y)}function sa(c,y){c.H&&Ue(c.H,function(E,A){tt(y,A,E)}),c.l&&Ue({},function(E,A){tt(y,A,E)})}function Yu(c,y,E){E=Math.min(c.i.length,E);const A=c.l?g(c.l.Ka,c.l,c):null;e:{var z=c.i;let Ve=-1;for(;;){const kt=["count="+E];Ve==-1?E>0?(Ve=z[0].g,kt.push("ofs="+Ve)):Ve=0:kt.push("ofs="+Ve);let We=!0;for(let _t=0;_t<E;_t++){var G=z[_t].g;const or=z[_t].map;if(G-=Ve,G<0)Ve=Math.max(0,z[_t].g-100),We=!1;else try{G="req"+G+"_"||"";try{var ue=or instanceof Map?or:Object.entries(or);for(const[Xr,wr]of ue){let Rr=wr;p(wr)&&(Rr=er(wr)),kt.push(G+Xr+"="+encodeURIComponent(Rr))}}catch(Xr){throw kt.push(G+"type="+encodeURIComponent("_badmap")),Xr}}catch{A&&A(or)}}if(We){ue=kt.join("&");break e}}ue=void 0}return c=c.i.splice(0,E),y.G=c,ue}function Qu(c){if(!c.g&&!c.v){c.Y=1;var y=c.Da;ce||w(),ae||(ce(),ae=!0),I.add(y,c),c.A=0}}function aa(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=nr(g(c.Da,c),Ju(c,c.A)),c.A++,!0)}i.Da=function(){if(this.v=null,Xu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=nr(g(this.Wa,this),c)}},i.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,yt(10),es(this),Xu(this))};function gl(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function Xu(c){c.g=new ht(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var y=jt(c.na);tt(y,"RID","rpc"),tt(y,"SID",c.M),tt(y,"AID",c.K),tt(y,"CI",c.F?"0":"1"),!c.F&&c.ia&&tt(y,"TO",c.ia),tt(y,"TYPE","xmlhttp"),sa(c,y),c.u&&c.o&&na(y,c.u,c.o),c.O&&(c.g.H=c.O);var E=c.g;c=c.ba,E.M=1,E.A=Zs(jt(y)),E.u=null,E.R=!0,hi(E,c)}i.Va=function(){this.C!=null&&(this.C=null,es(this),aa(this),yt(19))};function Ka(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function Wu(c,y){var E=null;if(c.g==y){Ka(c),gl(c),c.g=null;var A=2}else if(Hr(c.h,y))E=y.G,sl(c.h,y),A=1;else return;if(c.I!=0){if(y.o)if(A==1){E=y.u?y.u.length:0,y=Date.now()-y.F;var z=c.D;A=ci(),wt(A,new tr(A,E)),Yr(c)}else Qu(c);else if(z=y.m,z==3||z==0&&y.X>0||!(A==1&&$a(c,y)||A==2&&aa(c)))switch(E&&E.length>0&&(y=c.h,y.i=y.i.concat(E)),z){case 1:Qr(c,5);break;case 4:Qr(c,10);break;case 3:Qr(c,6);break;default:Qr(c,2)}}}function Ju(c,y){let E=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(E*=2),E*y}function Qr(c,y){if(c.j.info("Error code "+y),y==2){var E=g(c.bb,c),A=c.Ua;const z=!A;A=new jn(A||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||tn(A,"https"),Zs(A),z?Sr(A.toString(),E):hl(A.toString(),E)}else yt(2);c.I=0,c.l&&c.l.pa(y),Zu(c),Ga(c)}i.bb=function(c){c?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Zu(c){if(c.I=0,c.ja=[],c.l){const y=al(c.h);(y.length!=0||c.i.length!=0)&&(Y(c.ja,y),Y(c.ja,c.i),c.h.i.length=0,M(c.i),c.i.length=0),c.l.oa()}}function ec(c,y,E){var A=E instanceof jn?jt(E):new jn(E);if(A.g!="")y&&(A.g=y+"."+A.g),Ki(A,A.u);else{var z=h.location;A=z.protocol,y=y?y+"."+z.hostname:z.hostname,z=+z.port;const G=new jn(null);A&&tn(G,A),y&&(G.g=y),z&&Ki(G,z),E&&(G.h=E),A=G}return E=c.G,y=c.wa,E&&y&&tt(A,E,y),tt(A,"VER",c.ka),sa(c,A),A}function tc(c,y,E){if(y&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return y=c.Aa&&!c.ma?new st(new Gr({ab:E})):new st(c.ma),y.Fa(c.L),y}i.isActive=function(){return!!this.l&&this.l.isActive(this)};function nc(){}i=nc.prototype,i.ra=function(){},i.qa=function(){},i.pa=function(){},i.oa=function(){},i.isActive=function(){return!0},i.Ka=function(){};function ts(){}ts.prototype.g=function(c,y){return new wn(c,y)};function wn(c,y){Tt.call(this),this.g=new Zi(y),this.l=c,this.h=y&&y.messageUrlParams||null,c=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(c?c["X-WebChannel-Content-Type"]=y.messageContentType:c={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.sa&&(c?c["X-WebChannel-Client-Profile"]=y.sa:c={"X-WebChannel-Client-Profile":y.sa}),this.g.U=c,(c=y&&y.Qb)&&!R(c)&&(this.g.u=c),this.A=y&&y.supportsCrossDomainXhr||!1,this.v=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!R(y)&&(this.g.G=y,c=this.h,c!==null&&y in c&&(c=this.h,y in c&&delete c[y])),this.j=new mi(this)}T(wn,Tt),wn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},wn.prototype.close=function(){pl(this.g)},wn.prototype.o=function(c){var y=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.v&&(E={},E.__data__=er(c),c=E);y.i.push(new xt(y.Ya++,c)),y.I==3&&Yr(y)},wn.prototype.N=function(){this.g.l=null,delete this.j,pl(this.g),delete this.g,wn.Z.N.call(this)};function rc(c){Wt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var y=c.__sm__;if(y){e:{for(const E in y){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,y=y!==null&&c in y?y[c]:void 0),this.data=y}else this.data=c}T(rc,Wt);function ic(){In.call(this),this.status=1}T(ic,In);function mi(c){this.g=c}T(mi,nc),mi.prototype.ra=function(){wt(this.g,"a")},mi.prototype.qa=function(c){wt(this.g,new rc(c))},mi.prototype.pa=function(c){wt(this.g,new ic)},mi.prototype.oa=function(){wt(this.g,"b")},ts.prototype.createWebChannel=ts.prototype.g,wn.prototype.send=wn.prototype.o,wn.prototype.open=wn.prototype.m,wn.prototype.close=wn.prototype.close,iS=function(){return new ts},rS=function(){return ci()},nS=St,Xp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,Ah=Ie,ke.COMPLETE="complete",tS=ke,ui.EventType=Xt,Xt.OPEN="a",Xt.CLOSE="b",Xt.ERROR="c",Xt.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,su=ui,st.prototype.listenOnce=st.prototype.K,st.prototype.getLastError=st.prototype.Ha,st.prototype.getLastErrorCode=st.prototype.ya,st.prototype.getStatus=st.prototype.ca,st.prototype.getResponseJson=st.prototype.La,st.prototype.getResponseText=st.prototype.la,st.prototype.send=st.prototype.ea,st.prototype.setWithCredentials=st.prototype.Fa,eS=st}).apply(typeof ch<"u"?ch:typeof self<"u"?self:typeof window<"u"?window:{});class En{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}En.UNAUTHENTICATED=new En(null),En.GOOGLE_CREDENTIALS=new En("google-credentials-uid"),En.FIRST_PARTY=new En("first-party-uid"),En.MOCK_USER=new En("mock-user");let Xo="12.8.0";function oD(i){Xo=i}const Na=new vm("@firebase/firestore");function Ro(){return Na.logLevel}function me(i,...e){if(Na.logLevel<=Fe.DEBUG){const n=e.map(Nm);Na.debug(`Firestore (${Xo}): ${i}`,...n)}}function zi(i,...e){if(Na.logLevel<=Fe.ERROR){const n=e.map(Nm);Na.error(`Firestore (${Xo}): ${i}`,...n)}}function zo(i,...e){if(Na.logLevel<=Fe.WARN){const n=e.map(Nm);Na.warn(`Firestore (${Xo}): ${i}`,...n)}}function Nm(i){if(typeof i=="string")return i;try{return(function(n){return JSON.stringify(n)})(i)}catch{return i}}function we(i,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,sS(i,s,n)}function sS(i,e,n){let s=`FIRESTORE (${Xo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${i.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw zi(s),new Error(s)}function Ze(i,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,i||sS(e,o,s)}function Me(i,e){return i}const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class de extends qi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ki{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class aS{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class lD{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(En.UNAUTHENTICATED)))}shutdown(){}}class uD{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class cD{constructor(e){this.t=e,this.currentUser=En.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ze(this.o===void 0,42304);let s=this.i;const o=m=>this.i!==s?(s=this.i,n(m)):Promise.resolve();let u=new ki;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ki,e.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const m=u;e.enqueueRetryable((async()=>{await m.promise,await o(this.currentUser)}))},p=m=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((m=>p(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?p(m):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ki)}}),0),h()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ze(typeof s.accessToken=="string",31837,{l:s}),new aS(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string",2055,{h:e}),new En(e)}}class hD{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=En.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class fD{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new hD(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(En.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class CE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class dD{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yr(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ze(this.o===void 0,3512);const s=u=>{u.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,me("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new CE(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Ze(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new CE(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function pD(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<i;s++)n[s]=Math.floor(256*Math.random());return n}class Om{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=pD(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ge(i,e){return i<e?-1:i>e?1:0}function Wp(i,e){const n=Math.min(i.length,e.length);for(let s=0;s<n;s++){const o=i.charAt(s),u=e.charAt(s);if(o!==u)return Op(o)===Op(u)?Ge(o,u):Op(o)?1:-1}return Ge(i.length,e.length)}const mD=55296,gD=57343;function Op(i){const e=i.charCodeAt(0);return e>=mD&&e<=gD}function Bo(i,e,n){return i.length===e.length&&i.every(((s,o)=>n(s,e[o])))}const DE="__name__";class ti{constructor(e,n,s){n===void 0?n=0:n>e.length&&we(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&we(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return ti.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ti?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=ti.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ge(e.length,n.length)}static compareSegments(e,n){const s=ti.isNumericId(e),o=ti.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?ti.extractNumericId(e).compare(ti.extractNumericId(n)):Wp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return xs.fromString(e.substring(4,e.length-2))}}class dt extends ti{construct(e,n,s){return new dt(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new de(ne.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new dt(n)}static emptyPath(){return new dt([])}}const yD=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class hn extends ti{construct(e,n,s){return new hn(e,n,s)}static isValidIdentifier(e){return yD.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),hn.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===DE}static keyField(){return new hn([DE])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let h=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new de(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[o+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new de(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=m,o+=2}else p==="`"?(h=!h,o++):p!=="."||h?(s+=p,o++):(u(),o++)}if(u(),h)throw new de(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new hn(n)}static emptyPath(){return new hn([])}}class Te{constructor(e){this.path=e}static fromPath(e){return new Te(dt.fromString(e))}static fromName(e){return new Te(dt.fromString(e).popFirst(5))}static empty(){return new Te(dt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&dt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return dt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new dt(e.slice()))}}function oS(i,e,n){if(!n)throw new de(ne.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function _D(i,e,n,s){if(e===!0&&s===!0)throw new de(ne.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function NE(i){if(!Te.isDocumentKey(i))throw new de(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function OE(i){if(Te.isDocumentKey(i))throw new de(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function lS(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function rf(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":we(12329,{type:typeof i})}function xr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new de(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rf(i);throw new de(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function vD(i,e){if(e<=0)throw new de(ne.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}function Qt(i,e){const n={typeString:i};return e&&(n.value=e),n}function Lu(i,e){if(!lS(i))throw new de(ne.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in i)){n=`JSON missing required field: '${s}'`;break}const h=i[s];if(o&&typeof h!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new de(ne.INVALID_ARGUMENT,n);return!0}const ME=-62135596800,VE=1e6;class gt{static now(){return gt.fromMillis(Date.now())}static fromDate(e){return gt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*VE);return new gt(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new de(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<ME)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new de(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/VE}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:gt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Lu(e,gt._jsonSchema))return new gt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ME;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}gt._jsonSchemaVersion="firestore/timestamp/1.0",gt._jsonSchema={type:Qt("string",gt._jsonSchemaVersion),seconds:Qt("number"),nanoseconds:Qt("number")};class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new gt(0,0))}static max(){return new Ce(new gt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Tu=-1;function ED(i,e){const n=i.toTimestamp().seconds,s=i.toTimestamp().nanoseconds+1,o=Ce.fromTimestamp(s===1e9?new gt(n+1,0):new gt(n,s));return new Ps(o,Te.empty(),e)}function TD(i){return new Ps(i.readTime,i.key,Tu)}class Ps{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new Ps(Ce.min(),Te.empty(),Tu)}static max(){return new Ps(Ce.max(),Te.empty(),Tu)}}function SD(i,e){let n=i.readTime.compareTo(e.readTime);return n!==0?n:(n=Te.comparator(i.documentKey,e.documentKey),n!==0?n:Ge(i.largestBatchId,e.largestBatchId))}const AD="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bD{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Wo(i){if(i.code!==ne.FAILED_PRECONDITION||i.message!==AD)throw i;me("LocalStore","Unexpectedly lost primary lease")}class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&we(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ie(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof ie?n:ie.resolve(n)}catch(n){return ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):ie.reject(n)}static resolve(e){return new ie(((n,s)=>{n(e)}))}static reject(e){return new ie(((n,s)=>{s(e)}))}static waitFor(e){return new ie(((n,s)=>{let o=0,u=0,h=!1;e.forEach((p=>{++o,p.next((()=>{++u,h&&u===o&&n()}),(m=>s(m)))})),h=!0,u===o&&n()}))}static or(e){let n=ie.resolve(!1);for(const s of e)n=n.next((o=>o?ie.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new ie(((s,o)=>{const u=e.length,h=new Array(u);let p=0;for(let m=0;m<u;m++){const g=m;n(e[g]).next((_=>{h[g]=_,++p,p===u&&s(h)}),(_=>o(_)))}}))}static doWhile(e,n){return new ie(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function wD(i){const e=i.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Jo(i){return i.name==="IndexedDbTransactionError"}class sf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}sf.ce=-1;const Mm=-1;function af(i){return i==null}function zh(i){return i===0&&1/i==-1/0}function RD(i){return typeof i=="number"&&Number.isInteger(i)&&!zh(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const uS="";function ID(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=xE(e)),e=CD(i.get(n),e);return xE(e)}function CD(i,e){let n=e;const s=i.length;for(let o=0;o<s;o++){const u=i.charAt(o);switch(u){case"\0":n+="";break;case uS:n+="";break;default:n+=u}}return n}function xE(i){return i+uS+""}function kE(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Gs(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function cS(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class bt{constructor(e,n){this.comparator=e,this.root=n||cn.EMPTY}insert(e,n){return new bt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new hh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new hh(this.root,e,this.comparator,!1)}getReverseIterator(){return new hh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new hh(this.root,e,this.comparator,!0)}}class hh{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??cn.RED,this.left=o??cn.EMPTY,this.right=u??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new cn(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return cn.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw we(43730,{key:this.key,value:this.value});if(this.right.isRed())throw we(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw we(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw we(57766)}get value(){throw we(16141)}get color(){throw we(16727)}get left(){throw we(29726)}get right(){throw we(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new cn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class en{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new PE(this.data.getIterator())}getIteratorFrom(e){return new PE(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof en)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new en(this.comparator);return n.data=e,n}}class PE{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Wn{constructor(e){this.fields=e,e.sort(hn.comparator)}static empty(){return new Wn([])}unionWith(e){let n=new en(hn.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new Wn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class hS extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new hS("Invalid base64 string: "+u):u}})(e);return new dn(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(e);return new dn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const DD=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(i){if(Ze(!!i,39018),typeof i=="string"){let e=0;const n=DD.exec(i);if(Ze(!!n,46558,{timestamp:i}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(i);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:zt(i.seconds),nanos:zt(i.nanos)}}function zt(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Us(i){return typeof i=="string"?dn.fromBase64String(i):dn.fromUint8Array(i)}const fS="server_timestamp",dS="__type__",pS="__previous_value__",mS="__local_write_time__";function Vm(i){return(i?.mapValue?.fields||{})[dS]?.stringValue===fS}function of(i){const e=i.mapValue.fields[pS];return Vm(e)?of(e):e}function Su(i){const e=Ls(i.mapValue.fields[mS].timestampValue);return new gt(e.seconds,e.nanos)}class ND{constructor(e,n,s,o,u,h,p,m,g,_,T){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_,this.apiKey=T}}const Bh="(default)";class Au{constructor(e,n){this.projectId=e,this.database=n||Bh}static empty(){return new Au("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(e){return e instanceof Au&&e.projectId===this.projectId&&e.database===this.database}}function OD(i,e){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new de(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Au(i.options.projectId,e)}const gS="__type__",MD="__max__",fh={mapValue:{}},yS="__vector__",jh="value";function zs(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Vm(i)?4:xD(i)?9007199254740991:VD(i)?10:11:we(28295,{value:i})}function oi(i,e){if(i===e)return!0;const n=zs(i);if(n!==zs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Su(i).isEqual(Su(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=Ls(o.timestampValue),p=Ls(u.timestampValue);return h.seconds===p.seconds&&h.nanos===p.nanos})(i,e);case 5:return i.stringValue===e.stringValue;case 6:return(function(o,u){return Us(o.bytesValue).isEqual(Us(u.bytesValue))})(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return(function(o,u){return zt(o.geoPointValue.latitude)===zt(u.geoPointValue.latitude)&&zt(o.geoPointValue.longitude)===zt(u.geoPointValue.longitude)})(i,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return zt(o.integerValue)===zt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=zt(o.doubleValue),p=zt(u.doubleValue);return h===p?zh(h)===zh(p):isNaN(h)&&isNaN(p)}return!1})(i,e);case 9:return Bo(i.arrayValue.values||[],e.arrayValue.values||[],oi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},p=u.mapValue.fields||{};if(kE(h)!==kE(p))return!1;for(const m in h)if(h.hasOwnProperty(m)&&(p[m]===void 0||!oi(h[m],p[m])))return!1;return!0})(i,e);default:return we(52216,{left:i})}}function bu(i,e){return(i.values||[]).find((n=>oi(n,e)))!==void 0}function jo(i,e){if(i===e)return 0;const n=zs(i),s=zs(e);if(n!==s)return Ge(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ge(i.booleanValue,e.booleanValue);case 2:return(function(u,h){const p=zt(u.integerValue||u.doubleValue),m=zt(h.integerValue||h.doubleValue);return p<m?-1:p>m?1:p===m?0:isNaN(p)?isNaN(m)?0:-1:1})(i,e);case 3:return LE(i.timestampValue,e.timestampValue);case 4:return LE(Su(i),Su(e));case 5:return Wp(i.stringValue,e.stringValue);case 6:return(function(u,h){const p=Us(u),m=Us(h);return p.compareTo(m)})(i.bytesValue,e.bytesValue);case 7:return(function(u,h){const p=u.split("/"),m=h.split("/");for(let g=0;g<p.length&&g<m.length;g++){const _=Ge(p[g],m[g]);if(_!==0)return _}return Ge(p.length,m.length)})(i.referenceValue,e.referenceValue);case 8:return(function(u,h){const p=Ge(zt(u.latitude),zt(h.latitude));return p!==0?p:Ge(zt(u.longitude),zt(h.longitude))})(i.geoPointValue,e.geoPointValue);case 9:return UE(i.arrayValue,e.arrayValue);case 10:return(function(u,h){const p=u.fields||{},m=h.fields||{},g=p[jh]?.arrayValue,_=m[jh]?.arrayValue,T=Ge(g?.values?.length||0,_?.values?.length||0);return T!==0?T:UE(g,_)})(i.mapValue,e.mapValue);case 11:return(function(u,h){if(u===fh.mapValue&&h===fh.mapValue)return 0;if(u===fh.mapValue)return 1;if(h===fh.mapValue)return-1;const p=u.fields||{},m=Object.keys(p),g=h.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let T=0;T<m.length&&T<_.length;++T){const b=Wp(m[T],_[T]);if(b!==0)return b;const M=jo(p[m[T]],g[_[T]]);if(M!==0)return M}return Ge(m.length,_.length)})(i.mapValue,e.mapValue);default:throw we(23264,{he:n})}}function LE(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return Ge(i,e);const n=Ls(i),s=Ls(e),o=Ge(n.seconds,s.seconds);return o!==0?o:Ge(n.nanos,s.nanos)}function UE(i,e){const n=i.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=jo(n[o],s[o]);if(u)return u}return Ge(n.length,s.length)}function qo(i){return Jp(i)}function Jp(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?(function(n){const s=Ls(n);return`time(${s.seconds},${s.nanos})`})(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?(function(n){return Us(n).toBase64()})(i.bytesValue):"referenceValue"in i?(function(n){return Te.fromName(n).toString()})(i.referenceValue):"geoPointValue"in i?(function(n){return`geo(${n.latitude},${n.longitude})`})(i.geoPointValue):"arrayValue"in i?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=Jp(u);return s+"]"})(i.arrayValue):"mapValue"in i?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of s)u?u=!1:o+=",",o+=`${h}:${Jp(n.fields[h])}`;return o+"}"})(i.mapValue):we(61005,{value:i})}function bh(i){switch(zs(i)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=of(i);return e?16+bh(e):16;case 5:return 2*i.stringValue.length;case 6:return Us(i.bytesValue).approximateByteSize();case 7:return i.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+bh(u)),0)})(i.arrayValue);case 10:case 11:return(function(s){let o=0;return Gs(s.fields,((u,h)=>{o+=u.length+bh(h)})),o})(i.mapValue);default:throw we(13486,{value:i})}}function zE(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Zp(i){return!!i&&"integerValue"in i}function xm(i){return!!i&&"arrayValue"in i}function BE(i){return!!i&&"nullValue"in i}function jE(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function wh(i){return!!i&&"mapValue"in i}function VD(i){return(i?.mapValue?.fields||{})[gS]?.stringValue===yS}function hu(i){if(i.geoPointValue)return{geoPointValue:{...i.geoPointValue}};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:{...i.timestampValue}};if(i.mapValue){const e={mapValue:{fields:{}}};return Gs(i.mapValue.fields,((n,s)=>e.mapValue.fields[n]=hu(s))),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=hu(i.arrayValue.values[n]);return e}return{...i}}function xD(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===MD}class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!wh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=hu(n)}setAll(e){let n=hn.emptyPath(),s={},o=[];e.forEach(((h,p)=>{if(!n.isImmediateParentOf(p)){const m=this.getFieldsMap(n);this.applyChanges(m,s,o),s={},o=[],n=p.popLast()}h?s[p.lastSegment()]=hu(h):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());wh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return oi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];wh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){Gs(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new Pn(hu(this.value))}}function _S(i){const e=[];return Gs(i.fields,((n,s)=>{const o=new hn([n]);if(wh(s)){const u=_S(s.mapValue).fields;if(u.length===0)e.push(o);else for(const h of u)e.push(o.child(h))}else e.push(o)})),new Wn(e)}class Sn{constructor(e,n,s,o,u,h,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=h,this.documentState=p}static newInvalidDocument(e){return new Sn(e,0,Ce.min(),Ce.min(),Ce.min(),Pn.empty(),0)}static newFoundDocument(e,n,s,o){return new Sn(e,1,n,Ce.min(),s,o,0)}static newNoDocument(e,n){return new Sn(e,2,n,Ce.min(),Ce.min(),Pn.empty(),0)}static newUnknownDocument(e,n){return new Sn(e,3,n,Ce.min(),Ce.min(),Pn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Sn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Sn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class qh{constructor(e,n){this.position=e,this.inclusive=n}}function qE(i,e,n){let s=0;for(let o=0;o<i.position.length;o++){const u=e[o],h=i.position[o];if(u.field.isKeyField()?s=Te.comparator(Te.fromName(h.referenceValue),n.key):s=jo(h,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function HE(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!oi(i.position[n],e.position[n]))return!1;return!0}class wu{constructor(e,n="asc"){this.field=e,this.dir=n}}function kD(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}class vS{}class Yt extends vS{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new LD(e,n,s):n==="array-contains"?new BD(e,s):n==="in"?new jD(e,s):n==="not-in"?new qD(e,s):n==="array-contains-any"?new HD(e,s):new Yt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new UD(e,s):new zD(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(jo(n,this.value)):n!==null&&zs(this.value)===zs(n)&&this.matchesComparison(jo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return we(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kr extends vS{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new kr(e,n)}matches(e){return ES(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ES(i){return i.op==="and"}function TS(i){return PD(i)&&ES(i)}function PD(i){for(const e of i.filters)if(e instanceof kr)return!1;return!0}function em(i){if(i instanceof Yt)return i.field.canonicalString()+i.op.toString()+qo(i.value);if(TS(i))return i.filters.map((e=>em(e))).join(",");{const e=i.filters.map((n=>em(n))).join(",");return`${i.op}(${e})`}}function SS(i,e){return i instanceof Yt?(function(s,o){return o instanceof Yt&&s.op===o.op&&s.field.isEqual(o.field)&&oi(s.value,o.value)})(i,e):i instanceof kr?(function(s,o){return o instanceof kr&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,h,p)=>u&&SS(h,o.filters[p])),!0):!1})(i,e):void we(19439)}function AS(i){return i instanceof Yt?(function(n){return`${n.field.canonicalString()} ${n.op} ${qo(n.value)}`})(i):i instanceof kr?(function(n){return n.op.toString()+" {"+n.getFilters().map(AS).join(" ,")+"}"})(i):"Filter"}class LD extends Yt{constructor(e,n,s){super(e,n,s),this.key=Te.fromName(s.referenceValue)}matches(e){const n=Te.comparator(e.key,this.key);return this.matchesComparison(n)}}class UD extends Yt{constructor(e,n){super(e,"in",n),this.keys=bS("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class zD extends Yt{constructor(e,n){super(e,"not-in",n),this.keys=bS("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function bS(i,e){return(e.arrayValue?.values||[]).map((n=>Te.fromName(n.referenceValue)))}class BD extends Yt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xm(n)&&bu(n.arrayValue,this.value)}}class jD extends Yt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&bu(this.value.arrayValue,n)}}class qD extends Yt{constructor(e,n){super(e,"not-in",n)}matches(e){if(bu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!bu(this.value.arrayValue,n)}}class HD extends Yt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>bu(this.value.arrayValue,s)))}}class FD{constructor(e,n=null,s=[],o=[],u=null,h=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=h,this.endAt=p,this.Te=null}}function FE(i,e=null,n=[],s=[],o=null,u=null,h=null){return new FD(i,e,n,s,o,u,h)}function km(i){const e=Me(i);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>em(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),af(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>qo(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>qo(s))).join(",")),e.Te=n}return e.Te}function Pm(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<i.orderBy.length;n++)if(!kD(i.orderBy[n],e.orderBy[n]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let n=0;n<i.filters.length;n++)if(!SS(i.filters[n],e.filters[n]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!HE(i.startAt,e.startAt)&&HE(i.endAt,e.endAt)}function tm(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}class Zo{constructor(e,n=null,s=[],o=[],u=null,h="F",p=null,m=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=h,this.startAt=p,this.endAt=m,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function GD(i,e,n,s,o,u,h,p){return new Zo(i,e,n,s,o,u,h,p)}function Lm(i){return new Zo(i)}function GE(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function $D(i){return Te.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function wS(i){return i.collectionGroup!==null}function fu(i){const e=Me(i);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let p=new en(hn.comparator);return h.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(p=p.add(g.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new wu(u,s))})),n.has(hn.keyField().canonicalString())||e.Ie.push(new wu(hn.keyField(),s))}return e.Ie}function ii(i){const e=Me(i);return e.Ee||(e.Ee=KD(e,fu(i))),e.Ee}function KD(i,e){if(i.limitType==="F")return FE(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new wu(o.field,u)}));const n=i.endAt?new qh(i.endAt.position,i.endAt.inclusive):null,s=i.startAt?new qh(i.startAt.position,i.startAt.inclusive):null;return FE(i.path,i.collectionGroup,e,i.filters,i.limit,n,s)}}function nm(i,e){const n=i.filters.concat([e]);return new Zo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),n,i.limit,i.limitType,i.startAt,i.endAt)}function YD(i,e){const n=i.explicitOrderBy.concat([e]);return new Zo(i.path,i.collectionGroup,n,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function Hh(i,e,n){return new Zo(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function lf(i,e){return Pm(ii(i),ii(e))&&i.limitType===e.limitType}function RS(i){return`${km(ii(i))}|lt:${i.limitType}`}function Io(i){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>AS(o))).join(", ")}]`),af(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>qo(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>qo(o))).join(",")),`Target(${s})`})(ii(i))}; limitType=${i.limitType})`}function uf(i,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):Te.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(i,e)&&(function(s,o){for(const u of fu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(i,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(i,e)&&(function(s,o){return!(s.startAt&&!(function(h,p,m){const g=qE(h,p,m);return h.inclusive?g<=0:g<0})(s.startAt,fu(s),o)||s.endAt&&!(function(h,p,m){const g=qE(h,p,m);return h.inclusive?g>=0:g>0})(s.endAt,fu(s),o))})(i,e)}function QD(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function IS(i){return(e,n)=>{let s=!1;for(const o of fu(i)){const u=XD(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function XD(i,e,n){const s=i.field.isKeyField()?Te.comparator(e.key,n.key):(function(u,h,p){const m=h.data.field(u),g=p.data.field(u);return m!==null&&g!==null?jo(m,g):we(42886)})(i.field,e,n);switch(i.dir){case"asc":return s;case"desc":return-1*s;default:return we(19790,{direction:i.dir})}}class xa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return cS(this.inner)}size(){return this.innerSize}}const WD=new bt(Te.comparator);function Bi(){return WD}const CS=new bt(Te.comparator);function au(...i){let e=CS;for(const n of i)e=e.insert(n.key,n);return e}function DS(i){let e=CS;return i.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function ba(){return du()}function NS(){return du()}function du(){return new xa((i=>i.toString()),((i,e)=>i.isEqual(e)))}const JD=new bt(Te.comparator),ZD=new en(Te.comparator);function $e(...i){let e=ZD;for(const n of i)e=e.add(n);return e}const eN=new en(Ge);function tN(){return eN}function Um(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zh(e)?"-0":e}}function OS(i){return{integerValue:""+i}}function nN(i,e){return RD(e)?OS(e):Um(i,e)}class cf{constructor(){this._=void 0}}function rN(i,e,n){return i instanceof Fh?(function(o,u){const h={fields:{[dS]:{stringValue:fS},[mS]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Vm(u)&&(u=of(u)),u&&(h.fields[pS]=u),{mapValue:h}})(n,e):i instanceof Ru?VS(i,e):i instanceof Iu?xS(i,e):(function(o,u){const h=MS(o,u),p=$E(h)+$E(o.Ae);return Zp(h)&&Zp(o.Ae)?OS(p):Um(o.serializer,p)})(i,e)}function iN(i,e,n){return i instanceof Ru?VS(i,e):i instanceof Iu?xS(i,e):n}function MS(i,e){return i instanceof Gh?(function(s){return Zp(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class Fh extends cf{}class Ru extends cf{constructor(e){super(),this.elements=e}}function VS(i,e){const n=kS(e);for(const s of i.elements)n.some((o=>oi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class Iu extends cf{constructor(e){super(),this.elements=e}}function xS(i,e){let n=kS(e);for(const s of i.elements)n=n.filter((o=>!oi(o,s)));return{arrayValue:{values:n}}}class Gh extends cf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function $E(i){return zt(i.integerValue||i.doubleValue)}function kS(i){return xm(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function sN(i,e){return i.field.isEqual(e.field)&&(function(s,o){return s instanceof Ru&&o instanceof Ru||s instanceof Iu&&o instanceof Iu?Bo(s.elements,o.elements,oi):s instanceof Gh&&o instanceof Gh?oi(s.Ae,o.Ae):s instanceof Fh&&o instanceof Fh})(i.transform,e.transform)}class aN{constructor(e,n){this.version=e,this.transformResults=n}}class vr{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new vr}static exists(e){return new vr(void 0,e)}static updateTime(e){return new vr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Rh(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class hf{}function PS(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new zm(i.key,vr.none()):new Uu(i.key,i.data,vr.none());{const n=i.data,s=Pn.empty();let o=new en(hn.comparator);for(let u of e.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?s.delete(u):s.set(u,h),o=o.add(u)}return new $s(i.key,s,new Wn(o.toArray()),vr.none())}}function oN(i,e,n){i instanceof Uu?(function(o,u,h){const p=o.value.clone(),m=YE(o.fieldTransforms,u,h.transformResults);p.setAll(m),u.convertToFoundDocument(h.version,p).setHasCommittedMutations()})(i,e,n):i instanceof $s?(function(o,u,h){if(!Rh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const p=YE(o.fieldTransforms,u,h.transformResults),m=u.data;m.setAll(LS(o)),m.setAll(p),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(i,e,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,e,n)}function pu(i,e,n,s){return i instanceof Uu?(function(u,h,p,m){if(!Rh(u.precondition,h))return p;const g=u.value.clone(),_=QE(u.fieldTransforms,m,h);return g.setAll(_),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null})(i,e,n,s):i instanceof $s?(function(u,h,p,m){if(!Rh(u.precondition,h))return p;const g=QE(u.fieldTransforms,m,h),_=h.data;return _.setAll(LS(u)),_.setAll(g),h.convertToFoundDocument(h.version,_).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((T=>T.field)))})(i,e,n,s):(function(u,h,p){return Rh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):p})(i,e,n)}function lN(i,e){let n=null;for(const s of i.fieldTransforms){const o=e.data.field(s.field),u=MS(s.transform,o||null);u!=null&&(n===null&&(n=Pn.empty()),n.set(s.field,u))}return n||null}function KE(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&Bo(s,o,((u,h)=>sN(u,h)))})(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class Uu extends hf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class $s extends hf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function LS(i){const e=new Map;return i.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=i.data.field(n);e.set(n,s)}})),e}function YE(i,e,n){const s=new Map;Ze(i.length===n.length,32656,{Ve:n.length,de:i.length});for(let o=0;o<n.length;o++){const u=i[o],h=u.transform,p=e.data.field(u.field);s.set(u.field,iN(h,p,n[o]))}return s}function QE(i,e,n){const s=new Map;for(const o of i){const u=o.transform,h=n.data.field(o.field);s.set(o.field,rN(u,h,e))}return s}class zm extends hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class uN extends hf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class cN{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&oN(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=pu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=pu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=NS();return this.mutations.forEach((o=>{const u=e.get(o.key),h=u.overlayedDocument;let p=this.applyToLocalView(h,u.mutatedFields);p=n.has(o.key)?null:p;const m=PS(h,p);m!==null&&s.set(o.key,m),h.isValidDocument()||h.convertToNoDocument(Ce.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),$e())}isEqual(e){return this.batchId===e.batchId&&Bo(this.mutations,e.mutations,((n,s)=>KE(n,s)))&&Bo(this.baseMutations,e.baseMutations,((n,s)=>KE(n,s)))}}class Bm{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Ze(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return JD})();const u=e.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,s[h].version);return new Bm(e,n,s,o)}}class hN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class fN{constructor(e,n){this.count=e,this.unchangedNames=n}}var $t,Ye;function dN(i){switch(i){case ne.OK:return we(64938);case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return we(15467,{code:i})}}function US(i){if(i===void 0)return zi("GRPC error has no .code"),ne.UNKNOWN;switch(i){case $t.OK:return ne.OK;case $t.CANCELLED:return ne.CANCELLED;case $t.UNKNOWN:return ne.UNKNOWN;case $t.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case $t.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case $t.INTERNAL:return ne.INTERNAL;case $t.UNAVAILABLE:return ne.UNAVAILABLE;case $t.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case $t.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case $t.NOT_FOUND:return ne.NOT_FOUND;case $t.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case $t.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case $t.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case $t.ABORTED:return ne.ABORTED;case $t.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case $t.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case $t.DATA_LOSS:return ne.DATA_LOSS;default:return we(39323,{code:i})}}(Ye=$t||($t={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";function pN(){return new TextEncoder}const mN=new xs([4294967295,4294967295],0);function XE(i){const e=pN().encode(i),n=new Z0;return n.update(e),new Uint8Array(n.digest())}function WE(i){const e=new DataView(i.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new xs([n,s],0),new xs([o,u],0)]}class jm{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new ou(`Invalid padding: ${n}`);if(s<0)throw new ou(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new ou(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new ou(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=xs.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(xs.fromNumber(s)));return o.compare(mN)===1&&(o=new xs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=XE(e),[s,o]=WE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);if(!this.we(h))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),h=new jm(u,o,n);return s.forEach((p=>h.insert(p))),h}insert(e){if(this.ge===0)return;const n=XE(e),[s,o]=WE(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(s,o,u);this.be(h)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class ou extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ff{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,zu.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new ff(Ce.min(),o,new bt(Ge),Bi(),$e())}}class zu{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new zu(s,n,$e(),$e(),$e())}}class Ih{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class zS{constructor(e,n){this.targetId=e,this.Ce=n}}class BS{constructor(e,n,s=dn.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class JE{constructor(){this.ve=0,this.Fe=ZE(),this.Me=dn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=$e(),n=$e(),s=$e();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:we(38017,{changeType:u})}})),new zu(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=ZE()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ze(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class gN{constructor(e){this.Ge=e,this.ze=new Map,this.je=Bi(),this.He=dh(),this.Je=dh(),this.Ze=new bt(Ge)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:we(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(tm(u))if(s===0){const h=new Te(u.path);this.et(n,h,Sn.newNoDocument(h,Ce.min()))}else Ze(s===1,20013,{expectedCount:s});else{const h=this._t(n);if(h!==s){const p=this.ut(e),m=p?this.ct(p,e,h):1;if(m!==0){this.it(n);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,g)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let h,p;try{h=Us(s).toUint8Array()}catch(m){if(m instanceof hS)return zo("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{p=new jm(h,o,u)}catch(m){return zo(m instanceof ou?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const h=this.Ge.ht(),p=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,h)=>{const p=this.ot(h);if(p){if(u.current&&tm(p.target)){const m=new Te(p.target.path);this.It(m).has(h)||this.Et(h,m)||this.et(h,m,Sn.newNoDocument(m,e))}u.Be&&(n.set(h,u.ke()),u.Ke())}}));let s=$e();this.Je.forEach(((u,h)=>{let p=!0;h.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(e)));const o=new ff(e,n,this.Ze,this.je,s);return this.je=Bi(),this.He=dh(),this.Je=dh(),this.Ze=new bt(Ge),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new JE,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new en(Ge),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new en(Ge),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||me("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new JE),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function dh(){return new bt(Te.comparator)}function ZE(){return new bt(Te.comparator)}const yN={asc:"ASCENDING",desc:"DESCENDING"},_N={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},vN={and:"AND",or:"OR"};class EN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rm(i,e){return i.useProto3Json||af(e)?e:{value:e}}function $h(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jS(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function TN(i,e){return $h(i,e.toTimestamp())}function si(i){return Ze(!!i,49232),Ce.fromTimestamp((function(n){const s=Ls(n);return new gt(s.seconds,s.nanos)})(i))}function qm(i,e){return im(i,e).canonicalString()}function im(i,e){const n=(function(o){return new dt(["projects",o.projectId,"databases",o.database])})(i).child("documents");return e===void 0?n:n.child(e)}function qS(i){const e=dt.fromString(i);return Ze(KS(e),10190,{key:e.toString()}),e}function sm(i,e){return qm(i.databaseId,e.path)}function Mp(i,e){const n=qS(e);if(n.get(1)!==i.databaseId.projectId)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new de(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new Te(FS(n))}function HS(i,e){return qm(i.databaseId,e)}function SN(i){const e=qS(i);return e.length===4?dt.emptyPath():FS(e)}function am(i){return new dt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function FS(i){return Ze(i.length>4&&i.get(4)==="documents",29091,{key:i.toString()}),i.popFirst(5)}function eT(i,e,n){return{name:sm(i,e),fields:n.value.mapValue.fields}}function AN(i,e){let n;if("targetChange"in e){e.targetChange;const s=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:we(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(g,_){return g.useProto3Json?(Ze(_===void 0||typeof _=="string",58123),dn.fromBase64String(_||"")):(Ze(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),dn.fromUint8Array(_||new Uint8Array))})(i,e.targetChange.resumeToken),h=e.targetChange.cause,p=h&&(function(g){const _=g.code===void 0?ne.UNKNOWN:US(g.code);return new de(_,g.message||"")})(h);n=new BS(s,o,u,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Mp(i,s.document.name),u=si(s.document.updateTime),h=s.document.createTime?si(s.document.createTime):Ce.min(),p=new Pn({mapValue:{fields:s.document.fields}}),m=Sn.newFoundDocument(o,u,h,p),g=s.targetIds||[],_=s.removedTargetIds||[];n=new Ih(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Mp(i,s.document),u=s.readTime?si(s.readTime):Ce.min(),h=Sn.newNoDocument(o,u),p=s.removedTargetIds||[];n=new Ih([],p,h.key,h)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Mp(i,s.document),u=s.removedTargetIds||[];n=new Ih([],u,o,null)}else{if(!("filter"in e))return we(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,h=new fN(o,u),p=s.targetId;n=new zS(p,h)}}return n}function bN(i,e){let n;if(e instanceof Uu)n={update:eT(i,e.key,e.value)};else if(e instanceof zm)n={delete:sm(i,e.key)};else if(e instanceof $s)n={update:eT(i,e.key,e.data),updateMask:VN(e.fieldMask)};else{if(!(e instanceof uN))return we(16599,{dt:e.type});n={verify:sm(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,h){const p=h.transform;if(p instanceof Fh)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Ru)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Iu)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gh)return{fieldPath:h.field.canonicalString(),increment:p.Ae};throw we(20930,{transform:h.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:TN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:we(27497)})(i,e.precondition)),n}function wN(i,e){return i&&i.length>0?(Ze(e!==void 0,14353),i.map((n=>(function(o,u){let h=o.updateTime?si(o.updateTime):si(u);return h.isEqual(Ce.min())&&(h=si(u)),new aN(h,o.transformResults||[])})(n,e)))):[]}function RN(i,e){return{documents:[HS(i,e.path)]}}function IN(i,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=HS(i,o);const u=(function(g){if(g.length!==0)return $S(kr.create(g,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const h=(function(g){if(g.length!==0)return g.map((_=>(function(b){return{field:Co(b.field),direction:NN(b.dir)}})(_)))})(e.orderBy);h&&(n.structuredQuery.orderBy=h);const p=rm(i,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:n,parent:o}}function CN(i){let e=SN(i.parent);const n=i.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Ze(s===1,65062);const _=n.from[0];_.allDescendants?o=_.collectionId:e=e.child(_.collectionId)}let u=[];n.where&&(u=(function(T){const b=GS(T);return b instanceof kr&&TS(b)?b.getFilters():[b]})(n.where));let h=[];n.orderBy&&(h=(function(T){return T.map((b=>(function(Y){return new wu(Do(Y.field),(function(H){switch(H){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(Y.direction))})(b)))})(n.orderBy));let p=null;n.limit&&(p=(function(T){let b;return b=typeof T=="object"?T.value:T,af(b)?null:b})(n.limit));let m=null;n.startAt&&(m=(function(T){const b=!!T.before,M=T.values||[];return new qh(M,b)})(n.startAt));let g=null;return n.endAt&&(g=(function(T){const b=!T.before,M=T.values||[];return new qh(M,b)})(n.endAt)),GD(e,o,h,u,p,"F",m,g)}function DN(i,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return we(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GS(i){return i.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=Do(n.unaryFilter.field);return Yt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Do(n.unaryFilter.field);return Yt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Do(n.unaryFilter.field);return Yt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=Do(n.unaryFilter.field);return Yt.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return we(61313);default:return we(60726)}})(i):i.fieldFilter!==void 0?(function(n){return Yt.create(Do(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return we(58110);default:return we(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(i):i.compositeFilter!==void 0?(function(n){return kr.create(n.compositeFilter.filters.map((s=>GS(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return we(1026)}})(n.compositeFilter.op))})(i):we(30097,{filter:i})}function NN(i){return yN[i]}function ON(i){return _N[i]}function MN(i){return vN[i]}function Co(i){return{fieldPath:i.canonicalString()}}function Do(i){return hn.fromServerFormat(i.fieldPath)}function $S(i){return i instanceof Yt?(function(n){if(n.op==="=="){if(jE(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NAN"}};if(BE(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jE(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NAN"}};if(BE(n.value))return{unaryFilter:{field:Co(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Co(n.field),op:ON(n.op),value:n.value}}})(i):i instanceof kr?(function(n){const s=n.getFilters().map((o=>$S(o)));return s.length===1?s[0]:{compositeFilter:{op:MN(n.op),filters:s}}})(i):we(54877,{filter:i})}function VN(i){const e=[];return i.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function KS(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}function YS(i){return!!i&&typeof i._toProto=="function"&&i._protoValueType==="ProtoValue"}class Ds{constructor(e,n,s,o,u=Ce.min(),h=Ce.min(),p=dn.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new Ds(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ds(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class xN{constructor(e){this.yt=e}}function kN(i){const e=CN({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Hh(e,e.limit,"L"):e}class PN{constructor(){this.Sn=new LN}addToCollectionParentIndex(e,n){return this.Sn.add(n),ie.resolve()}getCollectionParents(e,n){return ie.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return ie.resolve()}deleteFieldIndex(e,n){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,n){return ie.resolve()}getDocumentsMatchingTarget(e,n){return ie.resolve(null)}getIndexType(e,n){return ie.resolve(0)}getFieldIndexes(e,n){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,n){return ie.resolve(Ps.min())}getMinOffsetFromCollectionGroup(e,n){return ie.resolve(Ps.min())}updateCollectionGroup(e,n,s){return ie.resolve()}updateIndexEntries(e,n){return ie.resolve()}}class LN{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new en(dt.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new en(dt.comparator)).toArray()}}const tT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},QS=41943040;class kn{static withCacheSize(e){return new kn(e,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}kn.DEFAULT_COLLECTION_PERCENTILE=10,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,kn.DEFAULT=new kn(QS,kn.DEFAULT_COLLECTION_PERCENTILE,kn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),kn.DISABLED=new kn(-1,0,0);class Ho{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Ho(0)}static ar(){return new Ho(-1)}}const nT="LruGarbageCollector",UN=1048576;function rT([i,e],[n,s]){const o=Ge(i,n);return o===0?Ge(e,s):o}class zN{constructor(e){this.Pr=e,this.buffer=new en(rT),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();rT(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class BN{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){me(nT,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Jo(n)?me(nT,"Ignoring IndexedDB error during garbage collection: ",n):await Wo(n)}await this.Ar(3e5)}))}}class jN{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return ie.resolve(sf.ce);const s=new zN(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(tT)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tT):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,u,h,p,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),o=this.params.maximumSequenceNumbersToCollect):o=T,h=Date.now(),this.nthSequenceNumber(e,o)))).next((T=>(s=T,p=Date.now(),this.removeTargets(e,s,n)))).next((T=>(u=T,m=Date.now(),this.removeOrphanedDocuments(e,s)))).next((T=>(g=Date.now(),Ro()<=Fe.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-_}ms
	Determined least recently used ${o} in `+(p-h)+`ms
	Removed ${u} targets in `+(m-p)+`ms
	Removed ${T} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:T}))))}}function qN(i,e){return new jN(i,e)}class HN{constructor(){this.changes=new xa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Sn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?ie.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class FN{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class GN{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&pu(s.mutation,o,Wn.empty(),gt.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,$e()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=$e()){const o=ba();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let h=au();return u.forEach(((p,m)=>{h=h.insert(p,m.overlayedDocument)})),h}))))}getOverlayedDocuments(e,n){const s=ba();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,$e())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((h,p)=>{n.set(h,p)}))}))}computeViews(e,n,s,o){let u=Bi();const h=du(),p=(function(){return du()})();return n.forEach(((m,g)=>{const _=s.get(g.key);o.has(g.key)&&(_===void 0||_.mutation instanceof $s)?u=u.insert(g.key,g):_!==void 0?(h.set(g.key,_.mutation.getFieldMask()),pu(_.mutation,g,_.mutation.getFieldMask(),gt.now())):h.set(g.key,Wn.empty())})),this.recalculateAndSaveOverlays(e,u).next((m=>(m.forEach(((g,_)=>h.set(g,_))),n.forEach(((g,_)=>p.set(g,new FN(_,h.get(g)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=du();let o=new bt(((h,p)=>h-p)),u=$e();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((h=>{for(const p of h)p.keys().forEach((m=>{const g=n.get(m);if(g===null)return;let _=s.get(m)||Wn.empty();_=p.applyToLocalView(g,_),s.set(m,_);const T=(o.get(p.batchId)||$e()).add(m);o=o.insert(p.batchId,T)}))})).next((()=>{const h=[],p=o.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),g=m.key,_=m.value,T=NS();_.forEach((b=>{if(!u.has(b)){const M=PS(n.get(b),s.get(b));M!==null&&T.set(b,M),u=u.add(b)}})),h.push(this.documentOverlayCache.saveOverlays(e,g,T))}return ie.waitFor(h)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return $D(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):ie.resolve(ba());let p=Tu,m=u;return h.next((g=>ie.forEach(g,((_,T)=>(p<T.largestBatchId&&(p=T.largestBatchId),u.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next((b=>{m=m.insert(_,b)}))))).next((()=>this.populateOverlays(e,g,u))).next((()=>this.computeViews(e,m,g,$e()))).next((_=>({batchId:p,changes:DS(_)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Te(n)).next((s=>{let o=au();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let h=au();return this.indexManager.getCollectionParents(e,u).next((p=>ie.forEach(p,(m=>{const g=(function(T,b){return new Zo(b,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(n,m.child(u));return this.getDocumentsMatchingCollectionQuery(e,g,s,o).next((_=>{_.forEach(((T,b)=>{h=h.insert(T,b)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((h=>{u.forEach(((m,g)=>{const _=g.getKey();h.get(_)===null&&(h=h.insert(_,Sn.newInvalidDocument(_)))}));let p=au();return h.forEach(((m,g)=>{const _=u.get(m);_!==void 0&&pu(_.mutation,g,Wn.empty(),gt.now()),uf(n,g)&&(p=p.insert(m,g))})),p}))}}class $N{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return ie.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:si(o.createTime)}})(n)),ie.resolve()}getNamedQuery(e,n){return ie.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:kN(o.bundledQuery),readTime:si(o.readTime)}})(n)),ie.resolve()}}class KN{constructor(){this.overlays=new bt(Te.comparator),this.Lr=new Map}getOverlay(e,n){return ie.resolve(this.overlays.get(n))}getOverlays(e,n){const s=ba();return ie.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.bt(e,n,u)})),ie.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),ie.resolve()}getOverlaysForCollection(e,n,s){const o=ba(),u=n.length+1,h=new Te(n.child("")),p=this.overlays.getIteratorFrom(h);for(;p.hasNext();){const m=p.getNext().value,g=m.getKey();if(!n.isPrefixOf(g.path))break;g.path.length===u&&m.largestBatchId>s&&o.set(m.getKey(),m)}return ie.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new bt(((g,_)=>g-_));const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===n&&g.largestBatchId>s){let _=u.get(g.largestBatchId);_===null&&(_=ba(),u=u.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const p=ba(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>p.set(g,_))),!(p.size()>=o)););return ie.resolve(p)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const h=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(s.key,new hN(n,s));let u=this.Lr.get(n);u===void 0&&(u=$e(),this.Lr.set(n,u)),this.Lr.set(n,u.add(s.key))}}class YN{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ie.resolve()}}class Hm{constructor(){this.kr=new en(rn.Kr),this.qr=new en(rn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new rn(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new rn(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new Te(new dt([])),s=new rn(n,e),o=new rn(n,e+1),u=[];return this.qr.forEachInRange([s,o],(h=>{this.Wr(h),u.push(h.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Te(new dt([])),s=new rn(n,e),o=new rn(n,e+1);let u=$e();return this.qr.forEachInRange([s,o],(h=>{u=u.add(h.key)})),u}containsKey(e){const n=new rn(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class rn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Te.comparator(e.key,n.key)||Ge(e.Hr,n.Hr)}static Ur(e,n){return Ge(e.Hr,n.Hr)||Te.comparator(e.key,n.key)}}class QN{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new en(rn.Kr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new cN(u,n,s,o);this.mutationQueue.push(h);for(const p of o)this.Jr=this.Jr.add(new rn(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ie.resolve(h)}lookupMutationBatch(e,n){return ie.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return ie.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Mm:this.Yn-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new rn(n,0),o=new rn(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,o],(h=>{const p=this.Zr(h.Hr);u.push(p)})),ie.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new en(Ge);return n.forEach((o=>{const u=new rn(o,0),h=new rn(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,h],(p=>{s=s.add(p.Hr)}))})),ie.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;Te.isDocumentKey(u)||(u=u.child(""));const h=new rn(new Te(u),0);let p=new en(Ge);return this.Jr.forEachWhile((m=>{const g=m.key.path;return!!s.isPrefixOf(g)&&(g.length===o&&(p=p.add(m.Hr)),!0)}),h),ie.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Ze(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return ie.forEach(n.mutations,(o=>{const u=new rn(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new rn(n,0),o=this.Jr.firstAfterOrEqual(s);return ie.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class XN{constructor(e){this.ti=e,this.docs=(function(){return new bt(Te.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,h=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return ie.resolve(s?s.document.mutableCopy():Sn.newInvalidDocument(n))}getEntries(e,n){let s=Bi();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():Sn.newInvalidDocument(o))})),ie.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=Bi();const h=n.path,p=new Te(h.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||SD(TD(_),s)<=0||(o.has(_.key)||uf(n,_))&&(u=u.insert(_.key,_.mutableCopy()))}return ie.resolve(u)}getAllFromCollectionGroup(e,n,s,o){we(9500)}ni(e,n){return ie.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new WN(this)}getSize(e){return ie.resolve(this.size)}}class WN extends HN{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),ie.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class JN{constructor(e){this.persistence=e,this.ri=new xa((n=>km(n)),Pm),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.ii=0,this.si=new Hm,this.targetCount=0,this.oi=Ho._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),ie.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Ho(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,ie.resolve()}updateTargetData(e,n){return this.lr(n),ie.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.ri.forEach(((h,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.ri.delete(h),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),ie.waitFor(u).next((()=>o))}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return ie.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),ie.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(e,h))})),ie.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),ie.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return ie.resolve(s)}containsKey(e,n){return ie.resolve(this.si.containsKey(n))}}class XS{constructor(e,n){this._i={},this.overlays={},this.ai=new sf(0),this.ui=!1,this.ui=!0,this.ci=new YN,this.referenceDelegate=e(this),this.li=new JN(this),this.indexManager=new PN,this.remoteDocumentCache=(function(o){return new XN(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new xN(n),this.Pi=new $N(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new KN,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new QN(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){me("MemoryPersistence","Starting transaction:",e);const o=new ZN(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return ie.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class ZN extends bD{constructor(e){super(),this.currentSequenceNumber=e}}class Fm{constructor(e){this.persistence=e,this.Ri=new Hm,this.Ai=null}static Vi(e){return new Fm(e)}get di(){if(this.Ai)return this.Ai;throw we(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),ie.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),ie.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),ie.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.di,(s=>{const o=Te.fromPath(s);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Ce.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return ie.or([()=>ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Kh{constructor(e,n){this.persistence=e,this.fi=new xa((s=>ID(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=qN(this,n)}static Vi(e,n){return new Kh(e,n)}Ti(){}Ii(e){return ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return ie.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((u=>u?ie.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(h=>this.wr(e,h,n).next((p=>{p||(s++,u.removeEntry(h,Ce.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),ie.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ie.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),ie.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=bh(e.data.value)),n}wr(e,n,s){return ie.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return ie.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Gm{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=$e(),o=$e();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new Gm(e,n.fromCache,s,o)}}class eO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class tO{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return A1()?8:wD(bn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.gs(e,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ps(e,n,o,s).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new eO;return this.ys(e,n,h).next((p=>{if(u.result=p,this.As)return this.ws(e,n,h,p.size)}))})).next((()=>u.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(Ro()<=Fe.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Io(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),ie.resolve()):(Ro()<=Fe.DEBUG&&me("QueryEngine","Query:",Io(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(Ro()<=Fe.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Io(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ii(n))):ie.resolve())}gs(e,n){if(GE(n))return ie.resolve(null);let s=ii(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=Hh(n,null,"F"),s=ii(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const h=$e(...u);return this.fs.getDocuments(e,h).next((p=>this.indexManager.getMinOffset(e,s).next((m=>{const g=this.bs(n,p);return this.Ss(n,g,h,m.readTime)?this.gs(e,Hh(n,null,"F")):this.Ds(e,g,n,m)}))))})))))}ps(e,n,s,o){return GE(n)||o.isEqual(Ce.min())?ie.resolve(null):this.fs.getDocuments(e,s).next((u=>{const h=this.bs(n,u);return this.Ss(n,h,s,o)?ie.resolve(null):(Ro()<=Fe.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Io(n)),this.Ds(e,h,n,ED(o,Tu)).next((p=>p)))}))}bs(e,n){let s=new en(IS(e));return n.forEach(((o,u)=>{uf(e,u)&&(s=s.add(u))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,s){return Ro()<=Fe.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Io(n)),this.fs.getDocumentsMatchingQuery(e,n,Ps.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}const $m="LocalStore",nO=3e8;class rO{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new bt(Ge),this.Fs=new xa((u=>km(u)),Pm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GN(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function iO(i,e,n,s){return new rO(i,e,n,s)}async function WS(i,e){const n=Me(i);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const h=[],p=[];let m=$e();for(const g of o){h.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of u){p.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return n.localDocuments.getDocuments(s,m).next((g=>({Ns:g,removedBatchIds:h,addedBatchIds:p})))}))}))}function sO(i,e){const n=Me(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,m,g,_){const T=g.batch,b=T.keys();let M=ie.resolve();return b.forEach((Y=>{M=M.next((()=>_.getEntry(m,Y))).next((L=>{const H=g.docVersions.get(Y);Ze(H!==null,48541),L.version.compareTo(H)<0&&(T.applyToRemoteDocument(L,g),L.isValidDocument()&&(L.setReadTime(g.commitVersion),_.addEntry(L)))}))})),M.next((()=>p.mutationQueue.removeMutationBatch(m,T)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let m=$e();for(let g=0;g<p.mutationResults.length;++g)p.mutationResults[g].transformResults.length>0&&(m=m.add(p.batch.mutations[g].key));return m})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function JS(i){const e=Me(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function aO(i,e){const n=Me(i),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((_,T)=>{const b=o.get(T);if(!b)return;p.push(n.li.removeMatchingKeys(u,_.removedDocuments,T).next((()=>n.li.addMatchingKeys(u,_.addedDocuments,T))));let M=b.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(T)!==null?M=M.withResumeToken(dn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(M=M.withResumeToken(_.resumeToken,s)),o=o.insert(T,M),(function(L,H,Q){return L.resumeToken.approximateByteSize()===0||H.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=nO?!0:Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0})(b,M,_)&&p.push(n.li.updateTargetData(u,M))}));let m=Bi(),g=$e();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,_))})),p.push(oO(u,h,e.documentUpdates).next((_=>{m=_.Bs,g=_.Ls}))),!s.isEqual(Ce.min())){const _=n.li.getLastRemoteSnapshotVersion(u).next((T=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));p.push(_)}return ie.waitFor(p).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,m,g))).next((()=>m))})).then((u=>(n.vs=o,u)))}function oO(i,e,n){let s=$e(),o=$e();return n.forEach((u=>s=s.add(u))),e.getEntries(i,s).next((u=>{let h=Bi();return n.forEach(((p,m)=>{const g=u.get(p);m.isFoundDocument()!==g.isFoundDocument()&&(o=o.add(p)),m.isNoDocument()&&m.version.isEqual(Ce.min())?(e.removeEntry(p,m.readTime),h=h.insert(p,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),h=h.insert(p,m)):me($m,"Ignoring outdated watch update for ",p,". Current version:",g.version," Watch version:",m.version)})),{Bs:h,Ls:o}}))}function lO(i,e){const n=Me(i);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Mm),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function uO(i,e){const n=Me(i);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((u=>u?(o=u,ie.resolve(o)):n.li.allocateTargetId(s).next((h=>(o=new Ds(e,h,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function om(i,e,n){const s=Me(i),o=s.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(h=>s.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!Jo(h))throw h;me($m,`Failed to update sequence numbers for target ${e}: ${h}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function iT(i,e,n){const s=Me(i);let o=Ce.min(),u=$e();return s.persistence.runTransaction("Execute query","readwrite",(h=>(function(m,g,_){const T=Me(m),b=T.Fs.get(_);return b!==void 0?ie.resolve(T.vs.get(b)):T.li.getTargetData(g,_)})(s,h,ii(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(h,p.targetId).next((m=>{u=m}))})).next((()=>s.Cs.getDocumentsMatchingQuery(h,e,n?o:Ce.min(),n?u:$e()))).next((p=>(cO(s,QD(e),p),{documents:p,ks:u})))))}function cO(i,e,n){let s=i.Ms.get(e)||Ce.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),i.Ms.set(e,s)}class sT{constructor(){this.activeTargetIds=tN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hO{constructor(){this.vo=new sT,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new sT,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class fO{Mo(e){}shutdown(){}}const aT="ConnectivityMonitor";class oT{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){me(aT,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){me(aT,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let ph=null;function lm(){return ph===null?ph=(function(){return 268435456+Math.round(2147483648*Math.random())})():ph++,"0x"+ph.toString(16)}const Vp="RestConnection",dO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class pO{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Bh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,u){const h=lm(),p=this.Qo(e,n.toUriEncodedString());me(Vp,`Sending RPC '${e}' ${h}:`,p,s);const m={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(m,o,u);const{host:g}=new URL(p),_=Ko(g);return this.zo(e,p,m,s,_).then((T=>(me(Vp,`Received RPC '${e}' ${h}: `,T),T)),(T=>{throw zo(Vp,`RPC '${e}' ${h} failed with error: `,T,"url: ",p,"request:",s),T}))}jo(e,n,s,o,u,h){return this.Wo(e,n,s,o,u)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Xo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const s=dO[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class mO{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const vn="WebChannelConnection",nu=(i,e,n)=>{i.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class ko extends pO{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!ko.c_){const e=rS();nu(e,nS.STAT_EVENT,(n=>{n.stat===Xp.PROXY?me(vn,"STAT_EVENT: detected buffering proxy"):n.stat===Xp.NOPROXY&&me(vn,"STAT_EVENT: detected no buffering proxy")})),ko.c_=!0}}zo(e,n,s,o,u){const h=lm();return new Promise(((p,m)=>{const g=new eS;g.setWithCredentials(!0),g.listenOnce(tS.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case Ah.NO_ERROR:const T=g.getResponseJson();me(vn,`XHR for RPC '${e}' ${h} received:`,JSON.stringify(T)),p(T);break;case Ah.TIMEOUT:me(vn,`RPC '${e}' ${h} timed out`),m(new de(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ah.HTTP_ERROR:const b=g.getStatus();if(me(vn,`RPC '${e}' ${h} failed with status:`,b,"response text:",g.getResponseText()),b>0){let M=g.getResponseJson();Array.isArray(M)&&(M=M[0]);const Y=M?.error;if(Y&&Y.status&&Y.message){const L=(function(Q){const Z=Q.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(Z)>=0?Z:ne.UNKNOWN})(Y.status);m(new de(L,Y.message))}else m(new de(ne.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new de(ne.UNAVAILABLE,"Connection failed."));break;default:we(9055,{l_:e,streamId:h,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{me(vn,`RPC '${e}' ${h} completed.`)}}));const _=JSON.stringify(o);me(vn,`RPC '${e}' ${h} sending request:`,o),g.send(n,"POST",_,s,15)}))}T_(e,n,s){const o=lm(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(p.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const g=u.join("");me(vn,`Creating RPC '${e}' stream ${o}: ${g}`,p);const _=h.createWebChannel(g,p);this.I_(_);let T=!1,b=!1;const M=new mO({Ho:Y=>{b?me(vn,`Not sending because RPC '${e}' stream ${o} is closed:`,Y):(T||(me(vn,`Opening RPC '${e}' stream ${o} transport.`),_.open(),T=!0),me(vn,`RPC '${e}' stream ${o} sending:`,Y),_.send(Y))},Jo:()=>_.close()});return nu(_,su.EventType.OPEN,(()=>{b||(me(vn,`RPC '${e}' stream ${o} transport opened.`),M.i_())})),nu(_,su.EventType.CLOSE,(()=>{b||(b=!0,me(vn,`RPC '${e}' stream ${o} transport closed`),M.o_(),this.E_(_))})),nu(_,su.EventType.ERROR,(Y=>{b||(b=!0,zo(vn,`RPC '${e}' stream ${o} transport errored. Name:`,Y.name,"Message:",Y.message),M.o_(new de(ne.UNAVAILABLE,"The operation could not be completed")))})),nu(_,su.EventType.MESSAGE,(Y=>{if(!b){const L=Y.data[0];Ze(!!L,16349);const H=L,Q=H?.error||H[0]?.error;if(Q){me(vn,`RPC '${e}' stream ${o} received error:`,Q);const Z=Q.status;let se=(function(ae){const I=$t[ae];if(I!==void 0)return US(I)})(Z),_e=Q.message;se===void 0&&(se=ne.INTERNAL,_e="Unknown error status: "+Z+" with message "+Q.message),b=!0,M.o_(new de(se,_e)),_.close()}else me(vn,`RPC '${e}' stream ${o} received:`,L),M.__(L)}})),ko.u_(),setTimeout((()=>{M.s_()}),0),M}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return iS()}}function gO(i){return new ko(i)}function xp(){return typeof document<"u"?document:null}function df(i){return new EN(i,!0)}ko.c_=!1;class ZS{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&me("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const lT="PersistentStream";class eA{constructor(e,n,s,o,u,h,p,m){this.Ci=e,this.b_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new ZS(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===ne.RESOURCE_EXHAUSTED?(zi(n.toString()),zi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new de(ne.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return me(lT,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(me(lT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class yO extends eA{constructor(e,n,s,o,u,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=AN(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ce.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?Ce.min():h.readTime?si(h.readTime):Ce.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=am(this.serializer),n.addTarget=(function(u,h){let p;const m=h.target;if(p=tm(m)?{documents:RN(u,m)}:{query:IN(u,m).ft},p.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){p.resumeToken=jS(u,h.resumeToken);const g=rm(u,h.expectedCount);g!==null&&(p.expectedCount=g)}else if(h.snapshotVersion.compareTo(Ce.min())>0){p.readTime=$h(u,h.snapshotVersion.toTimestamp());const g=rm(u,h.expectedCount);g!==null&&(p.expectedCount=g)}return p})(this.serializer,e);const s=DN(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=am(this.serializer),n.removeTarget=e,this.K_(n)}}class _O extends eA{constructor(e,n,s,o,u,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,h),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Ze(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ze(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=wN(e.writeResults,e.commitTime),s=si(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=am(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>bN(this.serializer,s)))};this.K_(n)}}class vO{}class EO extends vO{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Wo(e,im(n,s),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new de(ne.UNKNOWN,u.toString())}))}jo(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,p])=>this.connection.jo(e,im(n,s),o,h,p,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new de(ne.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function TO(i,e,n,s){return new EO(i,e,n,s)}class SO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(zi(n),this.aa=!1):me("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const Oa="RemoteStore";class AO{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((h=>{s.enqueueAndForget((async()=>{ka(this)&&(me(Oa,"Restarting streams for network reachability change."),await(async function(m){const g=Me(m);g.Ea.add(4),await Bu(g),g.Va.set("Unknown"),g.Ea.delete(4),await pf(g)})(this))}))})),this.Va=new SO(s,o)}}async function pf(i){if(ka(i))for(const e of i.Ra)await e(!0)}async function Bu(i){for(const e of i.Ra)await e(!1)}function tA(i,e){const n=Me(i);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xm(n)?Qm(n):el(n).O_()&&Ym(n,e))}function Km(i,e){const n=Me(i),s=el(n);n.Ia.delete(e),s.O_()&&nA(n,e),n.Ia.size===0&&(s.O_()?s.L_():ka(n)&&n.Va.set("Unknown"))}function Ym(i,e){if(i.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const n=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}el(i).Z_(e)}function nA(i,e){i.da.$e(e),el(i).X_(e)}function Qm(i){i.da=new gN({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),At:e=>i.Ia.get(e)||null,ht:()=>i.datastore.serializer.databaseId}),el(i).start(),i.Va.ua()}function Xm(i){return ka(i)&&!el(i).x_()&&i.Ia.size>0}function ka(i){return Me(i).Ea.size===0}function rA(i){i.da=void 0}async function bO(i){i.Va.set("Online")}async function wO(i){i.Ia.forEach(((e,n)=>{Ym(i,e)}))}async function RO(i,e){rA(i),Xm(i)?(i.Va.ha(e),Qm(i)):i.Va.set("Unknown")}async function IO(i,e,n){if(i.Va.set("Online"),e instanceof BS&&e.state===2&&e.cause)try{await(async function(o,u){const h=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,h),o.Ia.delete(p),o.da.removeTarget(p))})(i,e)}catch(s){me(Oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Yh(i,s)}else if(e instanceof Ih?i.da.Xe(e):e instanceof zS?i.da.st(e):i.da.tt(e),!n.isEqual(Ce.min()))try{const s=await JS(i.localStore);n.compareTo(s)>=0&&await(function(u,h){const p=u.da.Tt(h);return p.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=u.Ia.get(g);_&&u.Ia.set(g,_.withResumeToken(m.resumeToken,h))}})),p.targetMismatches.forEach(((m,g)=>{const _=u.Ia.get(m);if(!_)return;u.Ia.set(m,_.withResumeToken(dn.EMPTY_BYTE_STRING,_.snapshotVersion)),nA(u,m);const T=new Ds(_.target,m,g,_.sequenceNumber);Ym(u,T)})),u.remoteSyncer.applyRemoteEvent(p)})(i,n)}catch(s){me(Oa,"Failed to raise snapshot:",s),await Yh(i,s)}}async function Yh(i,e,n){if(!Jo(e))throw e;i.Ea.add(1),await Bu(i),i.Va.set("Offline"),n||(n=()=>JS(i.localStore)),i.asyncQueue.enqueueRetryable((async()=>{me(Oa,"Retrying IndexedDB access"),await n(),i.Ea.delete(1),await pf(i)}))}function iA(i,e){return e().catch((n=>Yh(i,n,e)))}async function mf(i){const e=Me(i),n=Bs(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Mm;for(;CO(e);)try{const o=await lO(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,DO(e,o)}catch(o){await Yh(e,o)}sA(e)&&aA(e)}function CO(i){return ka(i)&&i.Ta.length<10}function DO(i,e){i.Ta.push(e);const n=Bs(i);n.O_()&&n.Y_&&n.ea(e.mutations)}function sA(i){return ka(i)&&!Bs(i).x_()&&i.Ta.length>0}function aA(i){Bs(i).start()}async function NO(i){Bs(i).ra()}async function OO(i){const e=Bs(i);for(const n of i.Ta)e.ea(n.mutations)}async function MO(i,e,n){const s=i.Ta.shift(),o=Bm.from(s,e,n);await iA(i,(()=>i.remoteSyncer.applySuccessfulWrite(o))),await mf(i)}async function VO(i,e){e&&Bs(i).Y_&&await(async function(s,o){if((function(h){return dN(h)&&h!==ne.ABORTED})(o.code)){const u=s.Ta.shift();Bs(s).B_(),await iA(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await mf(s)}})(i,e),sA(i)&&aA(i)}async function uT(i,e){const n=Me(i);n.asyncQueue.verifyOperationInProgress(),me(Oa,"RemoteStore received new credentials");const s=ka(n);n.Ea.add(3),await Bu(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await pf(n)}async function xO(i,e){const n=Me(i);e?(n.Ea.delete(2),await pf(n)):e||(n.Ea.add(2),await Bu(n),n.Va.set("Unknown"))}function el(i){return i.ma||(i.ma=(function(n,s,o){const u=Me(n);return u.sa(),new yO(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:bO.bind(null,i),Yo:wO.bind(null,i),t_:RO.bind(null,i),J_:IO.bind(null,i)}),i.Ra.push((async e=>{e?(i.ma.B_(),Xm(i)?Qm(i):i.Va.set("Unknown")):(await i.ma.stop(),rA(i))}))),i.ma}function Bs(i){return i.fa||(i.fa=(function(n,s,o){const u=Me(n);return u.sa(),new _O(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(i.datastore,i.asyncQueue,{Zo:()=>Promise.resolve(),Yo:NO.bind(null,i),t_:VO.bind(null,i),ta:OO.bind(null,i),na:MO.bind(null,i)}),i.Ra.push((async e=>{e?(i.fa.B_(),await mf(i)):(await i.fa.stop(),i.Ta.length>0&&(me(Oa,`Stopping write stream with ${i.Ta.length} pending writes`),i.Ta=[]))}))),i.fa}class Wm{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ki,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const h=Date.now()+s,p=new Wm(e,n,h,o,u);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new de(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Jm(i,e){if(zi("AsyncQueue",`${e}: ${i}`),Jo(i))return new de(ne.UNAVAILABLE,`${e}: ${i}`);throw i}class Po{static emptySet(e){return new Po(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||Te.comparator(n.key,s.key):(n,s)=>Te.comparator(n.key,s.key),this.keyedMap=au(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Po)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new Po;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class cT{constructor(){this.ga=new bt(Te.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):we(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Fo{constructor(e,n,s,o,u,h,p,m,g){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,n,s,o,u){const h=[];return n.forEach((p=>{h.push({type:0,doc:p})})),new Fo(e,n,Po.emptySet(n),h,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class kO{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class PO{constructor(){this.queries=hT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Me(n),u=o.queries;o.queries=hT(),u.forEach(((h,p)=>{for(const m of p.ba)m.onError(s)}))})(this,new de(ne.ABORTED,"Firestore shutting down"))}}function hT(){return new xa((i=>RS(i)),lf)}async function oA(i,e){const n=Me(i);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(s=2):(u=new kO,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const p=Jm(h,`Initialization of query '${Io(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&Zm(n)}async function lA(i,e){const n=Me(i),s=e.query;let o=3;const u=n.queries.get(s);if(u){const h=u.ba.indexOf(e);h>=0&&(u.ba.splice(h,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function LO(i,e){const n=Me(i);let s=!1;for(const o of e){const u=o.query,h=n.queries.get(u);if(h){for(const p of h.ba)p.Fa(o)&&(s=!0);h.wa=o}}s&&Zm(n)}function UO(i,e,n){const s=Me(i),o=s.queries.get(e);if(o)for(const u of o.ba)u.onError(n);s.queries.delete(e)}function Zm(i){i.Ca.forEach((e=>{e.next()}))}var um,fT;(fT=um||(um={})).Ma="default",fT.Cache="cache";class uA{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Fo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==um.Cache}}class cA{constructor(e){this.key=e}}class hA{constructor(e){this.key=e}}class zO{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=$e(),this.mutatedKeys=$e(),this.eu=IS(e),this.tu=new Po(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new cT,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,p=!1;const m=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,g=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((_,T)=>{const b=o.get(_),M=uf(this.query,T)?T:null,Y=!!b&&this.mutatedKeys.has(b.key),L=!!M&&(M.hasLocalMutations||this.mutatedKeys.has(M.key)&&M.hasCommittedMutations);let H=!1;b&&M?b.data.isEqual(M.data)?Y!==L&&(s.track({type:3,doc:M}),H=!0):this.su(b,M)||(s.track({type:2,doc:M}),H=!0,(m&&this.eu(M,m)>0||g&&this.eu(M,g)<0)&&(p=!0)):!b&&M?(s.track({type:0,doc:M}),H=!0):b&&!M&&(s.track({type:1,doc:b}),H=!0,(m||g)&&(p=!0)),H&&(M?(h=h.add(M),u=L?u.add(_):u.delete(_)):(h=h.delete(_),u=u.delete(_)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const _=this.query.limitType==="F"?h.last():h.first();h=h.delete(_.key),u=u.delete(_.key),s.track({type:1,doc:_})}return{tu:h,iu:s,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const h=e.iu.ya();h.sort(((_,T)=>(function(M,Y){const L=H=>{switch(H){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return we(20277,{Vt:H})}};return L(M)-L(Y)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(s),o=o??!1;const p=n&&!o?this._u():[],m=this.Ya.size===0&&this.current&&!o?1:0,g=m!==this.Xa;return this.Xa=m,h.length!==0||g?{snapshot:new Fo(this.query,e.tu,u,h,e.mutatedKeys,m===0,g,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new cT,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=$e(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new hA(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new cA(s))})),n}cu(e){this.Za=e.ks,this.Ya=$e();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Fo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const eg="SyncEngine";class BO{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class jO{constructor(e){this.key=e,this.hu=!1}}class qO{constructor(e,n,s,o,u,h){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new xa((p=>RS(p)),lf),this.Iu=new Map,this.Eu=new Set,this.Ru=new bt(Te.comparator),this.Au=new Map,this.Vu=new Hm,this.du={},this.mu=new Map,this.fu=Ho.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function HO(i,e,n=!0){const s=yA(i);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await fA(s,e,n,!0),o}async function FO(i,e){const n=yA(i);await fA(n,e,!0,!1)}async function fA(i,e,n,s){const o=await uO(i.localStore,ii(e)),u=o.targetId,h=i.sharedClientState.addLocalQueryTarget(u,n);let p;return s&&(p=await GO(i,e,u,h==="current",o.resumeToken)),i.isPrimaryClient&&n&&tA(i.remoteStore,o),p}async function GO(i,e,n,s,o){i.pu=(T,b,M)=>(async function(L,H,Q,Z){let se=H.view.ru(Q);se.Ss&&(se=await iT(L.localStore,H.query,!1).then((({documents:I})=>H.view.ru(I,se))));const _e=Z&&Z.targetChanges.get(H.targetId),ce=Z&&Z.targetMismatches.get(H.targetId)!=null,ae=H.view.applyChanges(se,L.isPrimaryClient,_e,ce);return pT(L,H.targetId,ae.au),ae.snapshot})(i,T,b,M);const u=await iT(i.localStore,e,!0),h=new zO(e,u.ks),p=h.ru(u.documents),m=zu.createSynthesizedTargetChangeForCurrentChange(n,s&&i.onlineState!=="Offline",o),g=h.applyChanges(p,i.isPrimaryClient,m);pT(i,n,g.au);const _=new BO(e,n,h);return i.Tu.set(e,_),i.Iu.has(n)?i.Iu.get(n).push(e):i.Iu.set(n,[e]),g.snapshot}async function $O(i,e,n){const s=Me(i),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((h=>!lf(h,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await om(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&Km(s.remoteStore,o.targetId),cm(s,o.targetId)})).catch(Wo)):(cm(s,o.targetId),await om(s.localStore,o.targetId,!0))}async function KO(i,e){const n=Me(i),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),Km(n.remoteStore,s.targetId))}async function YO(i,e,n){const s=tM(i);try{const o=await(function(h,p){const m=Me(h),g=gt.now(),_=p.reduce(((M,Y)=>M.add(Y.key)),$e());let T,b;return m.persistence.runTransaction("Locally write mutations","readwrite",(M=>{let Y=Bi(),L=$e();return m.xs.getEntries(M,_).next((H=>{Y=H,Y.forEach(((Q,Z)=>{Z.isValidDocument()||(L=L.add(Q))}))})).next((()=>m.localDocuments.getOverlayedDocuments(M,Y))).next((H=>{T=H;const Q=[];for(const Z of p){const se=lN(Z,T.get(Z.key).overlayedDocument);se!=null&&Q.push(new $s(Z.key,se,_S(se.value.mapValue),vr.exists(!0)))}return m.mutationQueue.addMutationBatch(M,g,Q,p)})).next((H=>{b=H;const Q=H.applyToLocalDocumentSet(T,L);return m.documentOverlayCache.saveOverlays(M,H.batchId,Q)}))})).then((()=>({batchId:b.batchId,changes:DS(T)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(h,p,m){let g=h.du[h.currentUser.toKey()];g||(g=new bt(Ge)),g=g.insert(p,m),h.du[h.currentUser.toKey()]=g})(s,o.batchId,n),await ju(s,o.changes),await mf(s.remoteStore)}catch(o){const u=Jm(o,"Failed to persist write");n.reject(u)}}async function dA(i,e){const n=Me(i);try{const s=await aO(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(Ze(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?Ze(h.hu,14607):o.removedDocuments.size>0&&(Ze(h.hu,42227),h.hu=!1))})),await ju(n,s,e)}catch(s){await Wo(s)}}function dT(i,e,n){const s=Me(i);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,h)=>{const p=h.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(h,p){const m=Me(h);m.onlineState=p;let g=!1;m.queries.forEach(((_,T)=>{for(const b of T.ba)b.va(p)&&(g=!0)})),g&&Zm(m)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function QO(i,e,n){const s=Me(i);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let h=new bt(Te.comparator);h=h.insert(u,Sn.newNoDocument(u,Ce.min()));const p=$e().add(u),m=new ff(Ce.min(),new Map,new bt(Ge),h,p);await dA(s,m),s.Ru=s.Ru.remove(u),s.Au.delete(e),tg(s)}else await om(s.localStore,e,!1).then((()=>cm(s,e,n))).catch(Wo)}async function XO(i,e){const n=Me(i),s=e.batch.batchId;try{const o=await sO(n.localStore,e);mA(n,s,null),pA(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await ju(n,o)}catch(o){await Wo(o)}}async function WO(i,e,n){const s=Me(i);try{const o=await(function(h,p){const m=Me(h);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,p).next((T=>(Ze(T!==null,37113),_=T.keys(),m.mutationQueue.removeMutationBatch(g,T)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,p))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(s.localStore,e);mA(s,e,n),pA(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await ju(s,o)}catch(o){await Wo(o)}}function pA(i,e){(i.mu.get(e)||[]).forEach((n=>{n.resolve()})),i.mu.delete(e)}function mA(i,e,n){const s=Me(i);let o=s.du[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function cm(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const s of i.Iu.get(e))i.Tu.delete(s),n&&i.Pu.yu(s,n);i.Iu.delete(e),i.isPrimaryClient&&i.Vu.Gr(e).forEach((s=>{i.Vu.containsKey(s)||gA(i,s)}))}function gA(i,e){i.Eu.delete(e.path.canonicalString());const n=i.Ru.get(e);n!==null&&(Km(i.remoteStore,n),i.Ru=i.Ru.remove(e),i.Au.delete(n),tg(i))}function pT(i,e,n){for(const s of n)s instanceof cA?(i.Vu.addReference(s.key,e),JO(i,s)):s instanceof hA?(me(eg,"Document no longer in limbo: "+s.key),i.Vu.removeReference(s.key,e),i.Vu.containsKey(s.key)||gA(i,s.key)):we(19791,{wu:s})}function JO(i,e){const n=e.key,s=n.path.canonicalString();i.Ru.get(n)||i.Eu.has(s)||(me(eg,"New document in limbo: "+n),i.Eu.add(s),tg(i))}function tg(i){for(;i.Eu.size>0&&i.Ru.size<i.maxConcurrentLimboResolutions;){const e=i.Eu.values().next().value;i.Eu.delete(e);const n=new Te(dt.fromString(e)),s=i.fu.next();i.Au.set(s,new jO(n)),i.Ru=i.Ru.insert(n,s),tA(i.remoteStore,new Ds(ii(Lm(n.path)),s,"TargetPurposeLimboResolution",sf.ce))}}async function ju(i,e,n){const s=Me(i),o=[],u=[],h=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,m)=>{h.push(s.pu(m,e,n).then((g=>{if((g||n)&&s.isPrimaryClient){const _=g?!g.fromCache:n?.targetChanges.get(m.targetId)?.current;s.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){o.push(g);const _=Gm.Es(m.targetId,g);u.push(_)}})))})),await Promise.all(h),s.Pu.J_(o),await(async function(m,g){const _=Me(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>ie.forEach(g,(b=>ie.forEach(b.Ts,(M=>_.persistence.referenceDelegate.addReference(T,b.targetId,M))).next((()=>ie.forEach(b.Is,(M=>_.persistence.referenceDelegate.removeReference(T,b.targetId,M)))))))))}catch(T){if(!Jo(T))throw T;me($m,"Failed to update sequence numbers: "+T)}for(const T of g){const b=T.targetId;if(!T.fromCache){const M=_.vs.get(b),Y=M.snapshotVersion,L=M.withLastLimboFreeSnapshotVersion(Y);_.vs=_.vs.insert(b,L)}}})(s.localStore,u))}async function ZO(i,e){const n=Me(i);if(!n.currentUser.isEqual(e)){me(eg,"User change. New user:",e.toKey());const s=await WS(n.localStore,e);n.currentUser=e,(function(u,h){u.mu.forEach((p=>{p.forEach((m=>{m.reject(new de(ne.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await ju(n,s.Ns)}}function eM(i,e){const n=Me(i),s=n.Au.get(e);if(s&&s.hu)return $e().add(s.key);{let o=$e();const u=n.Iu.get(e);if(!u)return o;for(const h of u){const p=n.Tu.get(h);o=o.unionWith(p.view.nu)}return o}}function yA(i){const e=Me(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=dA.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=QO.bind(null,e),e.Pu.J_=LO.bind(null,e.eventManager),e.Pu.yu=UO.bind(null,e.eventManager),e}function tM(i){const e=Me(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WO.bind(null,e),e}class Qh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=df(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return iO(this.persistence,new tO,e.initialUser,this.serializer)}Cu(e){return new XS(Fm.Vi,this.serializer)}Du(e){return new hO}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Qh.provider={build:()=>new Qh};class nM extends Qh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ze(this.persistence.referenceDelegate instanceof Kh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new BN(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?kn.withCacheSize(this.cacheSizeBytes):kn.DEFAULT;return new XS((s=>Kh.Vi(s,n)),this.serializer)}}class hm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>dT(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=ZO.bind(null,this.syncEngine),await xO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new PO})()}createDatastore(e){const n=df(e.databaseInfo.databaseId),s=gO(e.databaseInfo);return TO(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,h,p){return new AO(s,o,u,h,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>dT(this.syncEngine,n,0)),(function(){return oT.v()?new oT:new fO})())}createSyncEngine(e,n){return(function(o,u,h,p,m,g,_){const T=new qO(o,u,h,p,m,g);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Me(n);me(Oa,"RemoteStore shutting down."),s.Ea.add(5),await Bu(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}hm.provider={build:()=>new hm};class _A{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const js="FirestoreClient";class rM{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=En.UNAUTHENTICATED,this.clientId=Om.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async h=>{me(js,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(s,(h=>(me(js,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ki;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=Jm(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function kp(i,e){i.asyncQueue.verifyOperationInProgress(),me(js,"Initializing OfflineComponentProvider");const n=i.configuration;await e.initialize(n);let s=n.initialUser;i.setCredentialChangeListener((async o=>{s.isEqual(o)||(await WS(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>i.terminate())),i._offlineComponents=e}async function mT(i,e){i.asyncQueue.verifyOperationInProgress();const n=await iM(i);me(js,"Initializing OnlineComponentProvider"),await e.initialize(n,i.configuration),i.setCredentialChangeListener((s=>uT(e.remoteStore,s))),i.setAppCheckTokenChangeListener(((s,o)=>uT(e.remoteStore,o))),i._onlineComponents=e}async function iM(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){me(js,"Using user provided OfflineComponentProvider");try{await kp(i,i._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===ne.FAILED_PRECONDITION||o.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;zo("Error using user provided cache. Falling back to memory cache: "+n),await kp(i,new Qh)}}else me(js,"Using default OfflineComponentProvider"),await kp(i,new nM(void 0));return i._offlineComponents}async function vA(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(me(js,"Using user provided OnlineComponentProvider"),await mT(i,i._uninitializedComponentsProvider._online)):(me(js,"Using default OnlineComponentProvider"),await mT(i,new hm))),i._onlineComponents}function sM(i){return vA(i).then((e=>e.syncEngine))}async function EA(i){const e=await vA(i),n=e.eventManager;return n.onListen=HO.bind(null,e.syncEngine),n.onUnlisten=$O.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=FO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=KO.bind(null,e.syncEngine),n}function aM(i,e,n={}){const s=new ki;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,m,g){const _=new _A({next:b=>{_.Nu(),h.enqueueAndForget((()=>lA(u,T)));const M=b.docs.has(p);!M&&b.fromCache?g.reject(new de(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):M&&b.fromCache&&m&&m.source==="server"?g.reject(new de(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new uA(Lm(p.path),_,{includeMetadataChanges:!0,Ka:!0});return oA(u,T)})(await EA(i),i.asyncQueue,e,n,s))),s.promise}function oM(i,e,n={}){const s=new ki;return i.asyncQueue.enqueueAndForget((async()=>(function(u,h,p,m,g){const _=new _A({next:b=>{_.Nu(),h.enqueueAndForget((()=>lA(u,T))),b.fromCache&&m.source==="server"?g.reject(new de(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):g.resolve(b)},error:b=>g.reject(b)}),T=new uA(p,_,{includeMetadataChanges:!0,Ka:!0});return oA(u,T)})(await EA(i),i.asyncQueue,e,n,s))),s.promise}function lM(i,e){const n=new ki;return i.asyncQueue.enqueueAndForget((async()=>YO(await sM(i),e,n))),n.promise}function TA(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}const uM="ComponentProvider",gT=new Map;function cM(i,e,n,s,o){return new ND(i,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,TA(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const SA="firestore.googleapis.com",yT=!0;class _T{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new de(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=SA,this.ssl=yT}else this.host=e.host,this.ssl=e.ssl??yT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=QS;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<UN)throw new de(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}_D("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TA(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new de(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class gf{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _T({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new de(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new de(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _T(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new lD;switch(s.type){case"firstParty":return new fD(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new de(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=gT.get(n);s&&(me(uM,"Removing Datastore"),gT.delete(n),s.terminate())})(this),Promise.resolve()}}function hM(i,e,n,s={}){i=xr(i,gf);const o=Ko(e),u=i._getSettings(),h={...u,emulatorOptions:i._getEmulatorOptions()},p=`${e}:${n}`;o&&(l0(`https://${p}`),u0("Firestore",!0)),u.host!==SA&&u.host!==p&&zo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...u,host:p,ssl:o,emulatorOptions:s};if(!Ra(m,h)&&(i._setSettings(m),s.mockUserToken)){let g,_;if(typeof s.mockUserToken=="string")g=s.mockUserToken,_=En.MOCK_USER;else{g=p1(s.mockUserToken,i._app?.options.projectId);const T=s.mockUserToken.sub||s.mockUserToken.user_id;if(!T)throw new de(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new En(T)}i._authCredentials=new uD(new aS(g,_))}}class Ks{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new Ks(this.firestore,e,this._query)}}class Bt{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ks(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}toJSON(){return{type:Bt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Lu(n,Bt._jsonSchema))return new Bt(e,s||null,new Te(dt.fromString(n.referencePath)))}}Bt._jsonSchemaVersion="firestore/documentReference/1.0",Bt._jsonSchema={type:Qt("string",Bt._jsonSchemaVersion),referencePath:Qt("string")};class ks extends Ks{constructor(e,n,s){super(e,n,Lm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new Te(e))}withConverter(e){return new ks(this.firestore,e,this._path)}}function Tn(i,e,...n){if(i=fn(i),oS("collection","path",e),i instanceof gf){const s=dt.fromString(e,...n);return OE(s),new ks(i,null,s)}{if(!(i instanceof Bt||i instanceof ks))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(dt.fromString(e,...n));return OE(s),new ks(i.firestore,null,s)}}function ct(i,e,...n){if(i=fn(i),arguments.length===1&&(e=Om.newId()),oS("doc","path",e),i instanceof gf){const s=dt.fromString(e,...n);return NE(s),new Bt(i,null,new Te(s))}{if(!(i instanceof Bt||i instanceof ks))throw new de(ne.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=i._path.child(dt.fromString(e,...n));return NE(s),new Bt(i.firestore,i instanceof ks?i.converter:null,new Te(s))}}const vT="AsyncQueue";class ET{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new ZS(this,"async_queue_retry"),this._c=()=>{const s=xp();s&&me(vT,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=xp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=xp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ki;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Jo(e))throw e;me(vT,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,zi("INTERNAL UNHANDLED ERROR: ",TT(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=Wm.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&we(47125,{Pc:TT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function TT(i){let e=i.message||"";return i.stack&&(e=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),e}class Pa extends gf{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new ET,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ET(e),this._firestoreClient=void 0,await e}}}function Kt(i,e){const n=typeof i=="object"?i:d0(),s=typeof i=="string"?i:Bh,o=Tm(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=f1("firestore");u&&hM(o,...u)}return o}function ng(i){if(i._terminated)throw new de(ne.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||fM(i),i._firestoreClient}function fM(i){const e=i._freezeSettings(),n=cM(i._databaseId,i._app?.options.appId||"",i._persistenceKey,i._app?.options.apiKey,e);i._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(i._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),i._firestoreClient=new rM(i._authCredentials,i._appCheckCredentials,i._queue,n,i._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(i._componentsProvider))}class _r{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _r(dn.fromBase64String(e))}catch(n){throw new de(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new _r(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:_r._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Lu(e,_r._jsonSchema))return _r.fromBase64String(e.bytes)}}_r._jsonSchemaVersion="firestore/bytes/1.0",_r._jsonSchema={type:Qt("string",_r._jsonSchemaVersion),bytes:Qt("string")};class rg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new de(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new hn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class ig{constructor(e){this._methodName=e}}class ai{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new de(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new de(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ai._jsonSchemaVersion}}static fromJSON(e){if(Lu(e,ai._jsonSchema))return new ai(e.latitude,e.longitude)}}ai._jsonSchemaVersion="firestore/geoPoint/1.0",ai._jsonSchema={type:Qt("string",ai._jsonSchemaVersion),latitude:Qt("number"),longitude:Qt("number")};class Or{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Or._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Lu(e,Or._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new Or(e.vectorValues);throw new de(ne.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Or._jsonSchemaVersion="firestore/vectorValue/1.0",Or._jsonSchema={type:Qt("string",Or._jsonSchemaVersion),vectorValues:Qt("object")};const dM=/^__.*__$/;class pM{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new $s(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uu(e,this.data,n,this.fieldTransforms)}}class AA{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new $s(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function bA(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw we(40011,{dataSource:i})}}class sg{constructor(e,n,s,o,u,h){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Xh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(bA(this.dataSource)&&dM.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class mM{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||df(e)}createContext(e,n,s,o=!1){return new sg({dataSource:e,methodName:n,targetDoc:s,path:hn.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yf(i){const e=i._freezeSettings(),n=df(i._databaseId);return new mM(i._databaseId,!!e.ignoreUndefinedProperties,n)}function wA(i,e,n,s,o,u={}){const h=i.createContext(u.merge||u.mergeFields?2:0,e,n,o);ag("Data must be an object, but it was:",h,s);const p=RA(s,h);let m,g;if(u.merge)m=new Wn(h.fieldMask),g=h.fieldTransforms;else if(u.mergeFields){const _=[];for(const T of u.mergeFields){const b=Ma(e,T,n);if(!h.contains(b))throw new de(ne.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);DA(_,b)||_.push(b)}m=new Wn(_),g=h.fieldTransforms.filter((T=>m.covers(T.field)))}else m=null,g=h.fieldTransforms;return new pM(new Pn(p),m,g)}class _f extends ig{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _f}}function gM(i,e,n,s){const o=i.createContext(1,e,n);ag("Data must be an object, but it was:",o,s);const u=[],h=Pn.empty();Gs(s,((m,g)=>{const _=CA(e,m,n);g=fn(g);const T=o.childContextForFieldPath(_);if(g instanceof _f)u.push(_);else{const b=qu(g,T);b!=null&&(u.push(_),h.set(_,b))}}));const p=new Wn(u);return new AA(h,p,o.fieldTransforms)}function yM(i,e,n,s,o,u){const h=i.createContext(1,e,n),p=[Ma(e,s,n)],m=[o];if(u.length%2!=0)throw new de(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let b=0;b<u.length;b+=2)p.push(Ma(e,u[b])),m.push(u[b+1]);const g=[],_=Pn.empty();for(let b=p.length-1;b>=0;--b)if(!DA(g,p[b])){const M=p[b];let Y=m[b];Y=fn(Y);const L=h.childContextForFieldPath(M);if(Y instanceof _f)g.push(M);else{const H=qu(Y,L);H!=null&&(g.push(M),_.set(M,H))}}const T=new Wn(g);return new AA(_,T,h.fieldTransforms)}function _M(i,e,n,s=!1){return qu(n,i.createContext(s?4:3,e))}function qu(i,e){if(IA(i=fn(i)))return ag("Unsupported field value:",e,i),RA(i,e);if(i instanceof ig)return(function(s,o){if(!bA(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const u=[];let h=0;for(const p of s){let m=qu(p,o.childContextForArray(h));m==null&&(m={nullValue:"NULL_VALUE"}),u.push(m),h++}return{arrayValue:{values:u}}})(i,e)}return(function(s,o){if((s=fn(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return nN(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=gt.fromDate(s);return{timestampValue:$h(o.serializer,u)}}if(s instanceof gt){const u=new gt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:$h(o.serializer,u)}}if(s instanceof ai)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof _r)return{bytesValue:jS(o.serializer,s._byteString)};if(s instanceof Bt){const u=o.databaseId,h=s.firestore._databaseId;if(!h.isEqual(u))throw o.createError(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:qm(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Or)return(function(h,p){const m=h instanceof Or?h.toArray():h;return{mapValue:{fields:{[gS]:{stringValue:yS},[jh]:{arrayValue:{values:m.map((_=>{if(typeof _!="number")throw p.createError("VectorValues must only contain numeric values.");return Um(p.serializer,_)}))}}}}}})(s,o);if(YS(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${rf(s)}`)})(i,e)}function RA(i,e){const n={};return cS(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(i,((s,o)=>{const u=qu(o,e.childContextForField(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function IA(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof gt||i instanceof ai||i instanceof _r||i instanceof Bt||i instanceof ig||i instanceof Or||YS(i))}function ag(i,e,n){if(!IA(n)||!lS(n)){const s=rf(n);throw s==="an object"?e.createError(i+" a custom object"):e.createError(i+" "+s)}}function Ma(i,e,n){if((e=fn(e))instanceof rg)return e._internalPath;if(typeof e=="string")return CA(i,e);throw Xh("Field path arguments must be of type string or ",i,!1,void 0,n)}const vM=new RegExp("[~\\*/\\[\\]]");function CA(i,e,n){if(e.search(vM)>=0)throw Xh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new rg(...e.split("."))._internalPath}catch{throw Xh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Xh(i,e,n,s,o){const u=s&&!s.isEmpty(),h=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(u||h)&&(m+=" (found",u&&(m+=` in field ${s}`),h&&(m+=` in document ${o}`),m+=")"),new de(ne.INVALID_ARGUMENT,p+i+m)}function DA(i,e){return i.some((n=>n.isEqual(e)))}class EM{convertValue(e,n="none"){switch(zs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw we(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return Gs(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[jh].arrayValue?.values?.map((s=>zt(s.doubleValue)));return new Or(n)}convertGeoPoint(e){return new ai(zt(e.latitude),zt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=of(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=Ls(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=dt.fromString(e);Ze(KS(s),9688,{name:e});const o=new Au(s.get(1),s.get(3)),u=new Te(s.popFirst(5));return o.isEqual(n)||zi(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class NA extends EM{constructor(e){super(),this.firestore=e}convertBytes(e){return new _r(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}const ST="@firebase/firestore",AT="4.10.0";class OA{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(Ma("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TM extends OA{data(){return super.data()}}function SM(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new de(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class og{}class lg extends og{}function mh(i,e,...n){let s=[];e instanceof og&&s.push(e),s=s.concat(n),(function(u){const h=u.filter((m=>m instanceof ug)).length,p=u.filter((m=>m instanceof vf)).length;if(h>1||h>0&&p>0)throw new de(ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)i=o._apply(i);return i}class vf extends lg{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new vf(e,n,s)}_apply(e){const n=this._parse(e);return MA(e._query,n),new Ks(e.firestore,e.converter,nm(e._query,n))}_parse(e){const n=yf(e.firestore);return(function(u,h,p,m,g,_,T){let b;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new de(ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){wT(T,_);const Y=[];for(const L of T)Y.push(bT(m,u,L));b={arrayValue:{values:Y}}}else b=bT(m,u,T)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||wT(T,_),b=_M(p,h,T,_==="in"||_==="not-in");return Yt.create(g,_,b)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function AM(i,e,n){const s=e,o=Ma("where",i);return vf._create(o,s,n)}class ug extends og{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ug(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:kr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let h=o;const p=u.getFlattenedFilters();for(const m of p)MA(h,m),h=nm(h,m)})(e._query,n),new Ks(e.firestore,e.converter,nm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class cg extends lg{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new cg(e,n)}_apply(e){const n=(function(o,u,h){if(o.startAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new de(ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wu(u,h)})(e._query,this._field,this._direction);return new Ks(e.firestore,e.converter,YD(e._query,n))}}function bM(i,e="asc"){const n=e,s=Ma("orderBy",i);return cg._create(s,n)}class hg extends lg{constructor(e,n,s){super(),this.type=e,this._limit=n,this._limitType=s}static _create(e,n,s){return new hg(e,n,s)}_apply(e){return new Ks(e.firestore,e.converter,Hh(e._query,this._limit,this._limitType))}}function wM(i){return vD("limit",i),hg._create("limit",i,"F")}function bT(i,e,n){if(typeof(n=fn(n))=="string"){if(n==="")throw new de(ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wS(e)&&n.indexOf("/")!==-1)throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(dt.fromString(n));if(!Te.isDocumentKey(s))throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return zE(i,new Te(s))}if(n instanceof Bt)return zE(i,n._key);throw new de(ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${rf(n)}.`)}function wT(i,e){if(!Array.isArray(i)||i.length===0)throw new de(ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function MA(i,e){const n=(function(o,u){for(const h of o)for(const p of h.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(i.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new de(ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function VA(i,e,n){let s;return s=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,s}class lu{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wa extends OA{constructor(e,n,s,o,u,h){super(e,n,s,o,h),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ch(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(Ma("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=wa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}wa._jsonSchemaVersion="firestore/documentSnapshot/1.0",wa._jsonSchema={type:Qt("string",wa._jsonSchemaVersion),bundleSource:Qt("string","DocumentSnapshot"),bundleName:Qt("string"),bundle:Qt("string")};class Ch extends wa{data(e={}){return super.data(e)}}class Lo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new lu(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new Ch(this._firestore,this._userDataWriter,s.key,s,new lu(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new de(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((p=>{const m=new Ch(o._firestore,o._userDataWriter,p.doc.key,p.doc,new lu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:m,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const m=new Ch(o._firestore,o._userDataWriter,p.doc.key,p.doc,new lu(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let g=-1,_=-1;return p.type!==0&&(g=h.indexOf(p.doc.key),h=h.delete(p.doc.key)),p.type!==1&&(h=h.add(p.doc),_=h.indexOf(p.doc.key)),{type:RM(p.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new de(ne.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Lo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Om.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function RM(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return we(61501,{type:i})}}Lo._jsonSchemaVersion="firestore/querySnapshot/1.0",Lo._jsonSchema={type:Qt("string",Lo._jsonSchemaVersion),bundleSource:Qt("string","QuerySnapshot"),bundleName:Qt("string"),bundle:Qt("string")};function Jn(i){i=xr(i,Bt);const e=xr(i.firestore,Pa),n=ng(e);return aM(n,i._key).then((s=>CM(e,i,s)))}function Qn(i){i=xr(i,Ks);const e=xr(i.firestore,Pa),n=ng(e),s=new NA(e);return SM(i._query),oM(n,i._query).then((o=>new Lo(e,s,i,o)))}function Xn(i,e,n){i=xr(i,Bt);const s=xr(i.firestore,Pa),o=VA(i.converter,e,n),u=yf(s);return Ef(s,[wA(u,"setDoc",i._key,o,i.converter!==null,n).toMutation(i._key,vr.none())])}function IM(i,e,n,...s){i=xr(i,Bt);const o=xr(i.firestore,Pa),u=yf(o);let h;return h=typeof(e=fn(e))=="string"||e instanceof rg?yM(u,"updateDoc",i._key,e,n,s):gM(u,"updateDoc",i._key,e),Ef(o,[h.toMutation(i._key,vr.exists(!0))])}function mu(i){return Ef(xr(i.firestore,Pa),[new zm(i._key,vr.none())])}function RT(i,e){const n=xr(i.firestore,Pa),s=ct(i),o=VA(i.converter,e),u=yf(i.firestore);return Ef(n,[wA(u,"addDoc",s._key,o,i.converter!==null,{}).toMutation(s._key,vr.exists(!1))]).then((()=>s))}function Ef(i,e){const n=ng(i);return lM(n,e)}function CM(i,e,n){const s=n.docs.get(e._key),o=new NA(i);return new wa(i,o,e._key,s,new lu(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){oD(Yo),Uo(new Ia("firestore",((s,{instanceIdentifier:o,options:u})=>{const h=s.getProvider("app").getImmediate(),p=new Pa(new cD(s.getProvider("auth-internal")),new dD(h,s.getProvider("app-check-internal")),OD(h,o),h);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Ms(ST,AT,e),Ms(ST,AT,"esm2020")})();const DM={saryan:[{key:"ui.theme",sourceField:"selectedTheme",valueType:"string"}]};function NM(i){if(i.id!=="settings")return i;const e=Array.from(new Set([...Array.isArray(i.permissions)?i.permissions:[],"system.language.write"]));return{...i,id:"language",name:i.name||"",iframePath:"/language-app/index.html",permissions:e,supportedLocales:["hy","en"],defaultLocale:"en"}}const An=Kt(Ut());async function fg(){try{return(await Qn(Tn(An,"systemApps"))).docs.map(e=>NM({...e.data(),builtin:!0}))}catch(i){return console.error("Error loading system apps:",i),[]}}async function dg(i){try{let e=mh(Tn(An,"systemStore"));return i?.category&&(e=mh(e,AM("category","==",i.category))),i?.sortBy&&(e=mh(e,bM(i.sortBy,"desc"))),i?.limit&&(e=mh(e,wM(i.limit))),(await Qn(e)).docs.map(s=>s.data())}catch(e){return console.error("Error loading store apps:",e),[]}}async function OM(i){try{const e=await Jn(ct(An,"systemStore",i));return e.exists()?e.data():null}catch(e){return console.error(`Error loading app ${i}:`,e),null}}async function xA(i){try{const e=Tn(An,`users/${i}/installedApps`);return(await Qn(e)).docs.map(s=>{const o=s.data();return{id:s.id,appId:typeof o.appId=="string"&&o.appId.length>0?o.appId:s.id,installedAt:typeof o.installedAt=="string"?o.installedAt:new Date().toISOString(),isFavorite:!!o.isFavorite}})}catch(e){return console.warn(`No installed apps found for user ${i}:`,e),[]}}async function MM(i){try{const e=Tn(An,`users/${i}/space`);return(await Qn(e)).docs.map(s=>{const o=s.data();return{id:s.id,appId:typeof o.appId=="string"&&o.appId.length>0?o.appId:s.id,...o}})}catch(e){return console.warn(`No app spaces found for user ${i}:`,e),[]}}async function kA(i){try{const e=Tn(An,`users/${i}/osBindings`);return(await Qn(e)).docs.map(s=>{const o=s.data();return{id:s.id,key:typeof o.key=="string"?o.key:s.id,providerAppId:typeof o.providerAppId=="string"?o.providerAppId:"",sourceCollection:o.sourceCollection==="settings"?"settings":"space",sourceDocumentId:typeof o.sourceDocumentId=="string"?o.sourceDocumentId:typeof o.providerAppId=="string"?o.providerAppId:"",sourceField:typeof o.sourceField=="string"?o.sourceField:"value",valueType:o.valueType==="number"||o.valueType==="timestamp"?o.valueType:"string",updatedAt:typeof o.updatedAt=="string"?o.updatedAt:void 0}})}catch(e){return console.warn(`No osBindings found for user ${i}:`,e),[]}}async function IT(){try{const i=Tn(An,"globalSpaces");return(await Qn(i)).docs.map(n=>{const s=n.data();return{id:n.id,name:typeof s.name=="string"&&s.name.length>0?s.name:n.id,slug:typeof s.slug=="string"?s.slug:void 0,description:typeof s.description=="string"?s.description:void 0,createdAt:typeof s.createdAt=="string"?s.createdAt:void 0,updatedAt:typeof s.updatedAt=="string"?s.updatedAt:void 0}})}catch(i){return console.warn("No global spaces found:",i),[]}}async function CT(i){try{const e=Tn(An,`globalSpaces/${i}/schema`);return(await Qn(e)).docs.map(s=>{const o=s.data(),u=typeof o.key=="string"&&o.key.length>0?o.key:s.id;return{id:s.id,key:u,label:typeof o.label=="string"?o.label:u,type:typeof o.type=="string"?o.type:"text",required:!!o.required,...o}})}catch(e){return console.warn(`No schema found for global space ${i}:`,e),[]}}async function DT(i){try{const e=Tn(An,`globalSpaces/${i}/records`);return(await Qn(e)).docs.map(s=>({id:s.id,...s.data()}))}catch(e){return console.warn(`No records found for global space ${i}:`,e),[]}}async function VM(i,e){try{const n=await OM(e);if(!n)throw new Error(`App ${e} not found in store`);if(await PA(i,e))throw new Error(`App ${e} is already installed`);const o={appId:e,userId:i,installedAt:new Date().toISOString(),isFavorite:!1};await Xn(ct(An,`users/${i}/installedApps`,e),o),await IM(ct(An,"systemStore",e),{downloads:(n.downloads||0)+1}),await Xn(ct(An,`users/${i}/space`,e),{appId:e,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{merge:!0});const u=(Array.isArray(n.osExports)?n.osExports:null)??DM[e]??[],h=new Date().toISOString();return await Promise.all(u.map(p=>Xn(ct(An,`users/${i}/osBindings`,p.key),{key:p.key,providerAppId:e,sourceCollection:"space",sourceDocumentId:e,sourceField:p.sourceField,valueType:p.valueType,updatedAt:h},{merge:!0}))),console.log(`App ${e} installed successfully for user ${i}`),o}catch(n){throw console.error(`Error installing app ${e} for user ${i}:`,n),n}}async function xM(i,e){try{if(!await PA(i,e))throw new Error(`App ${e} is not installed`);await mu(ct(An,`users/${i}/installedApps`,e));const s=(await kA(i)).filter(o=>o.providerAppId===e);await Promise.all(s.map(o=>{const u=o.id||o.key;return mu(ct(An,`users/${i}/osBindings`,u))})),console.log(`App ${e} uninstalled successfully for user ${i}`)}catch(n){throw console.error(`Error uninstalling app ${e} for user ${i}:`,n),n}}async function PA(i,e){try{return(await Jn(ct(An,`users/${i}/installedApps`,e))).exists()}catch(n){return console.error(`Error checking if app ${e} is installed for user ${i}:`,n),!1}}async function kM(i){try{const[e,n,s]=await Promise.all([fg(),xA(i),dg()]),o=new Map(e.map(m=>[m.id,m])),u=new Map(s.map(m=>[m.id,m])),h=[...e];for(const m of n){const g=u.get(m.appId);g&&(o.has(m.appId)||h.push(g))}return h.filter((m,g,_)=>g===_.findIndex(T=>T.id===m.id))}catch(e){return console.error(`Error loading all apps for user ${i}:`,e),[]}}function PM(i,e){const n=[];return i.appId&&e?.iframePath&&n.push({label:"",type:"open",icon:"",handler:"openApp"}),n}function LM(i){if(i===null)return"null";if(typeof i>"u")return"";if(typeof i=="string")return i;if(typeof i=="number"||typeof i=="boolean")return String(i);if(Array.isArray(i))return`Array(${i.length})`;if(i&&typeof i=="object")try{const e=JSON.stringify(i);return e.length>120?`${e.slice(0,117)}...`:e}catch{return"[object]"}return String(i)}function UM(i,e,n,s,o,u,h,p,m,g){const _={},T=[...i,...h??[]],b=new Map(T.map(L=>[L.id,L])),M=(L,H,Q)=>{if(Q.valueType!=="array"||!Array.isArray(Q.rawValue))return;const Z=Q.rawValue,se=100;if(Z.slice(0,se).forEach((ce,ae)=>{const I=`${H}-item-${ae}`;_[I]||(_[I]={id:I,name:`[${ae}]`,parentId:L,childrenIds:[],appDataId:`${Q.key}[${ae}]`,nodeType:"appFieldArrayItem",previewValue:LM(ce)},_[L].childrenIds.push(I))}),Z.length>se){const ce=`${H}-item-more`;_[ce]||(_[ce]={id:ce,name:"...",parentId:L,childrenIds:[],appDataId:`${Q.key}[more]`,nodeType:"appFieldArrayItem",previewValue:`+${Z.length-se} more`},_[L].childrenIds.push(ce))}};return _["hayos-root"]={id:"hayos-root",name:"",parentId:null,childrenIds:["system-root","user-root","global-spaces-root"],nodeType:"root"},_["system-root"]={id:"system-root",name:"",parentId:"hayos-root",childrenIds:[],nodeType:"system"},_["global-spaces-root"]={id:"global-spaces-root",name:"",parentId:"hayos-root",childrenIds:["global-spaces-all"],appId:"global-spaces-manager",nodeType:"globalSpaces"},_["global-spaces-all"]={id:"global-spaces-all",name:" ",parentId:"global-spaces-root",childrenIds:[],appId:"global-spaces-manager",nodeType:"globalSpaces"},p&&p.length>0&&p.forEach(L=>{const H=`global-space-${L.id}`;_[H]={id:H,name:L.name,parentId:"global-spaces-root",childrenIds:[],appDataId:L.id,nodeType:"globalSpace"},_["global-spaces-root"].childrenIds.push(H);const Q=`${H}-schema`;_[Q]={id:Q,name:"Schema",parentId:H,childrenIds:[],appDataId:`${L.id}:schema`,nodeType:"appData"},_[H].childrenIds.push(Q);const Z=`${H}-records`;_[Z]={id:Z,name:"Records",parentId:H,childrenIds:[],appDataId:`${L.id}:records`,nodeType:"appData"},_[H].childrenIds.push(Z),(m?.get(L.id)||[]).forEach(ce=>{const ae=`${Q}-field-${ce.key}`;_[ae]||(_[ae]={id:ae,name:ce.key,parentId:Q,childrenIds:[],appDataId:`${L.id}:schema:${ce.key}`,nodeType:ce.valueType==="array"?"appFieldArray":"appField",previewValue:ce.value},_[Q].childrenIds.push(ae)),M(ae,ae,ce)}),(g?.get(L.id)||[]).forEach(ce=>{const ae=`${Z}-record-${ce.id}`;_[ae]||(_[ae]={id:ae,name:ce.id,parentId:Z,childrenIds:[],appDataId:`${L.id}:record:${ce.id}`,nodeType:"appData"},_[Z].childrenIds.push(ae)),ce.fields.forEach(I=>{const w=`${ae}-field-${I.key}`;_[w]||(_[w]={id:w,name:I.key,parentId:ae,childrenIds:[],appDataId:`${L.id}:record:${ce.id}:${I.key}`,nodeType:I.valueType==="array"?"appFieldArray":"appField",previewValue:I.value},_[ae].childrenIds.push(w)),M(w,w,I)})})}),i.filter(L=>L.builtin).forEach(L=>{const H=`system-${L.id}`;_[H]={id:H,name:L.name,parentId:"system-root",childrenIds:[],appId:L.id,nodeType:"app"},_["system-root"].childrenIds.push(H),(L.group==="marketplace"||L.id==="app-store")&&h&&h.length>0&&h.forEach(Q=>{console.log(" node",Q);const Z=`store-${Q.id}`;_[Z]={id:Z,name:Q.name,parentId:H,childrenIds:[],appId:Q.id,nodeType:"app"},_[H].childrenIds.push(Z)})}),e?(_["user-root"]={id:"user-root",name:"",parentId:"hayos-root",childrenIds:["user-programs","user-data"],nodeType:"user",userId:e},_["user-programs"]={id:"user-programs",name:"",parentId:"user-root",childrenIds:[],nodeType:"programs"},_["user-data"]={id:"user-data",name:"",parentId:"user-root",childrenIds:[],nodeType:"data"},n&&n.length>0&&n.forEach(L=>{const H=b.get(L);H&&(_[`program-${L}`]={id:`program-${L}`,name:H.name,parentId:"user-programs",childrenIds:[],appId:L,nodeType:"app"},_["user-programs"].childrenIds.push(`program-${L}`))}),s&&s.length>0&&s.forEach(L=>{const H=b.get(L),Q=`data-${L}`;_[Q]||(_[Q]={id:Q,name:H?.name||L,parentId:"user-data",childrenIds:[],appId:L,nodeType:"appData"},_["user-data"].childrenIds.push(Q)),o&&o.has(L)&&(o.get(L)||[]).forEach(se=>{const _e=`data-${L}-field-${se.key}`;if(!_[_e]){const ce=se.valueType==="array"&&Array.isArray(se.rawValue);_[_e]={id:_e,name:se.key,parentId:Q,childrenIds:[],appDataId:se.key,nodeType:ce?"appFieldArray":"appField",previewValue:se.value},_[Q].childrenIds.push(_e)}se.valueType==="array"&&Array.isArray(se.rawValue)&&M(_e,`data-${L}-field-${se.key}`,se)})})):_["user-root"]={id:"user-root",name:"",parentId:"hayos-root",childrenIds:[],nodeType:"user"},Object.values(_).forEach(L=>{const H=L.appId?b.get(L.appId):void 0,Q=PM(L,H);Q&&Q.length>0&&(L.actions=Q)}),_}let NT=!1,Pp=null,OT=0;const zM=3e4,No={hue:220,chroma:.2,mode:"dark",lsBase:1,lsScale:.85,lsRadiusRatio:.375},BM=new Set(["hy","en"]),fm="en";function Lp(i,e=fm){if(typeof i!="string")return e;const n=i.trim().toLowerCase();return n==="hy"||n==="en"?n:e}function MT(i,e){const n=Lp(i);if(!e)return n;const s=Array.isArray(e.supportedLocales)?e.supportedLocales.map(p=>Lp(p)).filter((p,m,g)=>g.indexOf(p)===m):["hy","en"],o=new Set(s),u=Lp(e.defaultLocale,fm),h=o.has(u)?u:s.length>0?s[0]:fm;return o.has(n)?n:h}function jM(i,e){const n={type:"hayos:systemEvent",event:i,payload:e,at:Date.now()};window.postMessage(n,"*"),document.querySelectorAll("iframe").forEach(s=>{try{s.contentWindow?.postMessage(n,"*")}catch{}})}async function qM(i,e){if(i==="system")return{id:"system",name:"System",type:"builtin_app",iframePath:"",builtin:!0,permissions:[],supportedLocales:["hy","en"],defaultLocale:"en"};const n=Date.now();return(!Pp||n-OT>zM)&&(Pp=await LA(e),OT=n),Pp.find(s=>s.id===i)}async function LA(i){try{const e=i?await kM(i):await Promise.all([fg(),dg()]).then(([n,s])=>[...n,...s]);return Array.from(new Map([...e??[],...Uh].map(n=>[n.id,n])).values())}catch(e){return console.warn("Failed to refresh app cache, falling back to static apps",e),Uh}}function HM(){const i=document.documentElement.dataset.theme;return{...No,mode:i==="light"?"light":"dark"}}async function FM(i,e,n){if(!i||!e)return null;const s=Kt(Ut()),o=ct(s,`users/${i}/osBindings`,e),u=await Jn(o);if(u.exists()){const h=u.data(),p=typeof h.providerAppId=="string"&&h.providerAppId.length>0?h.providerAppId:"",m=typeof h.sourceCollection=="string"&&h.sourceCollection.length>0?h.sourceCollection:"",g=typeof h.sourceDocumentId=="string"&&h.sourceDocumentId.length>0?h.sourceDocumentId:"",_=typeof h.sourceField=="string"&&h.sourceField.length>0?h.sourceField:"";if(g&&_){const T=p==="system"?`users/${i}/settings`:m?`users/${i}/${m}`:"";if(!T)return null;const b=ct(s,T,g),M=await Jn(b);if(M.exists()){const L=M.data()[_]??null;return e==="ui.language"?MT(L,n):L}}}if(e==="ui.theme"){const h=ct(s,`users/${i}/space`,"saryan"),p=await Jn(h);if(p.exists()){const m=p.data();return typeof m.selectedTheme=="string"?m.selectedTheme:null}}if(e==="ui.language"){const h=ct(s,`users/${i}/settings`,"preferences"),p=await Jn(h),m=p.exists()?p.data().language:null;return MT(m,n)}return null}const GM=new Set(["text","number","boolean","date","imageUrl","json"]);function gh(i){return i.permissions.includes("global.space.read")||i.permissions.includes("global.space.write")}function wo(i){return i.permissions.includes("global.space.write")}function UA(i){return i.toLowerCase().trim().replace(/[^a-z0-9-_]+/g,"-").replace(/^-+|-+$/g,"").slice(0,64)}function gr(i,e){if(typeof i!="string")throw new Error(`Invalid ${e}`);const n=i.trim();if(!n||n.includes("/"))throw new Error(`Invalid ${e}`);return n}function VT(i){return!i||typeof i!="object"||Array.isArray(i)?{}:i}function $M(i,e){const n=typeof i?.key=="string"?i.key.trim():"",s=UA(typeof e=="string"&&e.length>0?e:n);if(!s)throw new Error("Invalid field key");const o=typeof i?.type=="string"?i.type:"";if(!GM.has(o))throw new Error("Invalid field type");return{id:s,key:s,label:typeof i?.label=="string"&&i.label.trim().length>0?i.label.trim():s,type:o,required:!!i?.required,options:Array.isArray(i?.options)?i.options:[],updatedAt:new Date().toISOString()}}function KM(){NT||(NT=!0,window.addEventListener("message",async i=>{const e=i.data;if(!e||e.type!=="hayos:request")return;const{requestId:n,sourceAppId:s,action:o}=e,u=Vs(),h=await qM(s,u.currentUser?.uid);if(!h){const m={type:"hayos:response",requestId:n,ok:!1,error:"Unknown app"};i.source?.postMessage(m,{targetOrigin:i.origin});return}const p=m=>{i.source?.postMessage(m,{targetOrigin:i.origin})};try{switch(o.kind){case"auth.getToken":{if(!h.permissions.includes("auth.token.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: auth.token.read"});return}const m=await Lh(!1);p({type:"hayos:response",requestId:n,ok:!0,action:"auth.getToken",token:m});return}case"auth.getUser":{if(!h.permissions.includes("auth.token.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: auth.token.read"});return}const g=Vs().currentUser;p({type:"hayos:response",requestId:n,ok:!0,action:"auth.getUser",user:g?{uid:g.uid,email:g.email,displayName:g.displayName,photoURL:g.photoURL}:null});return}case"auth.getIdToken":{if(!h.permissions.includes("auth.token.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: auth.token.read"});return}const m=o.forceRefresh??!1,g=await Lh(m);p({type:"hayos:response",requestId:n,ok:!0,action:"auth.getIdToken",idToken:g});return}case"auth.signOut":{if(!h.permissions.includes("auth.token.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: auth.token.read"});return}await Vs().signOut(),p({type:"hayos:response",requestId:n,ok:!0,action:"auth.signOut"});return}case"theme.get":{if(!h.permissions.includes("settings.theme.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: settings.theme.read"});return}const m=HM();p({type:"hayos:response",requestId:n,ok:!0,action:"theme.get",theme:m});return}case"theme.set":{if(!h.permissions.includes("settings.theme.write")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: settings.theme.write"});return}const{value:m}=o,g=(b,M,Y)=>Math.min(Y,Math.max(M,b)),_={hue:typeof m.hue=="number"?g(m.hue,0,360):No.hue,chroma:typeof m.chroma=="number"?g(m.chroma,0,1):No.chroma,mode:m.mode==="light"?"light":"dark",lsBase:typeof m.lsBase=="number"?g(m.lsBase,.8,1.4):No.lsBase,lsScale:typeof m.lsScale=="number"?g(m.lsScale,.7,1):No.lsScale,lsRadiusRatio:typeof m.lsRadiusRatio=="number"?g(m.lsRadiusRatio,0,1):No.lsRadiusRatio};document.documentElement.dataset.theme=_.mode;const T=document.documentElement.style;T.setProperty("--ls-base",`${_.lsBase}rem`),T.setProperty("--ls-scale",String(_.lsScale)),T.setProperty("--ls-radius-ratio",String(_.lsRadiusRatio)),p({type:"hayos:response",requestId:n,ok:!0,action:"theme.set",theme:_});return}case"system.language.set":{if(!h.permissions.includes("system.language.write")&&h.id!=="language"){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: system.language.write"});return}const m=u.currentUser?.uid;if(!m){p({type:"hayos:response",requestId:n,ok:!1,error:"Not authenticated"});return}const g=typeof o.language=="string"?o.language.trim().toLowerCase():"";if(!BM.has(g)){p({type:"hayos:response",requestId:n,ok:!1,error:"Unsupported language"});return}const _=Kt(Ut());await Xn(ct(_,`users/${m}/settings`,"preferences"),{language:g,updatedAt:new Date().toISOString()},{merge:!0}),document.documentElement.lang=g,jM("languageChanged",{language:g}),p({type:"hayos:response",requestId:n,ok:!0,action:"system.language.set",language:g});return}case"apps.list":{if(!h.permissions.includes("auth.token.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: auth.token.read"});return}const m=await LA(u.currentUser?.uid),g=o.capability==="wallpaperProvider"?m.filter(_=>_.wallpaperProvider):m;p({type:"hayos:response",requestId:n,ok:!0,action:"apps.list",apps:g.map(_=>({id:_.id,name:_.name,iframePath:_.iframePath,builtin:_.builtin,wallpaperProvider:_.wallpaperProvider}))});return}case"module.getValue":{const m=typeof o.key=="string"?o.key:"";if(!m){p({type:"hayos:response",requestId:n,ok:!1,error:"Invalid module key"});return}if(m!=="ui.language"&&!h.permissions.includes("firestore.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: firestore.read"});return}const g=await FM(u.currentUser?.uid||"",m,h);p({type:"hayos:response",requestId:n,ok:!0,action:"module.getValue",key:m,value:g});return}case"firestore.get":{if(!h.permissions.includes("firestore.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: firestore.read"});return}const m=Kt(Ut()),{collection:g,documentId:_}=o;try{if(_){const T=ct(m,`users/${u.currentUser?.uid}/${g}`,_),b=await Jn(T);b.exists()?p({type:"hayos:response",requestId:n,ok:!0,action:"firestore.get",data:{id:b.id,...b.data()}}):p({type:"hayos:response",requestId:n,ok:!0,action:"firestore.get",data:null})}else{const T=Tn(m,`users/${u.currentUser?.uid}/${g}`),M=(await Qn(T)).docs.map(Y=>({id:Y.id,...Y.data()}));p({type:"hayos:response",requestId:n,ok:!0,action:"firestore.get",data:M})}}catch(T){p({type:"hayos:response",requestId:n,ok:!1,error:T instanceof Error?T.message:"Firestore error"})}return}case"firestore.add":{if(!h.permissions.includes("firestore.write")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: firestore.write"});return}const m=Kt(Ut()),{collection:g,data:_}=o;try{const T=Tn(m,`users/${u.currentUser?.uid}/${g}`),b=await RT(T,{..._,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),userId:u.currentUser?.uid});p({type:"hayos:response",requestId:n,ok:!0,action:"firestore.add",id:b.id})}catch(T){p({type:"hayos:response",requestId:n,ok:!1,error:T instanceof Error?T.message:"Firestore error"})}return}case"firestore.update":{if(!h.permissions.includes("firestore.write")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: firestore.write"});return}const m=Kt(Ut()),{collection:g,documentId:_,data:T}=o;try{const b=ct(m,`users/${u.currentUser?.uid}/${g}`,_);await Xn(b,{...T,updatedAt:new Date().toISOString(),userId:u.currentUser?.uid},{merge:!0}),p({type:"hayos:response",requestId:n,ok:!0,action:"firestore.update",success:!0})}catch(b){p({type:"hayos:response",requestId:n,ok:!1,error:b instanceof Error?b.message:"Firestore error"})}return}case"firestore.delete":{if(!h.permissions.includes("firestore.write")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: firestore.write"});return}const m=Kt(Ut()),{collection:g,documentId:_}=o;try{const T=ct(m,`users/${u.currentUser?.uid}/${g}`,_);await mu(T),p({type:"hayos:response",requestId:n,ok:!0,action:"firestore.delete",success:!0})}catch(T){p({type:"hayos:response",requestId:n,ok:!1,error:T instanceof Error?T.message:"Firestore error"})}return}case"firestore.query":{if(!h.permissions.includes("firestore.read")){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: firestore.read"});return}const m=Kt(Ut()),{collection:g}=o;try{let _;g==="systemStore"||g==="systemApps"?_=Tn(m,g):_=Tn(m,`users/${u.currentUser?.uid}/${g}`);const b=(await Qn(_)).docs.map(M=>({id:M.id,...M.data()}));p({type:"hayos:response",requestId:n,ok:!0,action:"firestore.query",data:b})}catch(_){p({type:"hayos:response",requestId:n,ok:!1,error:_ instanceof Error?_.message:"Firestore error"})}return}case"globalSpace.list":{if(!gh(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.read"});return}const m=Kt(Ut()),_=(await Qn(Tn(m,"globalSpaces"))).docs.map(T=>{const b=T.data();return{id:T.id,name:typeof b.name=="string"?b.name:T.id,slug:typeof b.slug=="string"?b.slug:T.id,description:typeof b.description=="string"?b.description:"",createdAt:b.createdAt??null,updatedAt:b.updatedAt??null}});p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.list",data:_});return}case"globalSpace.create":{if(!wo(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.write"});return}const m=o.data??{name:""},g=typeof m.name=="string"?m.name.trim():"";if(!g){p({type:"hayos:response",requestId:n,ok:!1,error:"Space name is required"});return}const _=typeof m.slug=="string"&&m.slug.trim().length>0?m.slug:g,T=UA(_);if(!T){p({type:"hayos:response",requestId:n,ok:!1,error:"Invalid space slug"});return}const b=Kt(Ut()),M=ct(b,"globalSpaces",T);if((await Jn(M)).exists()){p({type:"hayos:response",requestId:n,ok:!1,error:"Space already exists"});return}const L=new Date().toISOString();await Xn(M,{id:T,name:g,slug:T,description:typeof m.description=="string"?m.description.trim():"",createdAt:L,updatedAt:L,createdBy:u.currentUser?.uid||null}),window.postMessage({type:"hayos:globalSpacesChanged"},"*"),p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.create",data:{id:T,name:g,slug:T}});return}case"globalSpace.get":{if(!gh(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.read"});return}const m=gr(o.spaceId,"spaceId"),g=Kt(Ut()),_=ct(g,"globalSpaces",m),T=await Jn(_);p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.get",data:T.exists()?{id:T.id,...T.data()}:null});return}case"globalSpace.getSchema":{if(!gh(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.read"});return}const m=gr(o.spaceId,"spaceId"),g=Kt(Ut()),_=Tn(g,`globalSpaces/${m}/schema`),b=(await Qn(_)).docs.map(M=>({id:M.id,...M.data()}));p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.getSchema",data:b});return}case"globalSpace.upsertSchemaField":{if(!wo(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.write"});return}const m=gr(o.spaceId,"spaceId"),g=o.fieldId?gr(o.fieldId,"fieldId"):void 0,_=$M(o.field,g),T=Kt(Ut()),b=ct(T,`globalSpaces/${m}/schema`,_.id);await Xn(b,_,{merge:!0}),p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.upsertSchemaField",data:_});return}case"globalSpace.deleteSchemaField":{if(!wo(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.write"});return}const m=gr(o.spaceId,"spaceId"),g=gr(o.fieldId,"fieldId"),_=Kt(Ut());await mu(ct(_,`globalSpaces/${m}/schema`,g)),p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.deleteSchemaField",data:{success:!0}});return}case"globalSpace.listRecords":{if(!gh(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.read"});return}const m=gr(o.spaceId,"spaceId"),g=Kt(Ut()),_=Tn(g,`globalSpaces/${m}/records`),b=(await Qn(_)).docs.map(M=>({id:M.id,...M.data()}));p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.listRecords",data:b});return}case"globalSpace.createRecord":{if(!wo(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.write"});return}const m=gr(o.spaceId,"spaceId"),g=VT(o.data),_=new Date().toISOString(),T=Kt(Ut()),b=Tn(T,`globalSpaces/${m}/records`),M=await RT(b,{...g,createdAt:_,updatedAt:_,updatedBy:u.currentUser?.uid||null});p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.createRecord",data:{id:M.id}});return}case"globalSpace.updateRecord":{if(!wo(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.write"});return}const m=gr(o.spaceId,"spaceId"),g=gr(o.recordId,"recordId"),_=VT(o.data),T=Kt(Ut());await Xn(ct(T,`globalSpaces/${m}/records`,g),{..._,updatedAt:new Date().toISOString(),updatedBy:u.currentUser?.uid||null},{merge:!0}),p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.updateRecord",data:{success:!0}});return}case"globalSpace.deleteRecord":{if(!wo(h)){p({type:"hayos:response",requestId:n,ok:!1,error:"Permission denied: global.space.write"});return}const m=gr(o.spaceId,"spaceId"),g=gr(o.recordId,"recordId"),_=Kt(Ut());await mu(ct(_,`globalSpaces/${m}/records`,g)),p({type:"hayos:response",requestId:n,ok:!0,action:"globalSpace.deleteRecord",data:{success:!0}});return}default:p({type:"hayos:response",requestId:n,ok:!1,error:"Unknown action"});return}}catch(m){p({type:"hayos:response",requestId:n,ok:!1,error:m instanceof Error?m.message:"Unknown error"})}}))}const YM=({node:i,position:e,onAction:n})=>{const s=!!(i.actions&&i.actions.length>0),o=typeof i.previewValue=="string"&&i.previewValue.length>0;return!s&&!o?null:(console.log(i),K.jsx("div",{className:"sphere-toolbar fixed bottom-4 left-1/2 -translate-x-1/2 -translate-y-1/2",style:{zIndex:2100},children:K.jsxs("div",{className:"toolbar-content rounded-box border border-base-content/20 bg-base-100/90 p-2 shadow-lg backdrop-blur",children:[o&&K.jsxs("div",{className:"mb-2 max-w-[320px] text-sm",children:[K.jsx("div",{className:"font-semibold",children:i.name}),K.jsx("div",{className:"mt-1 rounded bg-base-200 px-2 py-1 font-mono text-xs break-all",children:i.previewValue})]}),s&&i.actions.map((u,h)=>K.jsxs("button",{className:`toolbar-btn ${u.type}`,onClick:()=>n(u,i),title:u.label,children:[u.icon&&K.jsx("span",{children:u.icon}),K.jsx("span",{children:u.label})]},h))]})}))};function QM({hierarchy:i,rootNodeId:e,currentNodeId:n,onNodeActivate:s,onStateChange:o,onToolbarAction:u,onNavigateTo:h}){const p=N.useRef(null),m=N.useRef(null),g=N.useRef(null),_=N.useRef(null),T=N.useRef(null),[b,M]=N.useState(null),[Y,L]=N.useState(null),[H,Q]=N.useState([0,0,0]),[Z,se]=N.useState(()=>document.documentElement.getAttribute("data-theme")||"dark"),_e=N.useMemo(()=>new Set(["light","cupcake","bumblebee","emerald","corporate","retro","valentine","garden","lofi","pastel","fantasy","wireframe","cmyk","autumn","lemonade","winter","silk","caramellatte"]).has(Z),[Z]),ce=N.useMemo(()=>({color:_e?"#111111":"#ffffff",hoverColor:_e?"#000000":"#ffffff",inactiveColor:_e?"#4b5563":"#111111"}),[_e]),ae=(I,w)=>{if(w)switch(u?.(I,w),I.handler){case"openApp":break;case"navigateInto":{const C=_.current||g.current||window.KoryoonInstance;C?.navigateTo&&C.navigateTo(w.id),h?.(w.id);break}}};return N.useEffect(()=>{const I=document.documentElement,w=new MutationObserver(()=>{const C=I.getAttribute("data-theme")||"dark";se(C)});return w.observe(I,{attributes:!0,attributeFilter:["data-theme"]}),()=>{w.disconnect()}},[]),N.useEffect(()=>{if(!window.Koryoon||!p.current)return;p.current.innerHTML="";const I=window.Koryoon.init({container:p.current,hierarchy:i,rootNodeId:e,config:{scale:{sphereSizeBase:window.innerWidth*.01},theme:{pointCloud:{hoverColor:ce.hoverColor,inactiveColor:ce.inactiveColor,color:ce.color}}},onRegisterHandlers:w=>{_.current=w,window.KoryoonInstance=w},onStateChange:w=>{o?.(w);const C=w?.autoHoveredSphereId||w?.hoveredNodeId||w?.hoveredSphereId||w?.hoveredId,x=w?.currentNodeId||w?.currentId,O=C||x;if(!O)return;const P=i[O];m.current=O,C&&T.current!==C&&(T.current=C,L(C)),P&&(M(O),Array.isArray(w?.currentNodePosition)&&Q(w.currentNodePosition))}});return g.current=I,()=>{p.current&&(p.current.innerHTML="")}},[i,s,ce,e]),N.useEffect(()=>{n&&g.current?.navigateTo&&g.current.navigateTo(n)},[n]),K.jsxs(K.Fragment,{children:[K.jsx("div",{ref:p,className:"t-layout t-layout-grow"}),(()=>{const I=Y||b;if(!I)return null;const w=i[I];return w?K.jsx(YM,{node:w,position:H,onAction:ae}):null})()]})}function XM({windows:i,apps:e,onClose:n,onFocus:s,renderInternalApp:o}){return i.length===0?null:K.jsx(K.Fragment,{children:i.slice().sort((u,h)=>u.zIndex-h.zIndex).map(u=>{const h=e.find(g=>g.id===u.appId);if(!h)return null;const p=new URLSearchParams({appId:h.id,...u.query??{}}),m=o?.(h,u);return K.jsx("div",{className:"hayos-window-frame",style:{zIndex:u.zIndex},onMouseDown:()=>s(u.id),children:K.jsx("div",{className:"card h-full w-full overflow-hidden border border-base-300/70 bg-base-100/65 shadow-xl backdrop-blur-md",children:K.jsxs("div",{className:"card-body h-full p-0",children:[K.jsxs("div",{className:"navbar min-h-14 border-b border-base-300/70 px-3",children:[K.jsx("div",{className:"navbar-start",children:K.jsx("h2",{className:"card-title text-base",children:h.name})}),K.jsx("div",{className:"navbar-end",children:K.jsx("button",{type:"button",className:"btn btn-circle btn-ghost btn-sm",onClick:()=>n(u.id),children:""})})]}),K.jsx("div",{className:"h-full min-h-0 p-0",children:m||K.jsx("iframe",{title:u.title,src:`${h.iframePath}?${p.toString()}`,className:"h-full w-full border-0"})})]})})},u.id)})})}function WM({app:i,onClose:e}){return K.jsxs("div",{className:"card absolute bottom-24 right-4 z-50 h-[min(320px,60vh)] w-[min(420px,90vw)] overflow-hidden border border-base-300/70 bg-base-100/85 shadow-xl backdrop-blur-md",children:[K.jsxs("div",{className:"navbar min-h-12 border-b border-base-300/70 px-3",children:[K.jsx("div",{className:"navbar-start",children:K.jsx("h3",{className:"card-title text-sm",children:i.name})}),K.jsx("div",{className:"navbar-end",children:K.jsx("button",{type:"button",className:"btn btn-circle btn-ghost btn-xs",onClick:e,children:""})})]}),K.jsx("div",{className:"h-full min-h-0",children:K.jsx("iframe",{title:`${i.name} preview`,src:`${i.iframePath}?appId=${encodeURIComponent(i.id)}&mode=preview`,className:"h-full w-full border-0 bg-base-100"})})]})}function JM({activeAppName:i,onOpenSpotlight:e,onOpenLaunchpad:n,onSignOut:s,signingOut:o=!1,isMobile:u=!1}){const[h,p]=N.useState(()=>new Date),[m,g]=N.useState(!1);return N.useEffect(()=>{const _=window.setInterval(()=>{p(new Date)},3e4);return()=>{window.clearInterval(_)}},[]),K.jsxs("header",{className:"hayos-statusbar",children:[K.jsxs("div",{className:"hayos-statusbar__group",children:[K.jsx("span",{className:"hayos-statusbar__brand",children:"HayOS"}),i&&K.jsx("span",{className:"hayos-statusbar__chip",children:i})]}),K.jsxs("div",{className:"hayos-statusbar__group",children:[!u&&K.jsxs(K.Fragment,{children:[K.jsx("button",{type:"button",className:"hayos-statusbar__action",onClick:e,children:"Search"}),K.jsx("button",{type:"button",className:"hayos-statusbar__action",onClick:()=>{s()},disabled:o,children:o?"Logging out...":"Log out"})]}),u&&K.jsxs("div",{className:"hayos-statusbar__menuWrap",children:[K.jsx("button",{type:"button",className:"hayos-statusbar__action",onClick:()=>g(_=>!_),"aria-expanded":m,children:"Menu"}),m&&K.jsxs("div",{className:"hayos-statusbar__menu",children:[K.jsx("button",{type:"button",className:"hayos-statusbar__menuAction",onClick:()=>{g(!1),n?.()},children:"Launchpad"}),K.jsx("button",{type:"button",className:"hayos-statusbar__menuAction",onClick:()=>{g(!1),e()},children:"Search"}),K.jsx("button",{type:"button",className:"hayos-statusbar__menuAction",onClick:()=>{g(!1),s()},disabled:o,children:o?"Logging out...":"Log out"})]})]}),K.jsx("span",{className:"hayos-statusbar__time",children:h.toLocaleString([],{hour:"2-digit",minute:"2-digit"})})]})]})}function ZM({apps:i,runningAppIds:e,onOpenApp:n,isMobile:s=!1,launchpadOpen:o=!1,launchpadDragDistance:u=0,launchpadGestureEnabled:h=!1,onLaunchpadDrag:p,onLaunchpadSwipeUp:m,onLaunchpadSwipeDown:g,onLaunchpadSwipeLeft:_,onLaunchpadSwipeRight:T,onLaunchpadGestureCancel:b}){const M=i.filter(ae=>ae.id!=="global-spaces-manager"),Y=M.slice(0,4),L=Y.slice(0,2),H=Y.slice(2,4),Q=N.useRef(null),Z=N.useRef(0),se=N.useRef(0),_e=N.useRef(0),ce=N.useRef(!1);return K.jsx("footer",{className:`hayos-dock ${s?"hayos-dock--mobile":""}`,children:K.jsxs("div",{className:`hayos-dock__surface ${s?"hayos-dock__surface--mobile":""}`,children:[!s&&M.map(ae=>K.jsxs("button",{type:"button",className:"hayos-dock__item",onClick:()=>n(ae.id),title:ae.name,"aria-label":`Open ${ae.name}`,children:[K.jsx("span",{className:"hayos-dock__glyph",children:ae.name.slice(0,1).toUpperCase()}),e.has(ae.id)&&K.jsx("span",{className:"hayos-dock__running","aria-hidden":!0})]},ae.id)),s&&K.jsxs(K.Fragment,{children:[L.map(ae=>K.jsxs("button",{type:"button",className:"hayos-dock__item hayos-dock__item--mobileApp",onClick:()=>n(ae.id),title:ae.name,"aria-label":`Open ${ae.name}`,children:[K.jsx("span",{className:"hayos-dock__glyph",children:ae.name.slice(0,1).toUpperCase()}),e.has(ae.id)&&K.jsx("span",{className:"hayos-dock__running","aria-hidden":!0})]},ae.id)),K.jsx("button",{type:"button",className:`hayos-dock__launchpad ${o?"is-open":""}`,title:"Launchpad","aria-label":"Open Launchpad",style:{transform:`translateY(${Math.min(24,u*.32)}px) scale(${1+Math.min(.08,u/620)})`},onPointerDown:ae=>{Q.current=ae.pointerId,Z.current=ae.clientX,se.current=ae.clientY,_e.current=performance.now(),ce.current=!1,p?.(0)},onPointerMove:ae=>{if(Q.current!==ae.pointerId)return;const I=ae.clientX-Z.current,w=ae.clientY-se.current;if(!ce.current&&Math.hypot(I,w)>8&&(ce.current=!0),!h)return;const C=Math.max(0,w);p?.(Math.min(280,C))},onPointerUp:ae=>{if(Q.current!==ae.pointerId)return;const I=Math.max(1,performance.now()-_e.current),w=ae.clientX-Z.current,C=ae.clientY-se.current,x=Math.abs(w),O=Math.abs(C);if(Q.current=null,!ce.current||x<14&&O<14){p?.(0);return}if(!h){p?.(0);return}const P=x>O*1.12,R=O>x*1.12;if(R&&C<0){const Le=Math.max(0,-C),De=Le/I;m?.({distance:Le,velocity:De}),p?.(0);return}if(R&&C>0){const Le=Math.max(0,C),De=Le/I;g?.({distance:Le,velocity:De}),p?.(0);return}if(P&&w<0){const Le=Math.max(0,-w),De=Le/I;_?.({distance:Le,velocity:De}),p?.(0);return}if(P&&w>0){const Le=Math.max(0,w),De=Le/I;T?.({distance:Le,velocity:De}),p?.(0);return}p?.(0)},onPointerCancel:ae=>{Q.current===ae.pointerId&&(Q.current=null,ce.current=!1,b?.())},children:K.jsx("span",{className:"hayos-dock__launchpadDot"})}),H.map(ae=>K.jsxs("button",{type:"button",className:"hayos-dock__item hayos-dock__item--mobileApp",onClick:()=>n(ae.id),title:ae.name,"aria-label":`Open ${ae.name}`,children:[K.jsx("span",{className:"hayos-dock__glyph",children:ae.name.slice(0,1).toUpperCase()}),e.has(ae.id)&&K.jsx("span",{className:"hayos-dock__running","aria-hidden":!0})]},ae.id))]})]})})}function eV({open:i,apps:e,runningAppIds:n,onClose:s,onOpenApp:o,isMobile:u=!1}){const[h,p]=N.useState(""),[m,g]=N.useState(0);N.useEffect(()=>{i||(p(""),g(0))},[i]);const _=N.useMemo(()=>{const T=h.trim().toLowerCase(),b=e.filter(M=>M.id!=="global-spaces-manager");return T?b.filter(M=>M.name.toLowerCase().includes(T)||M.id.toLowerCase().includes(T)).slice(0,8):b.slice(0,8)},[e,h]);return N.useEffect(()=>{if(!i||u)return;const T=b=>{if(b.key==="Escape"){s();return}if(b.key==="ArrowDown"){b.preventDefault(),g(M=>Math.min(M+1,Math.max(_.length-1,0)));return}if(b.key==="ArrowUp"){b.preventDefault(),g(M=>Math.max(M-1,0));return}if(b.key==="Enter"){const M=_[m];M&&(o(M.id),s())}};return window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}},[u,s,o,i,_,m]),i?u?K.jsx("div",{className:"hayos-launchpad",role:"dialog",onClick:s,children:K.jsxs("section",{className:"hayos-launchpad__panel",onClick:T=>T.stopPropagation(),children:[K.jsxs("header",{className:"hayos-launchpad__header",children:[K.jsx("span",{className:"hayos-launchpad__title",children:"Launchpad"}),K.jsx("button",{type:"button",className:"hayos-launchpad__close",onClick:s,children:"Close"})]}),K.jsxs("label",{className:"hayos-spotlight__search",children:[K.jsx("span",{className:"hayos-spotlight__label",children:"Search"}),K.jsx("input",{autoFocus:!0,value:h,onChange:T=>p(T.target.value),className:"hayos-spotlight__input",placeholder:"App name or id"})]}),K.jsx("div",{className:"hayos-launchpad__grid",children:_.map(T=>K.jsxs("button",{type:"button",className:"hayos-launchpad__item",onClick:()=>{o(T.id),s()},children:[K.jsx("span",{className:"hayos-launchpad__icon",children:T.name.slice(0,1).toUpperCase()}),K.jsx("span",{className:"hayos-launchpad__name",children:T.name}),n.has(T.id)&&K.jsx("span",{className:"hayos-launchpad__meta",children:"Running"})]},T.id))})]})}):K.jsx("div",{className:"hayos-spotlight",role:"dialog",onClick:s,children:K.jsxs("section",{className:"hayos-spotlight__panel",onClick:T=>T.stopPropagation(),children:[K.jsxs("label",{className:"hayos-spotlight__search",children:[K.jsx("span",{className:"hayos-spotlight__label",children:"Search"}),K.jsx("input",{autoFocus:!0,value:h,onChange:T=>p(T.target.value),className:"hayos-spotlight__input",placeholder:"App name or id"})]}),K.jsxs("ul",{className:"hayos-spotlight__results",children:[_.map((T,b)=>K.jsx("li",{className:"hayos-spotlight__row",children:K.jsxs("button",{type:"button",className:`hayos-spotlight__result ${b===m?"is-active":""}`,onClick:()=>{o(T.id),s()},children:[K.jsx("span",{children:T.name}),n.has(T.id)&&K.jsx("span",{className:"hayos-spotlight__meta",children:"Running"})]})},T.id)),_.length===0&&K.jsx("li",{className:"hayos-spotlight__empty",children:K.jsx("span",{children:"No results"})})]})]})}):null}const tV="linear-gradient(145deg, var(--hos-base-300), var(--hos-base-200) 55%, var(--hos-base-100))";function zA(i){if(typeof i=="string")try{return zA(JSON.parse(i))}catch{return null}if(!i||typeof i!="object")return null;const e=i,n=e.type==="image"?"image":e.type==="gradient"?"gradient":null,s=typeof e.value=="string"?e.value.trim():"";if(!n||!s){const h=e.type==="liveApp",p=typeof e.appId=="string"?e.appId.trim():"";if(!h||!p)return null;const m=e.options,g=m&&typeof m=="object"?Object.fromEntries(Object.entries(m).filter(([,_])=>typeof _=="string").map(([_,T])=>[_,T])):void 0;return{type:"liveApp",appId:p,mode:"wallpaper",options:g}}if(n==="gradient")return/^(linear-gradient|radial-gradient|conic-gradient)\(/i.test(s)?{type:"gradient",value:s}:null;if(!/^(data:image\/|https?:\/\/|\/)/i.test(s))return null;const u=e.fit==="contain"||e.fit==="fill"?e.fit:"cover";return{type:"image",value:s,fit:u}}function nV(){const{user:i,signOut:e}=W0(),[n,s]=N.useState([]),[o,u]=N.useState([]),[h,p]=N.useState([]),[m,g]=N.useState([]),[_,T]=N.useState([]),[b,M]=N.useState(new Map),[Y,L]=N.useState(new Map),[H,Q]=N.useState(new Map),[Z,se]=N.useState(!0),_e=N.useMemo(()=>UM(n,i?.uid,h,m,H,void 0,o,_,b,Y),[n,Y,b,_,i?.uid,h,m,H,o]),[ce,ae]=N.useState([]),[I,w]=N.useState(!1),[C,x]=N.useState(!1),[O,P]=N.useState(!1),[R,Le]=N.useState(()=>window.matchMedia("(max-width: 768px)").matches),[De,X]=N.useState([]),[oe,ve]=N.useState(0),[Ue,Ne]=N.useState(0),[V,te]=N.useState(!1),[he,fe]=N.useState(null),[Se,Re]=N.useState(null),[ze,Et]=N.useState(null),[it,li]=N.useState([]),Hi=N.useRef(1),[Fi,Zn]=JR(),Ln=Fi.get("node"),pn=N.useMemo(()=>new Map(n.map(j=>[j.id,j])),[n]),Pr=N.useMemo(()=>De[oe]??null,[De,oe]),mn=Pr?.appId??null,Lr=Pr?.query,Tt=N.useMemo(()=>new Set(["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter","dim","nord","sunset","caramellatte","abyss","silk"]),[]),wt=N.useMemo(()=>({saryan:[{key:"ui.theme",sourceField:"selectedTheme",valueType:"string"}]}),[]),Tr=N.useCallback(j=>j==="hy"?"hy":"en",[]),tl=j=>{if(j&&typeof j=="object"&&typeof j.toDate=="function")try{return j.toDate().toLocaleString()}catch{return null}if(j&&typeof j=="object"){const W=j;if(typeof W.seconds=="number"&&typeof W.nanoseconds=="number")return new Date(W.seconds*1e3).toLocaleString()}if(typeof j=="string"&&/^\d{4}-\d{2}-\d{2}T/.test(j)){const le=new Date(j);if(!Number.isNaN(le.getTime()))return le.toLocaleString()}return null},Ys=j=>{if(typeof j=="number")return String(j);if(typeof j=="boolean")return j?"true":"false";const W=tl(j);if(W)return W;if(typeof j=="string")return j;if(Array.isArray(j))return`Array(${j.length})`;if(j&&typeof j=="object")try{const le=JSON.stringify(j);return le.length>120?`${le.slice(0,117)}...`:le}catch{return"[object]"}return j===null?"null":null},Rt=N.useCallback((j,W)=>{switch(j){case"ui.theme":{if(typeof W!="string"||!Tt.has(W))return;document.documentElement.setAttribute("data-theme",W);return}case"ui.language":{const le=Tr(W);document.documentElement.lang=le;return}case"ui.wallpaper":{const le=zA(W);if(!le){fe(null),Re(null);return}if(le.type==="liveApp"){fe(null),Re({appId:le.appId,options:le.options});return}if(Re(null),le.type==="gradient"){fe({background:le.value});return}fe({backgroundImage:`url("${le.value}")`,backgroundSize:le.fit==="fill"?"100% 100%":le.fit||"cover",backgroundPosition:"center center",backgroundRepeat:"no-repeat"});return}default:return}},[Tt,Tr]),Ur=N.useCallback(async j=>{if(!j)return;const W=Kt(Ut()),le=ct(W,`users/${j}/osBindings`,"ui.language");(await Jn(le)).exists()||await Xn(le,{key:"ui.language",providerAppId:"system",sourceCollection:"settings",sourceDocumentId:"preferences",sourceField:"language",valueType:"string",updatedAt:new Date().toISOString()});const ke=ct(W,`users/${j}/settings`,"preferences"),et=await Jn(ke);if(!et.exists()){await Xn(ke,{language:"en",updatedAt:new Date().toISOString()},{merge:!0});return}const Nt=et.data();Nt.language!=="hy"&&Nt.language!=="en"&&await Xn(ke,{language:"en",updatedAt:new Date().toISOString()},{merge:!0})},[]),Gi=N.useCallback(async j=>{if(!j)return;const W=Kt(Ut()),le=ct(W,`users/${j}/osBindings`,"ui.wallpaper");(await Jn(le)).exists()||await Xn(le,{key:"ui.wallpaper",providerAppId:"wallpaper",sourceCollection:"space",sourceDocumentId:"wallpaper",sourceField:"wallpaper",valueType:"string",updatedAt:new Date().toISOString()});const ke=ct(W,`users/${j}/space`,"wallpaper");(await Jn(ke)).exists()||await Xn(ke,{wallpaper:JSON.stringify({type:"gradient",value:tV,fit:"cover"}),updatedAt:new Date().toISOString()},{merge:!0})},[]),zr=N.useCallback(j=>Object.entries(j).filter(([W])=>W!=="id").reduce((W,[le,Ie])=>{const ke=Ys(Ie);if(!ke)return W;let et="primitive";return Ie===null?et="null":Array.isArray(Ie)?et="array":Ie&&typeof Ie=="object"&&(et="object"),W.push({key:le,value:ke,rawValue:Ie,valueType:et}),W},[]),[]),er=N.useCallback(j=>j.map(W=>{const le={key:W.key,label:W.label,type:W.type,required:!!W.required};return{key:W.key,value:Ys(le)||W.key,rawValue:le,valueType:"object"}}),[]),Qs=N.useCallback(j=>j.map(W=>({id:String(W.id),fields:zr(W)})),[zr]);N.useMemo(()=>(KM(),null),[]);const Br=N.useCallback(j=>{if(j.id==="global-spaces-root"||j.id==="global-spaces-all")return{view:"spaces"};if(j.nodeType==="globalSpace"&&j.appDataId)return{view:"space",spaceId:j.appDataId}},[]),Xs=async(j,W)=>{switch(j.handler){case"installApp":W.appId&&i&&await VM(i.uid,W.appId);break;case"uninstallApp":W.appId&&i&&await xM(i.uid,W.appId);break;case"openApp":if(!W.appId)return;if(W.id.startsWith("store-")){Et(W.appId);return}Et(null),Xt(W.appId,Br(W));break;case"navigateInto":W.id&&Zn(le=>{const Ie=new URLSearchParams(le);return Ie.set("node",W.id),Ie});break}},ui=N.useCallback(async()=>{if(i){se(!0);try{await Promise.all([Ur(i.uid),Gi(i.uid)]);const[j,W,le,Ie,ke,et]=await Promise.all([fg(),dg(),xA(i.uid),MM(i.uid),kA(i.uid),IT()]),Nt=Array.from(new Set(le.map(pe=>pe.appId||pe.id||"").filter(pe=>!!pe))),gn=new Set(Nt),Ot=W.filter(pe=>gn.has(pe.id)),ht=Array.from(new Map([...j,...Ot,...W,...J0].map(pe=>[pe.id,pe])).values()),Jt=Array.from(new Set(Ie.map(pe=>pe.appId||pe.id||"").filter(pe=>!!pe))),ft=new Map;Ie.forEach(pe=>{const Mt=pe.appId||pe.id||"";Mt&&ft.set(Mt,zr(pe))});const It=new Map(Ie.map(pe=>[pe.appId||pe.id,pe])),yn=new Set(ke.map(pe=>pe.key)),hi=ke.filter(pe=>!!(pe.key&&pe.providerAppId&&pe.sourceField)).map(pe=>({key:pe.key,providerAppId:pe.providerAppId,sourceField:pe.sourceField})),nl=new Map([...j,...W].map(pe=>[pe.id,pe]));Jt.forEach(pe=>{const Mt=nl.get(pe),Vt=Array.isArray(Mt?.osExports)?Mt.osExports:[],rr=wt[pe]||[];(Vt.length>0?Vt:rr).forEach(ir=>{!ir?.key||!ir?.sourceField||yn.has(ir.key)||(hi.push({key:ir.key,providerAppId:pe,sourceField:ir.sourceField}),yn.add(ir.key))})}),hi.forEach(pe=>{if(!pe.providerAppId||!pe.sourceField)return;const Vt=It.get(pe.providerAppId)?.[pe.sourceField];Vt!==void 0&&Rt(pe.key,Vt)}),p(Nt),g(Jt),Q(ft),u(W),s(ht);const Ua=et.map(pe=>({id:pe.id,name:pe.name}));T(Ua);const za=await Promise.all(et.map(async pe=>{const[Mt,Vt]=await Promise.all([CT(pe.id),DT(pe.id)]);return{spaceId:pe.id,schema:Mt,records:Vt}})),Bn=new Map,fi=new Map;za.forEach(pe=>{Bn.set(pe.spaceId,er(pe.schema)),fi.set(pe.spaceId,Qs(pe.records))}),M(Bn),L(fi)}catch(j){console.error("Failed to load apps:",j),s(Uh),fe(null),Re(null),u([]),p([]),g([]),Q(new Map),T([]),M(new Map),L(new Map)}finally{se(!1)}return}s(Uh),fe(null),Re(null),u([]),p([]),g([]),Q(new Map);try{const j=await IT();T(j.map(ke=>({id:ke.id,name:ke.name})));const W=await Promise.all(j.map(async ke=>{const[et,Nt]=await Promise.all([CT(ke.id),DT(ke.id)]);return{spaceId:ke.id,schema:et,records:Nt}})),le=new Map,Ie=new Map;W.forEach(ke=>{le.set(ke.spaceId,er(ke.schema)),Ie.set(ke.spaceId,Qs(ke.records))}),M(le),L(Ie)}catch{T([]),M(new Map),L(new Map)}se(!1)},[wt,Rt,Ur,Gi,Qs,er,zr,i]);N.useEffect(()=>{ui()},[ui]),N.useEffect(()=>{const j=W=>{const le=W.data;le&&(le.type!=="hayos:installedAppsChanged"&&le.type!=="hayos:appSpaceChanged"&&le.type!=="hayos:globalSpacesChanged"||ui())};return window.addEventListener("message",j),()=>{window.removeEventListener("message",j)}},[ui]),N.useEffect(()=>{const j=W=>{const le=W.data;le?.type==="hayos:systemEvent"&&le.event==="languageChanged"&&Rt("ui.language",le.payload?.language)};return window.addEventListener("message",j),()=>{window.removeEventListener("message",j)}},[Rt]),N.useEffect(()=>{const j=W=>{const le=W.data;le?.type==="hayos:systemEvent"&&le.event==="wallpaperChanged"&&Rt("ui.wallpaper",le.payload?.wallpaper)};return window.addEventListener("message",j),()=>{window.removeEventListener("message",j)}},[Rt]),N.useEffect(()=>{const j=W=>{R||((W.metaKey||W.ctrlKey)&&W.code==="Space"&&(W.preventDefault(),w(le=>!le)),W.key==="Escape"&&w(!1))};return window.addEventListener("keydown",j),()=>{window.removeEventListener("keydown",j)}},[R]),N.useEffect(()=>{const j=window.matchMedia("(max-width: 768px)"),W=le=>{Le(le.matches),le.matches||x(!1)};return Le(j.matches),j.addEventListener("change",W),()=>{j.removeEventListener("change",W)}},[]);const Xt=N.useCallback((j,W)=>{const le=n.find(Ie=>Ie.id===j);if(!le){console.warn(`App ${j} not found`);return}if(R){const Ie=W?Object.fromEntries(Object.entries(W).filter(([,et])=>typeof et=="string"&&et.length>0)):void 0;let ke=0;X(et=>{const Nt=et.findIndex(Ot=>Ot.appId===j);if(Nt>=0)return ke=Nt,et.map((Ot,ht)=>ht===Nt?{...Ot,query:Ie}:Ot);const gn=[...et,{appId:j,query:Ie}];return ke=gn.length-1,gn}),ve(ke),Ne(0),te(!1),x(!1),w(!1);return}ae(Ie=>{const ke=W?Object.fromEntries(Object.entries(W).filter(([,Ot])=>typeof Ot=="string"&&Ot.length>0)):void 0,et=Ie.find(Ot=>{if(Ot.appId!==j)return!1;const ht=Ot.query||{},Jt=ke||{},ft=Object.keys(ht),It=Object.keys(Jt);return ft.length!==It.length?!1:ft.every(yn=>ht[yn]===Jt[yn])});if(et){const Ot=Ie.reduce((ht,Jt)=>Math.max(ht,Jt.zIndex),0);return Ie.map(ht=>ht.id===et.id?{...ht,zIndex:Ot+1}:ht)}const Nt=`w-${Hi.current++}`,gn=Ie.reduce((Ot,ht)=>Math.max(Ot,ht.zIndex),0);return[...Ie,{id:Nt,appId:j,title:le.name,zIndex:gn+1,query:ke}]})},[n,R]);N.useEffect(()=>{const j=W=>{const le=W.data;le?.type==="hayos:koryoonAction"&&le.action?.handler==="openApp"&&typeof le.node?.appId=="string"&&le.node.appId.length>0&&Xt(le.node.appId,Br(le.node))};return window.addEventListener("message",j),()=>{window.removeEventListener("message",j)}},[Br,Xt]);const Wt=j=>{ae(W=>W.filter(le=>le.id!==j))},In=j=>{ae(W=>{const le=W.reduce((Ie,ke)=>Math.max(Ie,ke.zIndex),0);return W.map(Ie=>Ie.id===j?{...Ie,zIndex:le+1}:Ie)})},St=N.useCallback(async()=>{if(!O){P(!0);try{await e()}catch(j){console.error("Failed to sign out",j)}finally{P(!1)}}},[O,e]),Ws=N.useMemo(()=>R?new Set(De.map(j=>j.appId)):new Set(ce.map(j=>j.appId)),[R,De,ce]),ci=N.useMemo(()=>{const j=new Set(h);return n.filter(W=>W.builtin||j.has(W.id))},[n,h]),$i=N.useMemo(()=>R?mn?{id:"mobile-active",appId:mn,title:pn.get(mn)?.name||"App",zIndex:1,query:Lr}:null:ce.reduce((j,W)=>!j||W.zIndex>j.zIndex?W:j,null),[pn,R,mn,Lr,ce]),Un=N.useMemo(()=>{if($i)return n.find(j=>j.id===$i.appId)?.name},[$i,n]),jr=N.useMemo(()=>{if(!Se)return null;const j=pn.get(Se.appId);if(!j)return null;const W=new URLSearchParams({appId:j.id,mode:"wallpaper",...Se.options||{}});return`${j.iframePath}?${W.toString()}`},[pn,Se]),yt=N.useMemo(()=>{if(!R||!mn)return null;const j=pn.get(mn);if(!j)return null;const W=new URLSearchParams({appId:j.id,device:"mobile",...Lr||{}});return`${j.iframePath}?${W.toString()}`},[pn,R,mn,Lr]),tr=R?!!yt:ce.length>0,nr=N.useMemo(()=>{if(!R)return;const j=V?window.innerHeight:Ue,W=V?.94:1-Math.min(.06,Ue/2400),le=V?0:1-Math.min(.28,Ue/620);return{transform:`translateY(${j}px) scale(${W})`,opacity:le,transition:V?"transform 220ms ease-out, opacity 220ms ease-out":"none"}},[R,V,Ue]),zn=N.useCallback(()=>{if(!R||!mn||V)return;const j=oe,W=Math.max(0,De.length-1);te(!0),window.setTimeout(()=>{X(le=>le.filter((Ie,ke)=>ke!==j)),ve(W===0?0:Math.min(j,W-1)),Ne(0),te(!1),x(!1)},220)},[R,mn,V,De.length,oe]),La=N.useCallback(j=>{!R||V||De.length<2||(ve(W=>j==="left"?(W+1)%De.length:(W-1+De.length)%De.length),Ne(0))},[R,V,De.length]);N.useEffect(()=>{if(R){if(De.length===0&&oe!==0){ve(0);return}oe>De.length-1&&De.length>0&&ve(De.length-1)}},[R,De.length,oe]),N.useEffect(()=>{R&&X(j=>j.filter(W=>pn.has(W.appId)))},[pn,R]);const Js=N.useCallback((j,W)=>{if(W.appId){Xt(W.appId,Br(W));return}W.childrenIds.length>0&&Zn(le=>{const Ie=new URLSearchParams(le);return Ie.set("node",W.id),Ie})},[Br,Xt,Zn]);return N.useCallback(()=>K.jsxs("div",{className:"hayos-koryoon",children:[K.jsx(QM,{hierarchy:_e,rootNodeId:"hayos-root",currentNodeId:Ln,onNodeActivate:Js,onToolbarAction:Xs,onNavigateTo:j=>{Zn(W=>{const le=new URLSearchParams(W);return le.set("node",j),le})},onStateChange:j=>{Array.isArray(j?.history)&&li(j.history)}}),it.length>0&&K.jsx("div",{className:"hayos-koryoon__breadcrumbs",children:K.jsx("div",{className:"breadcrumbs backdrop-blur-lg card bg-base-200/10 p-4 text-sm",children:K.jsx("ul",{children:it.map(j=>{const le=_e[j]?.name?.trim()||(j==="hayos-root"?"HayOS":j);return K.jsx("li",{children:K.jsx("span",{className:"link link-hover",children:le})},j)})})})})]}),[Ln,Js,Xs,_e,it,Zn]),Z?K.jsxs("div",{className:"t-layout t-layout-app t-layout t-layout-center",children:[K.jsx("span",{className:"spinner spinner-primary"}),K.jsx("p",{className:"mt-4",children:"  ..."})]}):K.jsxs("div",{className:"hayos-shell",children:[K.jsx("div",{className:"hayos-wallpaper",style:he??void 0}),jr&&K.jsx("iframe",{title:"Live Wallpaper",src:jr,className:"hayos-wallpaper-live",tabIndex:-1}),K.jsx(JM,{activeAppName:Un,isMobile:R,onOpenSpotlight:()=>{if(R){Ne(0),x(!0);return}w(!0)},onOpenLaunchpad:()=>{Ne(0),x(!0)},onSignOut:St,signingOut:O}),K.jsx("main",{className:`hayos-desktop ${R?"hayos-desktop--mobile":""}`,style:{zIndex:tr?20:0},children:R?yt?K.jsx("div",{className:"hayos-mobile-app",style:nr,children:K.jsx("iframe",{title:Un||"Active app",src:yt,className:"hayos-mobile-app__frame"})}):null:K.jsxs(K.Fragment,{children:[ze&&pn.has(ze)&&K.jsx(WM,{app:pn.get(ze),onClose:()=>Et(null)}),K.jsx(XM,{windows:ce,apps:n,onClose:Wt,onFocus:In})]})}),K.jsx(ZM,{apps:ci,runningAppIds:Ws,isMobile:R,launchpadOpen:C,launchpadDragDistance:Ue,launchpadGestureEnabled:R&&!C,onLaunchpadDrag:j=>{Ne(j)},onLaunchpadSwipeUp:({distance:j,velocity:W})=>{if(j>74||W>.52){Ne(0),x(!0),w(!1);return}Ne(0)},onLaunchpadSwipeDown:({distance:j,velocity:W})=>{if(j>86||W>.58){mn&&zn();return}Ne(0)},onLaunchpadSwipeLeft:({distance:j,velocity:W})=>{if(j>72||W>.52){La("left");return}Ne(0)},onLaunchpadSwipeRight:({distance:j,velocity:W})=>{if(j>72||W>.52){La("right");return}Ne(0)},onLaunchpadGestureCancel:()=>{Ne(0)},onOpenApp:j=>{Xt(j),w(!1),x(!1),Ne(0)}}),K.jsx(eV,{open:R?C:I,apps:ci,runningAppIds:Ws,isMobile:R,onClose:()=>{w(!1),x(!1),Ne(0)},onOpenApp:j=>Xt(j)})]})}function rV(){const{loading:i,user:e,signIn:n}=W0(),[s,o]=N.useState(""),[u,h]=N.useState(""),[p,m]=N.useState(null),g=async()=>{m(null);try{await n(s.trim(),u)}catch(_){const T=_ instanceof Error?_.message:"Failed to sign in";m(T)}};return i?K.jsx("div",{className:"t-layout t-layout-app t-layout t-layout-center",children:K.jsx("span",{className:"spinner spinner-primary"})}):e?K.jsx(KR,{children:K.jsx(SR,{children:K.jsx(XT,{path:"/",element:K.jsx(nV,{})})})}):K.jsx("div",{className:"t-layout t-layout-app t-layout t-layout-center",children:K.jsx("div",{className:"card t-layout",children:K.jsxs("div",{className:"card-body t-layout t-layout-gap",children:[K.jsx("h2",{className:"card-title",children:"HayOS"}),K.jsx("p",{children:"Please sign in to continue."}),K.jsxs("label",{className:"form-control w-full",children:[K.jsx("span",{className:"label-text",children:"Email"}),K.jsx("input",{type:"email",className:"input input-bordered w-full",value:s,onChange:_=>o(_.target.value),autoComplete:"email"})]}),K.jsxs("label",{className:"form-control w-full",children:[K.jsx("span",{className:"label-text",children:"Password"}),K.jsx("input",{type:"password",className:"input input-bordered w-full",value:u,onChange:_=>h(_.target.value),autoComplete:"current-password"})]}),p?K.jsx("p",{className:"text-error text-sm",children:p}):null,K.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{g()},disabled:!s.trim()||!u,children:"Sign in"})]})})})}document.documentElement.dataset.theme=document.documentElement.dataset.theme||"dark";ww.createRoot(document.getElementById("root")).render(K.jsx(N.StrictMode,{children:K.jsx(aD,{children:K.jsx(rV,{})})}));
